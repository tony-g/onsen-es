{"version":3,"file":"onsenui.esm.js","sources":["../core/src/polyfills/polyfill-switches.js","../node_modules/@onsenui/custom-elements/src/Utilities.js","../node_modules/@onsenui/custom-elements/src/CustomElementState.js","../node_modules/@onsenui/custom-elements/src/CustomElementInternals.js","../node_modules/@onsenui/custom-elements/src/DocumentConstructionObserver.js","../node_modules/@onsenui/custom-elements/src/Deferred.js","../node_modules/@onsenui/custom-elements/src/CustomElementRegistry.js","../node_modules/@onsenui/custom-elements/src/Patch/Native.js","../node_modules/@onsenui/custom-elements/src/AlreadyConstructedMarker.js","../node_modules/@onsenui/custom-elements/src/Patch/HTMLElement.js","../node_modules/@onsenui/custom-elements/src/Patch/Interface/ParentNode.js","../node_modules/@onsenui/custom-elements/src/Patch/Document.js","../node_modules/@onsenui/custom-elements/src/Patch/Node.js","../node_modules/@onsenui/custom-elements/src/Patch/Interface/ChildNode.js","../node_modules/@onsenui/custom-elements/src/Patch/Element.js","../node_modules/@onsenui/custom-elements/src/custom-elements.js","../node_modules/rollup-plugin-node-globals/src/global.js","../node_modules/process-es6/browser.js","../core/src/polyfills/setImmediate@1.0.2+mod/setImmediate.js","../core/src/polyfills/index.js","../core/src/vendor/FastClick@1.0.6+mod/fastclick.js","../core/src/vendor/microevent.js@47cbc14+mod/microevent.js","../core/src/vendor/viewport.js","../core/src/vendor/index.js","../core/src/ons/platform.js","../core/src/ons/page-attribute-expression.js","../core/src/ons/animit.js","../core/src/ons/gesture-detector.js","../core/src/ons/internal/swiper.js","../core/src/ons/internal/internal.js","../core/src/ons/internal/animator-factory.js","../core/src/ons/autostyle.js","../core/src/ons/internal/modifier-util.js","../core/src/ons/internal/index.js","../core/src/ons/animation-options-parser.js","../core/src/ons/util.js","../core/src/ons/action-sheet.js","../core/src/ons/orientation.js","../core/src/ons/modifier.js","../core/src/ons/software-keyboard.js","../core/src/ons/device-back-button-dispatcher.js","../core/src/ons/doorlock.js","../core/src/ons/content-ready.js","../core/src/ons/page-loader.js","../core/src/ons/base-animator.js","../core/src/ons/ons.js","../core/src/elements/base/base-element.js","../core/src/elements/ons-button.js","../core/src/elements/ons-list-item.js","../core/src/elements/ons-list.js","../core/src/elements/ons-toolbar.js","../core/src/elements/ons-page.js","../core/src/elements/ons-progress-bar.js","../core/src/elements/ons-splitter-content.js","../core/src/elements/ons-splitter-mask.js","../core/src/elements/ons-splitter/animator.js","../core/src/elements/ons-splitter/overlay-animator.js","../core/src/elements/ons-splitter/push-animator.js","../core/src/elements/ons-splitter/reveal-animator.js","../core/src/elements/ons-splitter/index.js","../core/src/elements/ons-splitter-side.js","../core/src/elements/ons-toolbar-button.js","../core/src/setup.js"],"sourcesContent":["// For @onsenui/custom-elements\nif (window.customElements) { // even if native CE1 impl exists, use polyfill\n    window.customElements.forcePolyfill = true;\n}\n","const reservedTagList = new Set([\n  'annotation-xml',\n  'color-profile',\n  'font-face',\n  'font-face-src',\n  'font-face-uri',\n  'font-face-format',\n  'font-face-name',\n  'missing-glyph',\n]);\n\n/**\n * @param {string} localName\n * @returns {boolean}\n */\nexport function isValidCustomElementName(localName) {\n  const reserved = reservedTagList.has(localName);\n  const validForm = /^[a-z][.0-9_a-z]*-[\\-.0-9_a-z]*$/.test(localName);\n  return !reserved && validForm;\n}\n\n/**\n * @private\n * @param {!Node} node\n * @return {boolean}\n */\nexport function isConnected(node) {\n  // Use `Node#isConnected`, if defined.\n  const nativeValue = node.isConnected;\n  if (nativeValue !== undefined) {\n    return nativeValue;\n  }\n\n  /** @type {?Node|undefined} */\n  let current = node;\n  while (current && !(current.__CE_isImportDocument || current instanceof Document)) {\n    current = current.parentNode || (window.ShadowRoot && current instanceof ShadowRoot ? current.host : undefined);\n  }\n  return !!(current && (current.__CE_isImportDocument || current instanceof Document));\n}\n\n/**\n * @param {!Node} root\n * @param {!Node} start\n * @return {?Node}\n */\nfunction nextSiblingOrAncestorSibling(root, start) {\n  let node = start;\n  while (node && node !== root && !node.nextSibling) {\n    node = node.parentNode;\n  }\n  return (!node || node === root) ? null : node.nextSibling;\n}\n\n/**\n * @param {!Node} root\n * @param {!Node} start\n * @return {?Node}\n */\nfunction nextNode(root, start) {\n  return start.firstChild ? start.firstChild : nextSiblingOrAncestorSibling(root, start);\n}\n\n/**\n * @param {!Node} root\n * @param {!function(!Element)} callback\n * @param {!Set<Node>=} visitedImports\n */\nexport function walkDeepDescendantElements(root, callback, visitedImports = new Set()) {\n  let node = root;\n  while (node) {\n    if (node.nodeType === Node.ELEMENT_NODE) {\n      const element = /** @type {!Element} */(node);\n\n      callback(element);\n\n      const localName = element.localName;\n      if (localName === 'link' && element.getAttribute('rel') === 'import') {\n        // If this import (polyfilled or not) has it's root node available,\n        // walk it.\n        const importNode = /** @type {!Node} */ (element.import);\n        if (importNode instanceof Node && !visitedImports.has(importNode)) {\n          // Prevent multiple walks of the same import root.\n          visitedImports.add(importNode);\n\n          for (let child = importNode.firstChild; child; child = child.nextSibling) {\n            walkDeepDescendantElements(child, callback, visitedImports);\n          }\n        }\n\n        // Ignore descendants of import links to prevent attempting to walk the\n        // elements created by the HTML Imports polyfill that we just walked\n        // above.\n        node = nextSiblingOrAncestorSibling(root, element);\n        continue;\n      } else if (localName === 'template') {\n        // Ignore descendants of templates. There shouldn't be any descendants\n        // because they will be moved into `.content` during construction in\n        // browsers that support template but, in case they exist and are still\n        // waiting to be moved by a polyfill, they will be ignored.\n        node = nextSiblingOrAncestorSibling(root, element);\n        continue;\n      }\n\n      // Walk shadow roots.\n      const shadowRoot = element.__CE_shadowRoot;\n      if (shadowRoot) {\n        for (let child = shadowRoot.firstChild; child; child = child.nextSibling) {\n          walkDeepDescendantElements(child, callback, visitedImports);\n        }\n      }\n    }\n\n    node = nextNode(root, node);\n  }\n}\n\n/**\n * Used to suppress Closure's \"Modifying the prototype is only allowed if the\n * constructor is in the same scope\" warning without using\n * `@suppress {newCheckTypes, duplicate}` because `newCheckTypes` is too broad.\n *\n * @param {!Object} destination\n * @param {string} name\n * @param {*} value\n */\nexport function setPropertyUnchecked(destination, name, value) {\n  destination[name] = value;\n}\n","/**\n * @enum {number}\n */\nconst CustomElementState = {\n  custom: 1,\n  failed: 2,\n};\n\nexport default CustomElementState;\n","import * as Utilities from './Utilities.js';\nimport CEState from './CustomElementState.js';\n\nexport default class CustomElementInternals {\n  constructor() {\n    /** @type {!Map<string, !CustomElementDefinition>} */\n    this._localNameToDefinition = new Map();\n\n    /** @type {!Map<!Function, !CustomElementDefinition>} */\n    this._constructorToDefinition = new Map();\n\n    /** @type {!Array<!function(!Node)>} */\n    this._patches = [];\n\n    /** @type {boolean} */\n    this._hasPatches = false;\n  }\n\n  /**\n   * @param {string} localName\n   * @param {!CustomElementDefinition} definition\n   */\n  setDefinition(localName, definition) {\n    this._localNameToDefinition.set(localName, definition);\n    this._constructorToDefinition.set(definition.constructor, definition);\n  }\n\n  /**\n   * @param {string} localName\n   * @return {!CustomElementDefinition|undefined}\n   */\n  localNameToDefinition(localName) {\n    return this._localNameToDefinition.get(localName);\n  }\n\n  /**\n   * @param {!Function} constructor\n   * @return {!CustomElementDefinition|undefined}\n   */\n  constructorToDefinition(constructor) {\n    return this._constructorToDefinition.get(constructor);\n  }\n\n  /**\n   * @param {!function(!Node)} listener\n   */\n  addPatch(listener) {\n    this._hasPatches = true;\n    this._patches.push(listener);\n  }\n\n  /**\n   * @param {!Node} node\n   */\n  patchTree(node) {\n    if (!this._hasPatches) return;\n\n    Utilities.walkDeepDescendantElements(node, element => this.patch(element));\n  }\n\n  /**\n   * @param {!Node} node\n   */\n  patch(node) {\n    if (!this._hasPatches) return;\n\n    if (node.__CE_patched) return;\n    node.__CE_patched = true;\n\n    for (let i = 0; i < this._patches.length; i++) {\n      this._patches[i](node);\n    }\n  }\n\n  /**\n   * @param {!Node} root\n   */\n  connectTree(root) {\n    const elements = [];\n\n    Utilities.walkDeepDescendantElements(root, element => elements.push(element));\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element.__CE_state === CEState.custom) {\n        if (Utilities.isConnected(element)) {\n          this.connectedCallback(element);\n        }\n      } else {\n        this.upgradeElement(element);\n      }\n    }\n  }\n\n  /**\n   * @param {!Node} root\n   */\n  disconnectTree(root) {\n    const elements = [];\n\n    Utilities.walkDeepDescendantElements(root, element => elements.push(element));\n\n    for (let i = 0; i < elements.length; i++) {\n      const element = elements[i];\n      if (element.__CE_state === CEState.custom) {\n        this.disconnectedCallback(element);\n      }\n    }\n  }\n\n  /**\n   * Upgrades all uncustomized custom elements at and below a root node for\n   * which there is a definition. When custom element reaction callbacks are\n   * assumed to be called synchronously (which, by the current DOM / HTML spec\n   * definitions, they are *not*), callbacks for both elements customized\n   * synchronously by the parser and elements being upgraded occur in the same\n   * relative order.\n   *\n   * NOTE: This function, when used to simulate the construction of a tree that\n   * is already created but not customized (i.e. by the parser), does *not*\n   * prevent the element from reading the 'final' (true) state of the tree. For\n   * example, the element, during truly synchronous parsing / construction would\n   * see that it contains no children as they have not yet been inserted.\n   * However, this function does not modify the tree, the element will\n   * (incorrectly) have children. Additionally, self-modification restrictions\n   * for custom element constructors imposed by the DOM spec are *not* enforced.\n   *\n   *\n   * The following nested list shows the steps extending down from the HTML\n   * spec's parsing section that cause elements to be synchronously created and\n   * upgraded:\n   *\n   * The \"in body\" insertion mode:\n   * https://html.spec.whatwg.org/multipage/syntax.html#parsing-main-inbody\n   * - Switch on token:\n   *   .. other cases ..\n   *   -> Any other start tag\n   *      - [Insert an HTML element](below) for the token.\n   *\n   * Insert an HTML element:\n   * https://html.spec.whatwg.org/multipage/syntax.html#insert-an-html-element\n   * - Insert a foreign element for the token in the HTML namespace:\n   *   https://html.spec.whatwg.org/multipage/syntax.html#insert-a-foreign-element\n   *   - Create an element for a token:\n   *     https://html.spec.whatwg.org/multipage/syntax.html#create-an-element-for-the-token\n   *     - Will execute script flag is true?\n   *       - (Element queue pushed to the custom element reactions stack.)\n   *     - Create an element:\n   *       https://dom.spec.whatwg.org/#concept-create-element\n   *       - Sync CE flag is true?\n   *         - Constructor called.\n   *         - Self-modification restrictions enforced.\n   *       - Sync CE flag is false?\n   *         - (Upgrade reaction enqueued.)\n   *     - Attributes appended to element.\n   *       (`attributeChangedCallback` reactions enqueued.)\n   *     - Will execute script flag is true?\n   *       - (Element queue popped from the custom element reactions stack.\n   *         Reactions in the popped stack are invoked.)\n   *   - (Element queue pushed to the custom element reactions stack.)\n   *   - Insert the element:\n   *     https://dom.spec.whatwg.org/#concept-node-insert\n   *     - Shadow-including descendants are connected. During parsing\n   *       construction, there are no shadow-*excluding* descendants.\n   *       However, the constructor may have validly attached a shadow\n   *       tree to itself and added descendants to that shadow tree.\n   *       (`connectedCallback` reactions enqueued.)\n   *   - (Element queue popped from the custom element reactions stack.\n   *     Reactions in the popped stack are invoked.)\n   *\n   * @param {!Node} root\n   * @param {!Set<Node>=} visitedImports\n   */\n  patchAndUpgradeTree(root, visitedImports = new Set()) {\n    const elements = [];\n\n    const gatherElements = element => {\n      if (element.localName === 'link' && element.getAttribute('rel') === 'import') {\n        // The HTML Imports polyfill sets a descendant element of the link to\n        // the `import` property, specifically this is *not* a Document.\n        const importNode = /** @type {?Node} */ (element.import);\n\n        if (importNode instanceof Node && importNode.readyState === 'complete') {\n          importNode.__CE_isImportDocument = true;\n\n          // Connected links are associated with the registry.\n          importNode.__CE_hasRegistry = true;\n        } else {\n          // If this link's import root is not available, its contents can't be\n          // walked. Wait for 'load' and walk it when it's ready.\n          element.addEventListener('load', () => {\n            const importNode = /** @type {!Node} */ (element.import);\n\n            if (importNode.__CE_documentLoadHandled) return;\n            importNode.__CE_documentLoadHandled = true;\n\n            importNode.__CE_isImportDocument = true;\n\n            // Connected links are associated with the registry.\n            importNode.__CE_hasRegistry = true;\n\n            // Clone the `visitedImports` set that was populated sync during\n            // the `patchAndUpgradeTree` call that caused this 'load' handler to\n            // be added. Then, remove *this* link's import node so that we can\n            // walk that import again, even if it was partially walked later\n            // during the same `patchAndUpgradeTree` call.\n            const clonedVisitedImports = new Set(visitedImports);\n            visitedImports.delete(importNode);\n\n            this.patchAndUpgradeTree(importNode, visitedImports);\n          });\n        }\n      } else {\n        elements.push(element);\n      }\n    };\n\n    // `walkDeepDescendantElements` populates (and internally checks against)\n    // `visitedImports` when traversing a loaded import.\n    Utilities.walkDeepDescendantElements(root, gatherElements, visitedImports);\n\n    if (this._hasPatches) {\n      for (let i = 0; i < elements.length; i++) {\n        this.patch(elements[i]);\n      }\n    }\n\n    for (let i = 0; i < elements.length; i++) {\n      this.upgradeElement(elements[i]);\n    }\n  }\n\n  /**\n   * @param {!Element} element\n   */\n  upgradeElement(element) {\n    const currentState = element.__CE_state;\n    if (currentState !== undefined) return;\n\n    const definition = this.localNameToDefinition(element.localName);\n    if (!definition) return;\n\n    definition.constructionStack.push(element);\n\n    const constructor = definition.constructor;\n    try {\n      try {\n        let result = new (constructor)();\n        if (result !== element) {\n          throw new Error('The custom element constructor did not produce the element being upgraded.');\n        }\n      } finally {\n        definition.constructionStack.pop();\n      }\n    } catch (e) {\n      element.__CE_state = CEState.failed;\n      throw e;\n    }\n\n    element.__CE_state = CEState.custom;\n    element.__CE_definition = definition;\n\n    if (definition.attributeChangedCallback) {\n      const observedAttributes = definition.observedAttributes;\n      for (let i = 0; i < observedAttributes.length; i++) {\n        const name = observedAttributes[i];\n        const value = element.getAttribute(name);\n        if (value !== null) {\n          this.attributeChangedCallback(element, name, null, value, null);\n        }\n      }\n    }\n\n    if (Utilities.isConnected(element)) {\n      this.connectedCallback(element);\n    }\n  }\n\n  /**\n   * @param {!Element} element\n   */\n  connectedCallback(element) {\n    const definition = element.__CE_definition;\n    if (definition.connectedCallback) {\n      definition.connectedCallback.call(element);\n    }\n\n    element.__CE_isConnectedCallbackCalled = true;\n  }\n\n  /**\n   * @param {!Element} element\n   */\n  disconnectedCallback(element) {\n    if (!element.__CE_isConnectedCallbackCalled) {\n      this.connectedCallback(element);\n    }\n\n    const definition = element.__CE_definition;\n    if (definition.disconnectedCallback) {\n      definition.disconnectedCallback.call(element);\n    }\n\n    element.__CE_isConnectedCallbackCalled = undefined;\n  }\n\n  /**\n   * @param {!Element} element\n   * @param {string} name\n   * @param {?string} oldValue\n   * @param {?string} newValue\n   * @param {?string} namespace\n   */\n  attributeChangedCallback(element, name, oldValue, newValue, namespace) {\n    const definition = element.__CE_definition;\n    if (\n      definition.attributeChangedCallback &&\n      definition.observedAttributes.indexOf(name) > -1\n    ) {\n      definition.attributeChangedCallback.call(element, name, oldValue, newValue, namespace);\n    }\n  }\n}\n","import CustomElementInternals from './CustomElementInternals.js';\n\nexport default class DocumentConstructionObserver {\n  constructor(internals, doc) {\n    /**\n     * @type {!CustomElementInternals}\n     */\n    this._internals = internals;\n\n    /**\n     * @type {!Document}\n     */\n    this._document = doc;\n\n    /**\n     * @type {MutationObserver|undefined}\n     */\n    this._observer = undefined;\n\n\n    // Simulate tree construction for all currently accessible nodes in the\n    // document.\n    this._internals.patchAndUpgradeTree(this._document);\n\n    if (this._document.readyState === 'loading') {\n      this._observer = new MutationObserver(this._handleMutations.bind(this));\n\n      // Nodes created by the parser are given to the observer *before* the next\n      // task runs. Inline scripts are run in a new task. This means that the\n      // observer will be able to handle the newly parsed nodes before the inline\n      // script is run.\n      this._observer.observe(this._document, {\n        childList: true,\n        subtree: true,\n      });\n    }\n  }\n\n  disconnect() {\n    if (this._observer) {\n      this._observer.disconnect();\n    }\n  }\n\n  /**\n   * @param {!Array<!MutationRecord>} mutations\n   */\n  _handleMutations(mutations) {\n    // Once the document's `readyState` is 'interactive' or 'complete', all new\n    // nodes created within that document will be the result of script and\n    // should be handled by patching.\n    const readyState = this._document.readyState;\n    if (readyState === 'interactive' || readyState === 'complete') {\n      this.disconnect();\n    }\n\n    for (let i = 0; i < mutations.length; i++) {\n      const addedNodes = mutations[i].addedNodes;\n      for (let j = 0; j < addedNodes.length; j++) {\n        const node = addedNodes[j];\n        this._internals.patchAndUpgradeTree(node);\n      }\n    }\n  }\n}\n","/**\n * @template T\n */\nexport default class Deferred {\n  constructor() {\n    /**\n     * @private\n     * @type {T|undefined}\n     */\n    this._value = undefined;\n\n    /**\n     * @private\n     * @type {Function|undefined}\n     */\n    this._resolve = undefined;\n\n    /**\n     * @private\n     * @type {!Promise<T>}\n     */\n    this._promise = new Promise(resolve => {\n      this._resolve = resolve;\n\n      if (this._value) {\n        resolve(this._value);\n      }\n    });\n  }\n\n  /**\n   * @param {T} value\n   */\n  resolve(value) {\n    if (this._value) {\n      throw new Error('Already resolved.');\n    }\n\n    this._value = value;\n\n    if (this._resolve) {\n      this._resolve(value);\n    }\n  }\n\n  /**\n   * @return {!Promise<T>}\n   */\n  toPromise() {\n    return this._promise;\n  }\n}\n","import CustomElementInternals from './CustomElementInternals.js';\nimport DocumentConstructionObserver from './DocumentConstructionObserver.js';\nimport Deferred from './Deferred.js';\nimport * as Utilities from './Utilities.js';\n\n/**\n * @unrestricted\n */\nexport default class CustomElementRegistry {\n\n  /**\n   * @param {!CustomElementInternals} internals\n   */\n  constructor(internals) {\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this._elementDefinitionIsRunning = false;\n\n    /**\n     * @private\n     * @type {!CustomElementInternals}\n     */\n    this._internals = internals;\n\n    /**\n     * @private\n     * @type {!Map<string, !Deferred<undefined>>}\n     */\n    this._whenDefinedDeferred = new Map();\n\n    /**\n     * The default flush callback triggers the document walk synchronously.\n     * @private\n     * @type {!Function}\n     */\n    this._flushCallback = fn => fn();\n\n    /**\n     * @private\n     * @type {boolean}\n     */\n    this._flushPending = false;\n\n    /**\n     * @private\n     * @type {!Array<string>}\n     */\n    this._unflushedLocalNames = [];\n\n    /**\n     * @private\n     * @type {!DocumentConstructionObserver}\n     */\n    this._documentConstructionObserver = new DocumentConstructionObserver(internals, document);\n  }\n\n  /**\n   * @param {string} localName\n   * @param {!Function} constructor\n   */\n  define(localName, constructor) {\n    if (!(constructor instanceof Function)) {\n      throw new TypeError('Custom element constructors must be functions.');\n    }\n\n    if (!Utilities.isValidCustomElementName(localName)) {\n      throw new SyntaxError(`The element name '${localName}' is not valid.`);\n    }\n\n    if (this._internals.localNameToDefinition(localName)) {\n      throw new Error(`A custom element with name '${localName}' has already been defined.`);\n    }\n\n    if (this._elementDefinitionIsRunning) {\n      throw new Error('A custom element is already being defined.');\n    }\n    this._elementDefinitionIsRunning = true;\n\n    let connectedCallback;\n    let disconnectedCallback;\n    let adoptedCallback;\n    let attributeChangedCallback;\n    let observedAttributes;\n    try {\n      /** @type {!Object} */\n      const prototype = constructor.prototype;\n      if (!(prototype instanceof Object)) {\n        throw new TypeError('The custom element constructor\\'s prototype is not an object.');\n      }\n\n      function getCallback(name) {\n        const callbackValue = prototype[name];\n        if (callbackValue !== undefined && !(callbackValue instanceof Function)) {\n          throw new Error(`The '${name}' callback must be a function.`);\n        }\n        return callbackValue;\n      }\n\n      connectedCallback = getCallback('connectedCallback');\n      disconnectedCallback = getCallback('disconnectedCallback');\n      adoptedCallback = getCallback('adoptedCallback');\n      attributeChangedCallback = getCallback('attributeChangedCallback');\n      observedAttributes = constructor['observedAttributes'] || [];\n    } catch (e) {\n      return;\n    } finally {\n      this._elementDefinitionIsRunning = false;\n    }\n\n    const definition = {\n      localName,\n      constructor,\n      connectedCallback,\n      disconnectedCallback,\n      adoptedCallback,\n      attributeChangedCallback,\n      observedAttributes,\n      constructionStack: [],\n    };\n\n    this._internals.setDefinition(localName, definition);\n\n    this._unflushedLocalNames.push(localName);\n\n    // If we've already called the flush callback and it hasn't called back yet,\n    // don't call it again.\n    if (!this._flushPending) {\n      this._flushPending = true;\n      this._flushCallback(() => this._flush());\n    }\n  }\n\n  _flush() {\n    // If no new definitions were defined, don't attempt to flush. This could\n    // happen if a flush callback keeps the function it is given and calls it\n    // multiple times.\n    if (this._flushPending === false) return;\n\n    this._flushPending = false;\n    this._internals.patchAndUpgradeTree(document);\n\n    while (this._unflushedLocalNames.length > 0) {\n      const localName = this._unflushedLocalNames.shift();\n      const deferred = this._whenDefinedDeferred.get(localName);\n      if (deferred) {\n        deferred.resolve(undefined);\n      }\n    }\n  }\n\n  /**\n   * @param {string} localName\n   * @return {Function|undefined}\n   */\n  get(localName) {\n    const definition = this._internals.localNameToDefinition(localName);\n    if (definition) {\n      return definition.constructor;\n    }\n\n    return undefined;\n  }\n\n  /**\n   * @param {string} localName\n   * @return {!Promise<undefined>}\n   */\n  whenDefined(localName) {\n    if (!Utilities.isValidCustomElementName(localName)) {\n      return Promise.reject(new SyntaxError(`'${localName}' is not a valid custom element name.`));\n    }\n\n    const prior = this._whenDefinedDeferred.get(localName);\n    if (prior) {\n      return prior.toPromise();\n    }\n\n    const deferred = new Deferred();\n    this._whenDefinedDeferred.set(localName, deferred);\n\n    const definition = this._internals.localNameToDefinition(localName);\n    // Resolve immediately only if the given local name has a definition *and*\n    // the full document walk to upgrade elements with that local name has\n    // already happened.\n    if (definition && this._unflushedLocalNames.indexOf(localName) === -1) {\n      deferred.resolve(undefined);\n    }\n\n    return deferred.toPromise();\n  }\n\n  polyfillWrapFlushCallback(outer) {\n    this._documentConstructionObserver.disconnect();\n    const inner = this._flushCallback;\n    this._flushCallback = flush => outer(() => inner(flush));\n  }\n}\n\n// Closure compiler exports.\nwindow['CustomElementRegistry'] = CustomElementRegistry;\nCustomElementRegistry.prototype['define'] = CustomElementRegistry.prototype.define;\nCustomElementRegistry.prototype['get'] = CustomElementRegistry.prototype.get;\nCustomElementRegistry.prototype['whenDefined'] = CustomElementRegistry.prototype.whenDefined;\nCustomElementRegistry.prototype['polyfillWrapFlushCallback'] = CustomElementRegistry.prototype.polyfillWrapFlushCallback;\n","export default {\n  Document_createElement: window.Document.prototype.createElement,\n  Document_createElementNS: window.Document.prototype.createElementNS,\n  Document_importNode: window.Document.prototype.importNode,\n  Document_prepend: window.Document.prototype['prepend'],\n  Document_append: window.Document.prototype['append'],\n  Node_cloneNode: window.Node.prototype.cloneNode,\n  Node_appendChild: window.Node.prototype.appendChild,\n  Node_insertBefore: window.Node.prototype.insertBefore,\n  Node_removeChild: window.Node.prototype.removeChild,\n  Node_replaceChild: window.Node.prototype.replaceChild,\n  Node_textContent: Object.getOwnPropertyDescriptor(window.Node.prototype, 'textContent'),\n  Element_attachShadow: window.Element.prototype['attachShadow'],\n  Element_innerHTML: Object.getOwnPropertyDescriptor(window.Element.prototype, 'innerHTML'),\n  Element_getAttribute: window.Element.prototype.getAttribute,\n  Element_setAttribute: window.Element.prototype.setAttribute,\n  Element_removeAttribute: window.Element.prototype.removeAttribute,\n  Element_getAttributeNS: window.Element.prototype.getAttributeNS,\n  Element_setAttributeNS: window.Element.prototype.setAttributeNS,\n  Element_removeAttributeNS: window.Element.prototype.removeAttributeNS,\n  Element_insertAdjacentElement: window.Element.prototype['insertAdjacentElement'],\n  Element_prepend: window.Element.prototype['prepend'],\n  Element_append: window.Element.prototype['append'],\n  Element_before: window.Element.prototype['before'],\n  Element_after: window.Element.prototype['after'],\n  Element_replaceWith: window.Element.prototype['replaceWith'],\n  Element_remove: window.Element.prototype['remove'],\n  HTMLElement: window.HTMLElement,\n  HTMLElement_innerHTML: Object.getOwnPropertyDescriptor(window.HTMLElement.prototype, 'innerHTML'),\n  HTMLElement_insertAdjacentElement: window.HTMLElement.prototype['insertAdjacentElement'],\n};\n","/**\n * This class exists only to work around Closure's lack of a way to describe\n * singletons. It represents the 'already constructed marker' used in custom\n * element construction stacks.\n *\n * https://html.spec.whatwg.org/#concept-already-constructed-marker\n */\nclass AlreadyConstructedMarker {}\n\nexport default new AlreadyConstructedMarker();\n","import Native from './Native.js';\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport CEState from '../CustomElementState.js';\nimport AlreadyConstructedMarker from '../AlreadyConstructedMarker.js';\n\n/**\n * @param {!CustomElementInternals} internals\n */\nexport default function(internals) {\n  window['HTMLElement'] = (function() {\n    /**\n     * @type {function(new: HTMLElement): !HTMLElement}\n     */\n    function HTMLElement() {\n      // This should really be `new.target` but `new.target` can't be emulated\n      // in ES5. Assuming the user keeps the default value of the constructor's\n      // prototype's `constructor` property, this is equivalent.\n      /** @type {!Function} */\n      const constructor = this.constructor;\n\n      const definition = internals.constructorToDefinition(constructor);\n      if (!definition) {\n        throw new Error('The custom element being constructed was not registered with `customElements`.');\n      }\n\n      const constructionStack = definition.constructionStack;\n\n      if (constructionStack.length === 0) {\n        const element = Native.Document_createElement.call(document, definition.localName);\n        Object.setPrototypeOf(element, constructor.prototype);\n        element.__CE_state = CEState.custom;\n        element.__CE_definition = definition;\n        internals.patch(element);\n        return element;\n      }\n\n      const lastIndex = constructionStack.length - 1;\n      const element = constructionStack[lastIndex];\n      if (element === AlreadyConstructedMarker) {\n        throw new Error('The HTMLElement constructor was either called reentrantly for this constructor or called multiple times.');\n      }\n      constructionStack[lastIndex] = AlreadyConstructedMarker;\n\n      Object.setPrototypeOf(element, constructor.prototype);\n      internals.patch(/** @type {!HTMLElement} */ (element));\n\n      return element;\n    }\n\n    HTMLElement.prototype = Native.HTMLElement.prototype;\n\n    return HTMLElement;\n  })();\n};\n","import CustomElementInternals from '../../CustomElementInternals.js';\nimport * as Utilities from '../../Utilities.js';\n\n/**\n * @typedef {{\n *   prepend: !function(...(!Node|string)),\n  *  append: !function(...(!Node|string)),\n * }}\n */\nlet ParentNodeNativeMethods;\n\n/**\n * @param {!CustomElementInternals} internals\n * @param {!Object} destination\n * @param {!ParentNodeNativeMethods} builtIn\n */\nexport default function(internals, destination, builtIn) {\n  /**\n   * @param {...(!Node|string)} nodes\n   */\n  destination['prepend'] = function(...nodes) {\n    // TODO: Fix this for when one of `nodes` is a DocumentFragment!\n    const connectedBefore = /** @type {!Array<!Node>} */ (nodes.filter(node => {\n      // DocumentFragments are not connected and will not be added to the list.\n      return node instanceof Node && Utilities.isConnected(node);\n    }));\n\n    builtIn.prepend.apply(this, nodes);\n\n    for (let i = 0; i < connectedBefore.length; i++) {\n      internals.disconnectTree(connectedBefore[i]);\n    }\n\n    if (Utilities.isConnected(this)) {\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n        if (node instanceof Element) {\n          internals.connectTree(node);\n        }\n      }\n    }\n  };\n\n  /**\n   * @param {...(!Node|string)} nodes\n   */\n  destination['append'] = function(...nodes) {\n    // TODO: Fix this for when one of `nodes` is a DocumentFragment!\n    const connectedBefore = /** @type {!Array<!Node>} */ (nodes.filter(node => {\n      // DocumentFragments are not connected and will not be added to the list.\n      return node instanceof Node && Utilities.isConnected(node);\n    }));\n\n    builtIn.append.apply(this, nodes);\n\n    for (let i = 0; i < connectedBefore.length; i++) {\n      internals.disconnectTree(connectedBefore[i]);\n    }\n\n    if (Utilities.isConnected(this)) {\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n        if (node instanceof Element) {\n          internals.connectTree(node);\n        }\n      }\n    }\n  };\n};\n","import Native from './Native.js';\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport * as Utilities from '../Utilities.js';\n\nimport PatchParentNode from './Interface/ParentNode.js';\n\n/**\n * @param {!CustomElementInternals} internals\n */\nexport default function(internals) {\n  Utilities.setPropertyUnchecked(Document.prototype, 'createElement',\n    /**\n     * @this {Document}\n     * @param {string} localName\n     * @return {!Element}\n     */\n    function(localName) {\n      // Only create custom elements if this document is associated with the registry.\n      if (this.__CE_hasRegistry) {\n        const definition = internals.localNameToDefinition(localName);\n        if (definition) {\n          return new (definition.constructor)();\n        }\n      }\n\n      const result = /** @type {!Element} */\n        (Native.Document_createElement.call(this, localName));\n      internals.patch(result);\n      return result;\n    });\n\n  Utilities.setPropertyUnchecked(Document.prototype, 'importNode',\n    /**\n     * @this {Document}\n     * @param {!Node} node\n     * @param {boolean=} deep\n     * @return {!Node}\n     */\n    function(node, deep) {\n      const clone = Native.Document_importNode.call(this, node, deep);\n      // Only create custom elements if this document is associated with the registry.\n      if (!this.__CE_hasRegistry) {\n        internals.patchTree(clone);\n      } else {\n        internals.patchAndUpgradeTree(clone);\n      }\n      return clone;\n    });\n\n  const NS_HTML = \"http://www.w3.org/1999/xhtml\";\n\n  Utilities.setPropertyUnchecked(Document.prototype, 'createElementNS',\n    /**\n     * @this {Document}\n     * @param {?string} namespace\n     * @param {string} localName\n     * @return {!Element}\n     */\n    function(namespace, localName) {\n      // Only create custom elements if this document is associated with the registry.\n      if (this.__CE_hasRegistry && (namespace === null || namespace === NS_HTML)) {\n        const definition = internals.localNameToDefinition(localName);\n        if (definition) {\n          return new (definition.constructor)();\n        }\n      }\n\n      const result = /** @type {!Element} */\n        (Native.Document_createElementNS.call(this, namespace, localName));\n      internals.patch(result);\n      return result;\n    });\n\n  PatchParentNode(internals, Document.prototype, {\n    prepend: Native.Document_prepend,\n    append: Native.Document_append,\n  });\n};\n","import Native from './Native.js';\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport * as Utilities from '../Utilities.js';\n\n/**\n * @param {!CustomElementInternals} internals\n */\nexport default function(internals) {\n  // `Node#nodeValue` is implemented on `Attr`.\n  // `Node#textContent` is implemented on `Attr`, `Element`.\n\n  Utilities.setPropertyUnchecked(Node.prototype, 'insertBefore',\n    /**\n     * @this {Node}\n     * @param {!Node} node\n     * @param {?Node} refNode\n     * @return {!Node}\n     */\n    function(node, refNode) {\n      if (node instanceof DocumentFragment) {\n        const insertedNodes = Array.prototype.slice.apply(node.childNodes);\n        const nativeResult = Native.Node_insertBefore.call(this, node, refNode);\n\n        // DocumentFragments can't be connected, so `disconnectTree` will never\n        // need to be called on a DocumentFragment's children after inserting it.\n\n        if (Utilities.isConnected(this)) {\n          for (let i = 0; i < insertedNodes.length; i++) {\n            internals.connectTree(insertedNodes[i]);\n          }\n        }\n\n        return nativeResult;\n      }\n\n      const nodeWasConnected = Utilities.isConnected(node);\n      const nativeResult = Native.Node_insertBefore.call(this, node, refNode);\n\n      if (nodeWasConnected) {\n        internals.disconnectTree(node);\n      }\n\n      if (Utilities.isConnected(this)) {\n        internals.connectTree(node);\n      }\n\n      return nativeResult;\n    });\n\n  Utilities.setPropertyUnchecked(Node.prototype, 'appendChild',\n    /**\n     * @this {Node}\n     * @param {!Node} node\n     * @return {!Node}\n     */\n    function(node) {\n      if (node instanceof DocumentFragment) {\n        const insertedNodes = Array.prototype.slice.apply(node.childNodes);\n        const nativeResult = Native.Node_appendChild.call(this, node);\n\n        // DocumentFragments can't be connected, so `disconnectTree` will never\n        // need to be called on a DocumentFragment's children after inserting it.\n\n        if (Utilities.isConnected(this)) {\n          for (let i = 0; i < insertedNodes.length; i++) {\n            internals.connectTree(insertedNodes[i]);\n          }\n        }\n\n        return nativeResult;\n      }\n\n      const nodeWasConnected = Utilities.isConnected(node);\n      const nativeResult = Native.Node_appendChild.call(this, node);\n\n      if (nodeWasConnected) {\n        internals.disconnectTree(node);\n      }\n\n      if (Utilities.isConnected(this)) {\n        internals.connectTree(node);\n      }\n\n      return nativeResult;\n    });\n\n  Utilities.setPropertyUnchecked(Node.prototype, 'cloneNode',\n    /**\n     * @this {Node}\n     * @param {boolean=} deep\n     * @return {!Node}\n     */\n    function(deep) {\n      const clone = Native.Node_cloneNode.call(this, deep);\n      // Only create custom elements if this element's owner document is\n      // associated with the registry.\n      if (!this.ownerDocument.__CE_hasRegistry) {\n        internals.patchTree(clone);\n      } else {\n        internals.patchAndUpgradeTree(clone);\n      }\n      return clone;\n    });\n\n  Utilities.setPropertyUnchecked(Node.prototype, 'removeChild',\n    /**\n     * @this {Node}\n     * @param {!Node} node\n     * @return {!Node}\n     */\n    function(node) {\n      const nodeWasConnected = Utilities.isConnected(node);\n      const nativeResult = Native.Node_removeChild.call(this, node);\n\n      if (nodeWasConnected) {\n        internals.disconnectTree(node);\n      }\n\n      return nativeResult;\n    });\n\n  Utilities.setPropertyUnchecked(Node.prototype, 'replaceChild',\n    /**\n     * @this {Node}\n     * @param {!Node} nodeToInsert\n     * @param {!Node} nodeToRemove\n     * @return {!Node}\n     */\n    function(nodeToInsert, nodeToRemove) {\n      if (nodeToInsert instanceof DocumentFragment) {\n        const insertedNodes = Array.prototype.slice.apply(nodeToInsert.childNodes);\n        const nativeResult = Native.Node_replaceChild.call(this, nodeToInsert, nodeToRemove);\n\n        // DocumentFragments can't be connected, so `disconnectTree` will never\n        // need to be called on a DocumentFragment's children after inserting it.\n\n        if (Utilities.isConnected(this)) {\n          internals.disconnectTree(nodeToRemove);\n          for (let i = 0; i < insertedNodes.length; i++) {\n            internals.connectTree(insertedNodes[i]);\n          }\n        }\n\n        return nativeResult;\n      }\n\n      const nodeToInsertWasConnected = Utilities.isConnected(nodeToInsert);\n      const nativeResult = Native.Node_replaceChild.call(this, nodeToInsert, nodeToRemove);\n      const thisIsConnected = Utilities.isConnected(this);\n\n      if (thisIsConnected) {\n        internals.disconnectTree(nodeToRemove);\n      }\n\n      if (nodeToInsertWasConnected) {\n        internals.disconnectTree(nodeToInsert);\n      }\n\n      if (thisIsConnected) {\n        internals.connectTree(nodeToInsert);\n      }\n\n      return nativeResult;\n    });\n\n\n  function patch_textContent(destination, baseDescriptor) {\n    Object.defineProperty(destination, 'textContent', {\n      enumerable: baseDescriptor.enumerable,\n      configurable: true,\n      get: baseDescriptor.get,\n      set: /** @this {Node} */ function(assignedValue) {\n        // If this is a text node then there are no nodes to disconnect.\n        if (this.nodeType === Node.TEXT_NODE) {\n          baseDescriptor.set.call(this, assignedValue);\n          return;\n        }\n\n        let removedNodes = undefined;\n        // Checking for `firstChild` is faster than reading `childNodes.length`\n        // to compare with 0.\n        if (this.firstChild) {\n          // Using `childNodes` is faster than `children`, even though we only\n          // care about elements.\n          const childNodes = this.childNodes;\n          const childNodesLength = childNodes.length;\n          if (childNodesLength > 0 && Utilities.isConnected(this)) {\n            // Copying an array by iterating is faster than using slice.\n            removedNodes = new Array(childNodesLength);\n            for (let i = 0; i < childNodesLength; i++) {\n              removedNodes[i] = childNodes[i];\n            }\n          }\n        }\n\n        baseDescriptor.set.call(this, assignedValue);\n\n        if (removedNodes) {\n          for (let i = 0; i < removedNodes.length; i++) {\n            internals.disconnectTree(removedNodes[i]);\n          }\n        }\n      },\n    });\n  }\n\n  if (Native.Node_textContent && Native.Node_textContent.get) {\n    patch_textContent(Node.prototype, Native.Node_textContent);\n  } else {\n    internals.addPatch(function(element) {\n      patch_textContent(element, {\n        enumerable: true,\n        configurable: true,\n        // NOTE: This implementation of the `textContent` getter assumes that\n        // text nodes' `textContent` getter will not be patched.\n        get: /** @this {Node} */ function() {\n          /** @type {!Array<string>} */\n          const parts = [];\n\n          for (let i = 0; i < this.childNodes.length; i++) {\n            parts.push(this.childNodes[i].textContent);\n          }\n\n          return parts.join('');\n        },\n        set: /** @this {Node} */ function(assignedValue) {\n          while (this.firstChild) {\n            Native.Node_removeChild.call(this, this.firstChild);\n          }\n          Native.Node_appendChild.call(this, document.createTextNode(assignedValue));\n        },\n      });\n    });\n  }\n};\n","import CustomElementInternals from '../../CustomElementInternals.js';\nimport * as Utilities from '../../Utilities.js';\n\n/**\n * @typedef {{\n *   before: !function(...(!Node|string)),\n *   after: !function(...(!Node|string)),\n *   replaceWith: !function(...(!Node|string)),\n *   remove: !function(),\n * }}\n */\nlet ChildNodeNativeMethods;\n\n/**\n * @param {!CustomElementInternals} internals\n * @param {!Object} destination\n * @param {!ChildNodeNativeMethods} builtIn\n */\nexport default function(internals, destination, builtIn) {\n  /**\n   * @param {...(!Node|string)} nodes\n   */\n  destination['before'] = function(...nodes) {\n    // TODO: Fix this for when one of `nodes` is a DocumentFragment!\n    const connectedBefore = /** @type {!Array<!Node>} */ (nodes.filter(node => {\n      // DocumentFragments are not connected and will not be added to the list.\n      return node instanceof Node && Utilities.isConnected(node);\n    }));\n\n    builtIn.before.apply(this, nodes);\n\n    for (let i = 0; i < connectedBefore.length; i++) {\n      internals.disconnectTree(connectedBefore[i]);\n    }\n\n    if (Utilities.isConnected(this)) {\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n        if (node instanceof Element) {\n          internals.connectTree(node);\n        }\n      }\n    }\n  };\n\n  /**\n   * @param {...(!Node|string)} nodes\n   */\n  destination['after'] = function(...nodes) {\n    // TODO: Fix this for when one of `nodes` is a DocumentFragment!\n    const connectedBefore = /** @type {!Array<!Node>} */ (nodes.filter(node => {\n      // DocumentFragments are not connected and will not be added to the list.\n      return node instanceof Node && Utilities.isConnected(node);\n    }));\n\n    builtIn.after.apply(this, nodes);\n\n    for (let i = 0; i < connectedBefore.length; i++) {\n      internals.disconnectTree(connectedBefore[i]);\n    }\n\n    if (Utilities.isConnected(this)) {\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n        if (node instanceof Element) {\n          internals.connectTree(node);\n        }\n      }\n    }\n  };\n\n  /**\n   * @param {...(!Node|string)} nodes\n   */\n  destination['replaceWith'] = function(...nodes) {\n    // TODO: Fix this for when one of `nodes` is a DocumentFragment!\n    const connectedBefore = /** @type {!Array<!Node>} */ (nodes.filter(node => {\n      // DocumentFragments are not connected and will not be added to the list.\n      return node instanceof Node && Utilities.isConnected(node);\n    }));\n\n    const wasConnected = Utilities.isConnected(this);\n\n    builtIn.replaceWith.apply(this, nodes);\n\n    for (let i = 0; i < connectedBefore.length; i++) {\n      internals.disconnectTree(connectedBefore[i]);\n    }\n\n    if (wasConnected) {\n      internals.disconnectTree(this);\n      for (let i = 0; i < nodes.length; i++) {\n        const node = nodes[i];\n        if (node instanceof Element) {\n          internals.connectTree(node);\n        }\n      }\n    }\n  };\n\n  destination['remove'] = function() {\n    const wasConnected = Utilities.isConnected(this);\n\n    builtIn.remove.call(this);\n\n    if (wasConnected) {\n      internals.disconnectTree(this);\n    }\n  };\n};\n","import Native from './Native.js';\nimport CustomElementInternals from '../CustomElementInternals.js';\nimport CEState from '../CustomElementState.js';\nimport * as Utilities from '../Utilities.js';\n\nimport PatchParentNode from './Interface/ParentNode.js';\nimport PatchChildNode from './Interface/ChildNode.js';\n\n/**\n * @param {!CustomElementInternals} internals\n */\nexport default function(internals) {\n  if (Native.Element_attachShadow) {\n    Utilities.setPropertyUnchecked(Element.prototype, 'attachShadow',\n      /**\n       * @this {Element}\n       * @param {!{mode: string}} init\n       * @return {ShadowRoot}\n       */\n      function(init) {\n        const shadowRoot = Native.Element_attachShadow.call(this, init);\n        this.__CE_shadowRoot = shadowRoot;\n        return shadowRoot;\n      });\n  } else {\n    console.warn('Custom Elements: `Element#attachShadow` was not patched.');\n  }\n\n\n  function patch_innerHTML(destination, baseDescriptor) {\n    Object.defineProperty(destination, 'innerHTML', {\n      enumerable: baseDescriptor.enumerable,\n      configurable: true,\n      get: baseDescriptor.get,\n      set: /** @this {Element} */ function(htmlString) {\n        const isConnected = Utilities.isConnected(this);\n\n        // NOTE: In IE11, when using the native `innerHTML` setter, all nodes\n        // that were previously descendants of the context element have all of\n        // their children removed as part of the set - the entire subtree is\n        // 'disassembled'. This work around walks the subtree *before* using the\n        // native setter.\n        /** @type {!Array<!Element>|undefined} */\n        let removedElements = undefined;\n        if (isConnected) {\n          removedElements = [];\n          Utilities.walkDeepDescendantElements(this, element => {\n            if (element !== this) {\n              removedElements.push(element);\n            }\n          });\n        }\n\n        baseDescriptor.set.call(this, htmlString);\n\n        if (removedElements) {\n          for (let i = 0; i < removedElements.length; i++) {\n            const element = removedElements[i];\n            if (element.__CE_state === CEState.custom) {\n              internals.disconnectedCallback(element);\n            }\n          }\n        }\n\n        // Only create custom elements if this element's owner document is\n        // associated with the registry.\n        if (!this.ownerDocument.__CE_hasRegistry) {\n          internals.patchTree(this);\n        } else {\n          internals.patchAndUpgradeTree(this);\n        }\n        return htmlString;\n      },\n    });\n  }\n\n  if (Native.Element_innerHTML && Native.Element_innerHTML.get) {\n    patch_innerHTML(Element.prototype, Native.Element_innerHTML);\n  } else if (Native.HTMLElement_innerHTML && Native.HTMLElement_innerHTML.get) {\n    patch_innerHTML(HTMLElement.prototype, Native.HTMLElement_innerHTML);\n  } else {\n\n    /** @type {HTMLDivElement} */\n    const rawDiv = Native.Document_createElement.call(document, 'div');\n\n    internals.addPatch(function(element) {\n      patch_innerHTML(element, {\n        enumerable: true,\n        configurable: true,\n        // Implements getting `innerHTML` by performing an unpatched `cloneNode`\n        // of the element and returning the resulting element's `innerHTML`.\n        // TODO: Is this too expensive?\n        get: /** @this {Element} */ function() {\n          return Native.Node_cloneNode.call(this, true).innerHTML;\n        },\n        // Implements setting `innerHTML` by creating an unpatched element,\n        // setting `innerHTML` of that element and replacing the target\n        // element's children with those of the unpatched element.\n        set: /** @this {Element} */ function(assignedValue) {\n          // NOTE: re-route to `content` for `template` elements.\n          // We need to do this because `template.appendChild` does not\n          // route into `template.content`.\n          /** @type {!Node} */\n          const content = this.localName === 'template' ? (/** @type {!HTMLTemplateElement} */ (this)).content : this;\n          rawDiv.innerHTML = assignedValue;\n\n          while (content.childNodes.length > 0) {\n            Native.Node_removeChild.call(content, content.childNodes[0]);\n          }\n          while (rawDiv.childNodes.length > 0) {\n            Native.Node_appendChild.call(content, rawDiv.childNodes[0]);\n          }\n        },\n      });\n    });\n  }\n\n\n  Utilities.setPropertyUnchecked(Element.prototype, 'setAttribute',\n    /**\n     * @this {Element}\n     * @param {string} name\n     * @param {string} newValue\n     */\n    function(name, newValue) {\n      // Fast path for non-custom elements.\n      if (this.__CE_state !== CEState.custom) {\n        return Native.Element_setAttribute.call(this, name, newValue);\n      }\n\n      const oldValue = Native.Element_getAttribute.call(this, name);\n      Native.Element_setAttribute.call(this, name, newValue);\n      newValue = Native.Element_getAttribute.call(this, name);\n      internals.attributeChangedCallback(this, name, oldValue, newValue, null);\n    });\n\n  Utilities.setPropertyUnchecked(Element.prototype, 'setAttributeNS',\n    /**\n     * @this {Element}\n     * @param {?string} namespace\n     * @param {string} name\n     * @param {string} newValue\n     */\n    function(namespace, name, newValue) {\n      // Fast path for non-custom elements.\n      if (this.__CE_state !== CEState.custom) {\n        return Native.Element_setAttributeNS.call(this, namespace, name, newValue);\n      }\n\n      const oldValue = Native.Element_getAttributeNS.call(this, namespace, name);\n      Native.Element_setAttributeNS.call(this, namespace, name, newValue);\n      newValue = Native.Element_getAttributeNS.call(this, namespace, name);\n      internals.attributeChangedCallback(this, name, oldValue, newValue, namespace);\n    });\n\n  Utilities.setPropertyUnchecked(Element.prototype, 'removeAttribute',\n    /**\n     * @this {Element}\n     * @param {string} name\n     */\n    function(name) {\n      // Fast path for non-custom elements.\n      if (this.__CE_state !== CEState.custom) {\n        return Native.Element_removeAttribute.call(this, name);\n      }\n\n      const oldValue = Native.Element_getAttribute.call(this, name);\n      Native.Element_removeAttribute.call(this, name);\n      if (oldValue !== null) {\n        internals.attributeChangedCallback(this, name, oldValue, null, null);\n      }\n    });\n\n  Utilities.setPropertyUnchecked(Element.prototype, 'removeAttributeNS',\n    /**\n     * @this {Element}\n     * @param {?string} namespace\n     * @param {string} name\n     */\n    function(namespace, name) {\n      // Fast path for non-custom elements.\n      if (this.__CE_state !== CEState.custom) {\n        return Native.Element_removeAttributeNS.call(this, namespace, name);\n      }\n\n      const oldValue = Native.Element_getAttributeNS.call(this, namespace, name);\n      Native.Element_removeAttributeNS.call(this, namespace, name);\n      // In older browsers, `Element#getAttributeNS` may return the empty string\n      // instead of null if the attribute does not exist. For details, see;\n      // https://developer.mozilla.org/en-US/docs/Web/API/Element/getAttributeNS#Notes\n      const newValue = Native.Element_getAttributeNS.call(this, namespace, name);\n      if (oldValue !== newValue) {\n        internals.attributeChangedCallback(this, name, oldValue, newValue, namespace);\n      }\n    });\n\n\n  function patch_insertAdjacentElement(destination, baseMethod) {\n    Utilities.setPropertyUnchecked(destination, 'insertAdjacentElement',\n      /**\n       * @this {Element}\n       * @param {string} where\n       * @param {!Element} element\n       * @return {?Element}\n       */\n      function(where, element) {\n        const wasConnected = Utilities.isConnected(element);\n        const insertedElement = /** @type {!Element} */\n          (baseMethod.call(this, where, element));\n\n        if (wasConnected) {\n          internals.disconnectTree(element);\n        }\n\n        if (Utilities.isConnected(insertedElement)) {\n          internals.connectTree(element);\n        }\n        return insertedElement;\n      });\n  }\n\n  if (Native.HTMLElement_insertAdjacentElement) {\n    patch_insertAdjacentElement(HTMLElement.prototype, Native.HTMLElement_insertAdjacentElement);\n  } else if (Native.Element_insertAdjacentElement) {\n    patch_insertAdjacentElement(Element.prototype, Native.Element_insertAdjacentElement);\n  } else {\n    console.warn('Custom Elements: `Element#insertAdjacentElement` was not patched.');\n  }\n\n\n  PatchParentNode(internals, Element.prototype, {\n    prepend: Native.Element_prepend,\n    append: Native.Element_append,\n  });\n\n  PatchChildNode(internals, Element.prototype, {\n    before: Native.Element_before,\n    after: Native.Element_after,\n    replaceWith: Native.Element_replaceWith,\n    remove: Native.Element_remove,\n  });\n};\n","/**\n * @license\n * Copyright (c) 2016 The Polymer Project Authors. All rights reserved.\n * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt\n * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt\n * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt\n * Code distributed by Google as part of the polymer project is also\n * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt\n */\n\nimport CustomElementInternals from './CustomElementInternals.js';\nimport CustomElementRegistry from './CustomElementRegistry.js';\n\nimport PatchHTMLElement from './Patch/HTMLElement.js';\nimport PatchDocument from './Patch/Document.js';\nimport PatchNode from './Patch/Node.js';\nimport PatchElement from './Patch/Element.js';\n\nconst priorCustomElements = window['customElements'];\n\nif (!priorCustomElements ||\n     priorCustomElements['forcePolyfill'] ||\n     (typeof priorCustomElements['define'] != 'function') ||\n     (typeof priorCustomElements['get'] != 'function')) {\n  /** @type {!CustomElementInternals} */\n  const internals = new CustomElementInternals();\n\n  PatchHTMLElement(internals);\n  PatchDocument(internals);\n  PatchNode(internals);\n  PatchElement(internals);\n\n  // The main document is always associated with the registry.\n  document.__CE_hasRegistry = true;\n\n  /** @type {!CustomElementRegistry} */\n  const customElements = new CustomElementRegistry(internals);\n\n  Object.defineProperty(window, 'customElements', {\n    configurable: true,\n    enumerable: true,\n    value: customElements,\n  });\n}\n","export default (typeof global !== \"undefined\" ? global :\n            typeof self !== \"undefined\" ? self :\n            typeof window !== \"undefined\" ? window : {});\n","// shim for using process in browser\n// based off https://github.com/defunctzombie/node-process/blob/master/browser.js\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\nvar cachedSetTimeout = defaultSetTimout;\nvar cachedClearTimeout = defaultClearTimeout;\nif (typeof global.setTimeout === 'function') {\n    cachedSetTimeout = setTimeout;\n}\nif (typeof global.clearTimeout === 'function') {\n    cachedClearTimeout = clearTimeout;\n}\n\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\nexport function nextTick(fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n}\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nexport var title = 'browser';\nexport var platform = 'browser';\nexport var browser = true;\nexport var env = {};\nexport var argv = [];\nexport var version = ''; // empty string to avoid regexp issues\nexport var versions = {};\nexport var release = {};\nexport var config = {};\n\nfunction noop() {}\n\nexport var on = noop;\nexport var addListener = noop;\nexport var once = noop;\nexport var off = noop;\nexport var removeListener = noop;\nexport var removeAllListeners = noop;\nexport var emit = noop;\n\nexport function binding(name) {\n    throw new Error('process.binding is not supported');\n}\n\nexport function cwd () { return '/' }\nexport function chdir (dir) {\n    throw new Error('process.chdir is not supported');\n};\nexport function umask() { return 0; }\n\n// from https://github.com/kumavis/browser-process-hrtime/blob/master/index.js\nvar performance = global.performance || {}\nvar performanceNow =\n  performance.now        ||\n  performance.mozNow     ||\n  performance.msNow      ||\n  performance.oNow       ||\n  performance.webkitNow  ||\n  function(){ return (new Date()).getTime() }\n\n// generate timestamp or delta\n// see http://nodejs.org/api/process.html#process_process_hrtime\nexport function hrtime(previousTimestamp){\n  var clocktime = performanceNow.call(performance)*1e-3\n  var seconds = Math.floor(clocktime)\n  var nanoseconds = Math.floor((clocktime%1)*1e9)\n  if (previousTimestamp) {\n    seconds = seconds - previousTimestamp[0]\n    nanoseconds = nanoseconds - previousTimestamp[1]\n    if (nanoseconds<0) {\n      seconds--\n      nanoseconds += 1e9\n    }\n  }\n  return [seconds,nanoseconds]\n}\n\nvar startTime = new Date();\nexport function uptime() {\n  var currentTime = new Date();\n  var dif = currentTime - startTime;\n  return dif / 1000;\n}\n\nexport default {\n  nextTick: nextTick,\n  title: title,\n  browser: browser,\n  env: env,\n  argv: argv,\n  version: version,\n  versions: versions,\n  on: on,\n  addListener: addListener,\n  once: once,\n  off: off,\n  removeListener: removeListener,\n  removeAllListeners: removeAllListeners,\n  emit: emit,\n  binding: binding,\n  cwd: cwd,\n  chdir: chdir,\n  umask: umask,\n  hrtime: hrtime,\n  platform: platform,\n  release: release,\n  config: config,\n  uptime: uptime\n};\n","/*\nCopyright (c) 2012 Barnesandnoble.com, llc, Donavon West, and Domenic Denicola\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n\"Software\"), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\nNONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\nLIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\nOF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\nWITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n*/\n(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var setImmediate;\n\n    function addFromSetImmediateArguments(args) {\n        tasksByHandle[nextHandle] = partiallyApplied.apply(undefined, args);\n        return nextHandle++;\n    }\n\n    // This function accepts the same arguments as setImmediate, but\n    // returns a function that requires no arguments.\n    function partiallyApplied(handler) {\n        var args = [].slice.call(arguments, 1);\n        return function() {\n            if (typeof handler === \"function\") {\n                handler.apply(undefined, args);\n            } else {\n                (new Function(\"\" + handler))();\n            }\n        };\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(partiallyApplied(runIfPresent, handle), 0);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    task();\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function installNextTickImplementation() {\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            process.nextTick(partiallyApplied(runIfPresent, handle));\n            return handle;\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            global.postMessage(messagePrefix + handle, \"*\");\n            return handle;\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            channel.port2.postMessage(handle);\n            return handle;\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n            return handle;\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        setImmediate = function() {\n            var handle = addFromSetImmediateArguments(arguments);\n            setTimeout(partiallyApplied(runIfPresent, handle), 0);\n            return handle;\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(self));\n","// Caution:\n// Do not replace this import statement with codes.\n//\n// If you replace this import statement with codes,\n// the codes will be executed after the following polyfills are imported\n// because import statements are hoisted during compilation.\nimport './polyfill-switches';\n\n// Polyfill ECMAScript standard features with global namespace pollution\n// import 'core-js/fn/object/set-prototype-of';\n//import 'core-js/fn/set';\n//import 'core-js/fn/map';\n\n// Polyfill Custom Elements v1 with global namespace pollution\nimport '@onsenui/custom-elements/src/custom-elements';\n\n// Polyfill MutationObserver with global namespace pollution\n//import './MutationObserver@0.7.22/MutationObserver.js';\n\n// Polyfill setImmediate with global namespace pollution\nimport './setImmediate@1.0.2+mod/setImmediate.js';\n",";(function () {\n\t'use strict';\n\n\t/**\n\t * @preserve FastClick: polyfill to remove click delays on browsers with touch UIs.\n\t *\n\t * @codingstandard ftlabs-jsv2\n\t * @copyright The Financial Times Limited [All Rights Reserved]\n\t * @license MIT License (see LICENSE.txt)\n\t */\n\n\t/*jslint browser:true, node:true*/\n\t/*global define, Event, Node*/\n\n\n\t/**\n\t * Instantiate fast-clicking listeners on the specified layer.\n\t *\n\t * @constructor\n\t * @param {Element} layer The layer to listen on\n\t * @param {Object} [options={}] The options to override the defaults\n\t */\n\tfunction FastClick(layer, options) {\n\t\tvar oldOnClick;\n\n\t\toptions = options || {};\n\n\t\t/**\n\t\t * Whether a click is currently being tracked.\n\t\t *\n\t\t * @type boolean\n\t\t */\n\t\tthis.trackingClick = false;\n\n\n\t\t/**\n\t\t * Timestamp for when click tracking started.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.trackingClickStart = 0;\n\n\n\t\t/**\n\t\t * The element being tracked for a click.\n\t\t *\n\t\t * @type EventTarget\n\t\t */\n\t\tthis.targetElement = null;\n\n\n\t\t/**\n\t\t * X-coordinate of touch start event.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.touchStartX = 0;\n\n\n\t\t/**\n\t\t * Y-coordinate of touch start event.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.touchStartY = 0;\n\n\n\t\t/**\n\t\t * ID of the last touch, retrieved from Touch.identifier.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.lastTouchIdentifier = 0;\n\n\n\t\t/**\n\t\t * Touchmove boundary, beyond which a click will be cancelled.\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.touchBoundary = options.touchBoundary || 10;\n\n\n\t\t/**\n\t\t * The FastClick layer.\n\t\t *\n\t\t * @type Element\n\t\t */\n\t\tthis.layer = layer;\n\n\t\t/**\n\t\t * The minimum time between tap(touchstart and touchend) events\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.tapDelay = options.tapDelay || 200;\n\n\t\t/**\n\t\t * The maximum time for a tap\n\t\t *\n\t\t * @type number\n\t\t */\n\t\tthis.tapTimeout = options.tapTimeout || 700;\n\n\t\tif (FastClick.notNeeded(layer)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Some old versions of Android don't have Function.prototype.bind\n\t\tfunction bind(method, context) {\n\t\t\treturn function() { return method.apply(context, arguments); };\n\t\t}\n\n\n\t\tvar methods = ['onMouse', 'onClick', 'onTouchStart', 'onTouchMove', 'onTouchEnd', 'onTouchCancel'];\n\t\tvar context = this;\n\t\tfor (var i = 0, l = methods.length; i < l; i++) {\n\t\t\tcontext[methods[i]] = bind(context[methods[i]], context);\n\t\t}\n\n\t\t// Set up event handlers as required\n\t\tif (deviceIsAndroid) {\n\t\t\tlayer.addEventListener('mouseover', this.onMouse, true);\n\t\t\tlayer.addEventListener('mousedown', this.onMouse, true);\n\t\t\tlayer.addEventListener('mouseup', this.onMouse, true);\n\t\t}\n\n\t\tlayer.addEventListener('click', this.onClick, true);\n\t\tlayer.addEventListener('touchstart', this.onTouchStart, false);\n\t\tlayer.addEventListener('touchmove', this.onTouchMove, false);\n\t\tlayer.addEventListener('touchend', this.onTouchEnd, false);\n\t\tlayer.addEventListener('touchcancel', this.onTouchCancel, false);\n\n\t\t// Hack is required for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\n\t\t// which is how FastClick normally stops click events bubbling to callbacks registered on the FastClick\n\t\t// layer when they are cancelled.\n\t\tif (!Event.prototype.stopImmediatePropagation) {\n\t\t\tlayer.removeEventListener = function(type, callback, capture) {\n\t\t\t\tvar rmv = Node.prototype.removeEventListener;\n\t\t\t\tif (type === 'click') {\n\t\t\t\t\trmv.call(layer, type, callback.hijacked || callback, capture);\n\t\t\t\t} else {\n\t\t\t\t\trmv.call(layer, type, callback, capture);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tlayer.addEventListener = function(type, callback, capture) {\n\t\t\t\tvar adv = Node.prototype.addEventListener;\n\t\t\t\tif (type === 'click') {\n\t\t\t\t\tadv.call(layer, type, callback.hijacked || (callback.hijacked = function(event) {\n\t\t\t\t\t\tif (!event.propagationStopped) {\n\t\t\t\t\t\t\tcallback(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}), capture);\n\t\t\t\t} else {\n\t\t\t\t\tadv.call(layer, type, callback, capture);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t// If a handler is already declared in the element's onclick attribute, it will be fired before\n\t\t// FastClick's onClick handler. Fix this by pulling out the user-defined handler function and\n\t\t// adding it as listener.\n\t\tif (typeof layer.onclick === 'function') {\n\n\t\t\t// Android browser on at least 3.2 requires a new reference to the function in layer.onclick\n\t\t\t// - the old one won't work if passed to addEventListener directly.\n\t\t\toldOnClick = layer.onclick;\n\t\t\tlayer.addEventListener('click', function(event) {\n\t\t\t\toldOnClick(event);\n\t\t\t}, false);\n\t\t\tlayer.onclick = null;\n\t\t}\n\t}\n\n\t/**\n\t* Windows Phone 8.1 fakes user agent string to look like Android and iPhone.\n\t*\n\t* @type boolean\n\t*/\n\tvar deviceIsWindowsPhone = navigator.userAgent.indexOf(\"Windows Phone\") >= 0;\n\n\t/**\n\t * Android requires exceptions.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsAndroid = navigator.userAgent.indexOf('Android') > 0 && !deviceIsWindowsPhone;\n\n\n\t/**\n\t * iOS requires exceptions.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsIOS = /iP(ad|hone|od)/.test(navigator.userAgent) && !deviceIsWindowsPhone;\n\n\n\t/**\n\t * iOS 4 requires an exception for select elements.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsIOS4 = deviceIsIOS && (/OS 4_\\d(_\\d)?/).test(navigator.userAgent);\n\n\n\t/**\n\t * iOS 6.0-7.* requires the target element to be manually derived\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsIOSWithBadTarget = deviceIsIOS && (/OS [6-7]_\\d/).test(navigator.userAgent);\n\n\t/**\n\t * BlackBerry requires exceptions.\n\t *\n\t * @type boolean\n\t */\n\tvar deviceIsBlackBerry10 = navigator.userAgent.indexOf('BB10') > 0;\n\n\t/**\n\t * Determine whether a given element requires a native click.\n\t *\n\t * @param {EventTarget|Element} target Target DOM element\n\t * @returns {boolean} Returns true if the element needs a native click\n\t */\n\tFastClick.prototype.needsClick = function(target) {\n\t\tswitch (target.nodeName.toLowerCase()) {\n\n\t\t// Don't send a synthetic click to disabled inputs (issue #62)\n\t\tcase 'button':\n\t\tcase 'select':\n\t\tcase 'textarea':\n\t\t\tif (target.disabled) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'input':\n\n\t\t\t// File inputs need real clicks on iOS 6 due to a browser bug (issue #68)\n\t\t\tif ((deviceIsIOS && target.type === 'file') || target.disabled) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tbreak;\n\t\tcase 'label':\n\t\tcase 'iframe': // iOS8 homescreen apps can prevent events bubbling into frames\n\t\tcase 'video':\n\t\t\treturn true;\n\t\t}\n\n\t\treturn (/\\bneedsclick\\b/).test(target.className);\n\t};\n\n\n\t/**\n\t * Determine whether a given element requires a call to focus to simulate click into element.\n\t *\n\t * @param {EventTarget|Element} target Target DOM element\n\t * @returns {boolean} Returns true if the element requires a call to focus to simulate native click.\n\t */\n\tFastClick.prototype.needsFocus = function(target) {\n\t\tswitch (target.nodeName.toLowerCase()) {\n\t\tcase 'textarea':\n\t\t\treturn true;\n\t\tcase 'select':\n\t\t\treturn !deviceIsAndroid;\n\t\tcase 'input':\n\t\t\tswitch (target.type) {\n\t\t\tcase 'button':\n\t\t\tcase 'checkbox':\n\t\t\tcase 'file':\n\t\t\tcase 'image':\n\t\t\tcase 'radio':\n\t\t\tcase 'submit':\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// No point in attempting to focus disabled inputs\n\t\t\treturn !target.disabled && !target.readOnly;\n\t\tdefault:\n\t\t\treturn (/\\bneedsfocus\\b/).test(target.className);\n\t\t}\n\t};\n\n\n\t/**\n\t * Send a click event to the specified element.\n\t *\n\t * @param {EventTarget|Element} targetElement\n\t * @param {Event} event\n\t */\n\tFastClick.prototype.sendClick = function(targetElement, event) {\n\t\tvar clickEvent, touch;\n\n\t\t// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect (#24)\n\t\tif (document.activeElement && document.activeElement !== targetElement) {\n\t\t\tdocument.activeElement.blur();\n\t\t}\n\n\t\ttouch = event.changedTouches[0];\n\n\t\t// Synthesize a click event, with an extra attribute so it can be tracked\n\t\tclickEvent = document.createEvent('MouseEvents');\n\t\tclickEvent.initMouseEvent(this.determineEventType(targetElement), true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\n\t\tclickEvent.forwardedTouchEvent = true;\n\t\ttargetElement.dispatchEvent(clickEvent);\n\t};\n\n\tFastClick.prototype.determineEventType = function(targetElement) {\n\n\t\t//Issue #159: Android Chrome Select Box does not open with a synthetic click event\n\t\tif (deviceIsAndroid && targetElement.tagName.toLowerCase() === 'select') {\n\t\t\treturn 'mousedown';\n\t\t}\n\n\t\treturn 'click';\n\t};\n\n\n\t/**\n\t * @param {EventTarget|Element} targetElement\n\t */\n\tFastClick.prototype.focus = function(targetElement) {\n\t\tvar length;\n\n\t\t// Issue #160: on iOS 7, some input elements (e.g. date datetime month) throw a vague TypeError on setSelectionRange. These elements don't have an integer value for the selectionStart and selectionEnd properties, but unfortunately that can't be used for detection because accessing the properties also throws a TypeError. Just check the type instead. Filed as Apple bug #15122724.\n\t\tif (deviceIsIOS && targetElement.setSelectionRange && targetElement.type.indexOf('date') !== 0 && targetElement.type !== 'time' && targetElement.type !== 'month') {\n\t\t\tlength = targetElement.value.length;\n\t\t\ttargetElement.setSelectionRange(length, length);\n\t\t} else {\n\t\t\ttargetElement.focus();\n\t\t}\n\t};\n\n\n\t/**\n\t * Check whether the given target element is a child of a scrollable layer and if so, set a flag on it.\n\t *\n\t * @param {EventTarget|Element} targetElement\n\t */\n\tFastClick.prototype.updateScrollParent = function(targetElement) {\n\t\tvar scrollParent, parentElement;\n\n\t\tscrollParent = targetElement.fastClickScrollParent;\n\n\t\t// Attempt to discover whether the target element is contained within a scrollable layer. Re-check if the\n\t\t// target element was moved to another parent.\n\t\tif (!scrollParent || !scrollParent.contains(targetElement)) {\n\t\t\tparentElement = targetElement;\n\t\t\tdo {\n\t\t\t\tif (parentElement.scrollHeight > parentElement.offsetHeight) {\n\t\t\t\t\tscrollParent = parentElement;\n\t\t\t\t\ttargetElement.fastClickScrollParent = parentElement;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tparentElement = parentElement.parentElement;\n\t\t\t} while (parentElement);\n\t\t}\n\n\t\t// Always update the scroll top tracker if possible.\n\t\tif (scrollParent) {\n\t\t\tscrollParent.fastClickLastScrollTop = scrollParent.scrollTop;\n\t\t}\n\t};\n\n\n\t/**\n\t * @param {EventTarget} targetElement\n\t * @returns {Element|EventTarget}\n\t */\n\tFastClick.prototype.getTargetElementFromEventTarget = function(eventTarget) {\n\n\t\t// On some older browsers (notably Safari on iOS 4.1 - see issue #56) the event target may be a text node.\n\t\tif (eventTarget.nodeType === Node.TEXT_NODE) {\n\t\t\treturn eventTarget.parentNode;\n\t\t}\n\n\t\treturn eventTarget;\n\t};\n\n\n\t/**\n\t * On touch start, record the position and scroll offset.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onTouchStart = function(event) {\n\t\tvar targetElement, touch, selection;\n\n\t\t// Ignore multiple touches, otherwise pinch-to-zoom is prevented if both fingers are on the FastClick element (issue #111).\n\t\tif (event.targetTouches.length > 1) {\n\t\t\treturn true;\n\t\t}\n\n\t\ttargetElement = this.getTargetElementFromEventTarget(event.target);\n\t\ttouch = event.targetTouches[0];\n\n\t\t// Ignore touches on contenteditable elements to prevent conflict with text selection.\n\t\t// (For details: https://github.com/ftlabs/fastclick/pull/211 )\n\t\tif (targetElement.isContentEditable) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (deviceIsIOS) {\n\n\t\t\t// Only trusted events will deselect text on iOS (issue #49)\n\t\t\tselection = window.getSelection();\n\t\t\tif (selection.rangeCount && !selection.isCollapsed) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (!deviceIsIOS4) {\n\n\t\t\t\t// Weird things happen on iOS when an alert or confirm dialog is opened from a click event callback (issue #23):\n\t\t\t\t// when the user next taps anywhere else on the page, new touchstart and touchend events are dispatched\n\t\t\t\t// with the same identifier as the touch event that previously triggered the click that triggered the alert.\n\t\t\t\t// Sadly, there is an issue on iOS 4 that causes some normal touch events to have the same identifier as an\n\t\t\t\t// immediately preceding touch event (issue #52), so this fix is unavailable on that platform.\n\t\t\t\t// Issue 120: touch.identifier is 0 when Chrome dev tools 'Emulate touch events' is set with an iOS device UA string,\n\t\t\t\t// which causes all touch events to be ignored. As this block only applies to iOS, and iOS identifiers are always long,\n\t\t\t\t// random integers, it's safe to to continue if the identifier is 0 here.\n\t\t\t\tif (touch.identifier && touch.identifier === this.lastTouchIdentifier) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.lastTouchIdentifier = touch.identifier;\n\n\t\t\t\t// If the target element is a child of a scrollable layer (using -webkit-overflow-scrolling: touch) and:\n\t\t\t\t// 1) the user does a fling scroll on the scrollable layer\n\t\t\t\t// 2) the user stops the fling scroll with another tap\n\t\t\t\t// then the event.target of the last 'touchend' event will be the element that was under the user's finger\n\t\t\t\t// when the fling scroll was started, causing FastClick to send a click event to that layer - unless a check\n\t\t\t\t// is made to ensure that a parent layer was not scrolled before sending a synthetic click (issue #42).\n\t\t\t\tthis.updateScrollParent(targetElement);\n\t\t\t}\n\t\t}\n\n\t\tthis.trackingClick = true;\n\t\tthis.trackingClickStart = event.timeStamp;\n\t\tthis.targetElement = targetElement;\n\n\t\tthis.touchStartX = touch.pageX;\n\t\tthis.touchStartY = touch.pageY;\n\n\t\t// Prevent phantom clicks on fast double-tap (issue #36)\n\t\tif ((event.timeStamp - this.lastClickTime) < this.tapDelay && (event.timeStamp - this.lastClickTime) > -1) {\n\t\t\tevent.preventDefault();\n\t\t}\n\n\t\treturn true;\n\t};\n\n\n\t/**\n\t * Based on a touchmove event object, check whether the touch has moved past a boundary since it started.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.touchHasMoved = function(event) {\n\t\tvar touch = event.changedTouches[0], boundary = this.touchBoundary;\n\n\t\tif (Math.abs(touch.pageX - this.touchStartX) > boundary || Math.abs(touch.pageY - this.touchStartY) > boundary) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\n\t/**\n\t * Update the last position.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onTouchMove = function(event) {\n\t\tif (!this.trackingClick) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// If the touch has moved, cancel the click tracking\n\t\tif (this.targetElement !== this.getTargetElementFromEventTarget(event.target) || this.touchHasMoved(event)) {\n\t\t\tthis.trackingClick = false;\n\t\t\tthis.targetElement = null;\n\t\t}\n\n\t\treturn true;\n\t};\n\n\n\t/**\n\t * Attempt to find the labelled control for the given label element.\n\t *\n\t * @param {EventTarget|HTMLLabelElement} labelElement\n\t * @returns {Element|null}\n\t */\n\tFastClick.prototype.findControl = function(labelElement) {\n\n\t\t// Fast path for newer browsers supporting the HTML5 control attribute\n\t\tif (labelElement.control !== undefined) {\n\t\t\treturn labelElement.control;\n\t\t}\n\n\t\t// All browsers under test that support touch events also support the HTML5 htmlFor attribute\n\t\tif (labelElement.htmlFor) {\n\t\t\treturn document.getElementById(labelElement.htmlFor);\n\t\t}\n\n\t\t// If no for attribute exists, attempt to retrieve the first labellable descendant element\n\t\t// the list of which is defined here: http://www.w3.org/TR/html5/forms.html#category-label\n\t\treturn labelElement.querySelector('button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea');\n\t};\n\n\n\t/**\n\t * On touch end, determine whether to send a click event at once.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onTouchEnd = function(event) {\n\t\tvar forElement, trackingClickStart, targetTagName, scrollParent, touch, targetElement = this.targetElement;\n\n\t\tif (!this.trackingClick) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Prevent phantom clicks on fast double-tap (issue #36)\n\t\tif ((event.timeStamp - this.lastClickTime) < this.tapDelay && (event.timeStamp - this.lastClickTime) > -1) {\n\t\t\tthis.cancelNextClick = true;\n\t\t\treturn true;\n\t\t}\n\n\t\tif ((event.timeStamp - this.trackingClickStart) > this.tapTimeout) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Reset to prevent wrong click cancel on input (issue #156).\n\t\tthis.cancelNextClick = false;\n\n\t\tthis.lastClickTime = event.timeStamp;\n\n\t\ttrackingClickStart = this.trackingClickStart;\n\t\tthis.trackingClick = false;\n\t\tthis.trackingClickStart = 0;\n\n\t\t// On some iOS devices, the targetElement supplied with the event is invalid if the layer\n\t\t// is performing a transition or scroll, and has to be re-detected manually. Note that\n\t\t// for this to function correctly, it must be called *after* the event target is checked!\n\t\t// See issue #57; also filed as rdar://13048589 .\n\t\tif (deviceIsIOSWithBadTarget) {\n\t\t\ttouch = event.changedTouches[0];\n\n\t\t\t// In certain cases arguments of elementFromPoint can be negative, so prevent setting targetElement to null\n\t\t\ttargetElement = document.elementFromPoint(touch.pageX - window.pageXOffset, touch.pageY - window.pageYOffset) || targetElement;\n\t\t\ttargetElement.fastClickScrollParent = this.targetElement.fastClickScrollParent;\n\t\t}\n\n\t\ttargetTagName = targetElement.tagName.toLowerCase();\n\t\tif (targetTagName === 'label') {\n\t\t\tforElement = this.findControl(targetElement);\n\t\t\tif (forElement) {\n\t\t\t\tthis.focus(targetElement);\n\t\t\t\tif (deviceIsAndroid) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\ttargetElement = forElement;\n\t\t\t}\n\t\t} else if (this.needsFocus(targetElement)) {\n\n\t\t\t// Case 1: If the touch started a while ago (best guess is 100ms based on tests for issue #36) then focus will be triggered anyway. Return early and unset the target element reference so that the subsequent click will be allowed through.\n\t\t\t// Case 2: Without this exception for input elements tapped when the document is contained in an iframe, then any inputted text won't be visible even though the value attribute is updated as the user types (issue #37).\n\t\t\tif ((event.timeStamp - trackingClickStart) > 100 || (deviceIsIOS && window.top !== window && targetTagName === 'input')) {\n\t\t\t\tthis.targetElement = null;\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.focus(targetElement);\n\t\t\tthis.sendClick(targetElement, event);\n\n\t\t\t// Select elements need the event to go through on iOS 4, otherwise the selector menu won't open.\n\t\t\t// Also this breaks opening selects when VoiceOver is active on iOS6, iOS7 (and possibly others)\n\t\t\tif (!deviceIsIOS || targetTagName !== 'select') {\n\t\t\t\tthis.targetElement = null;\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tif (deviceIsIOS && !deviceIsIOS4) {\n\n\t\t\t// Don't send a synthetic click event if the target element is contained within a parent layer that was scrolled\n\t\t\t// and this tap is being used to stop the scrolling (usually initiated by a fling - issue #42).\n\t\t\tscrollParent = targetElement.fastClickScrollParent;\n\t\t\tif (scrollParent && scrollParent.fastClickLastScrollTop !== scrollParent.scrollTop) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Prevent the actual click from going though - unless the target node is marked as requiring\n\t\t// real clicks or if it is in the whitelist in which case only non-programmatic clicks are permitted.\n\t\tif (!this.needsClick(targetElement)) {\n\t\t\tevent.preventDefault();\n\t\t\tthis.sendClick(targetElement, event);\n\t\t}\n\n\t\treturn false;\n\t};\n\n\n\t/**\n\t * On touch cancel, stop tracking the click.\n\t *\n\t * @returns {void}\n\t */\n\tFastClick.prototype.onTouchCancel = function() {\n\t\tthis.trackingClick = false;\n\t\tthis.targetElement = null;\n\t};\n\n\n\t/**\n\t * Determine mouse events which should be permitted.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onMouse = function(event) {\n\n\t\t// If a target element was never set (because a touch event was never fired) allow the event\n\t\tif (!this.targetElement) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (event.forwardedTouchEvent) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Programmatically generated events targeting a specific element should be permitted\n\t\tif (!event.cancelable) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Derive and check the target element to see whether the mouse event needs to be permitted;\n\t\t// unless explicitly enabled, prevent non-touch click events from triggering actions,\n\t\t// to prevent ghost/doubleclicks.\n\t\tif (!this.needsClick(this.targetElement) || this.cancelNextClick) {\n\n\t\t\t// Prevent any user-added listeners declared on FastClick element from being fired.\n\t\t\tif (event.stopImmediatePropagation) {\n\t\t\t\tevent.stopImmediatePropagation();\n\t\t\t} else {\n\n\t\t\t\t// Part of the hack for browsers that don't support Event#stopImmediatePropagation (e.g. Android 2)\n\t\t\t\tevent.propagationStopped = true;\n\t\t\t}\n\n\t\t\t// Cancel the event\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// If the mouse event is permitted, return true for the action to go through.\n\t\treturn true;\n\t};\n\n\n\t/**\n\t * On actual clicks, determine whether this is a touch-generated click, a click action occurring\n\t * naturally after a delay after a touch (which needs to be cancelled to avoid duplication), or\n\t * an actual click which should be permitted.\n\t *\n\t * @param {Event} event\n\t * @returns {boolean}\n\t */\n\tFastClick.prototype.onClick = function(event) {\n\t\tvar permitted;\n\n\t\t// It's possible for another FastClick-like library delivered with third-party code to fire a click event before FastClick does (issue #44). In that case, set the click-tracking flag back to false and return early. This will cause onTouchEnd to return early.\n\t\tif (this.trackingClick) {\n\t\t\tthis.targetElement = null;\n\t\t\tthis.trackingClick = false;\n\t\t\treturn true;\n\t\t}\n\n\t\t// Very odd behavior on iOS (issue #18): if a submit element is present inside a form and the user hits enter in the iOS simulator or clicks the Go button on the pop-up OS keyboard the a kind of 'fake' click event will be triggered with the submit-type input element as the target.\n\t\tif (event.target.type === 'submit' && event.detail === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tpermitted = this.onMouse(event);\n\n\t\t// Only unset targetElement if the click is not permitted. This will ensure that the check for !targetElement in onMouse fails and the browser's click doesn't go through.\n\t\tif (!permitted) {\n\t\t\tthis.targetElement = null;\n\t\t}\n\n\t\t// If clicks are permitted, return true for the action to go through.\n\t\treturn permitted;\n\t};\n\n\n\t/**\n\t * Remove all FastClick's event listeners.\n\t *\n\t * @returns {void}\n\t */\n\tFastClick.prototype.destroy = function() {\n\t\tvar layer = this.layer;\n\n\t\tif (deviceIsAndroid) {\n\t\t\tlayer.removeEventListener('mouseover', this.onMouse, true);\n\t\t\tlayer.removeEventListener('mousedown', this.onMouse, true);\n\t\t\tlayer.removeEventListener('mouseup', this.onMouse, true);\n\t\t}\n\n\t\tlayer.removeEventListener('click', this.onClick, true);\n\t\tlayer.removeEventListener('touchstart', this.onTouchStart, false);\n\t\tlayer.removeEventListener('touchmove', this.onTouchMove, false);\n\t\tlayer.removeEventListener('touchend', this.onTouchEnd, false);\n\t\tlayer.removeEventListener('touchcancel', this.onTouchCancel, false);\n\t};\n\n\n\t/**\n\t * Check whether FastClick is needed.\n\t *\n\t * @param {Element} layer The layer to listen on\n\t */\n\tFastClick.notNeeded = function(layer) {\n\t\tvar metaViewport;\n\t\tvar chromeVersion;\n\t\tvar blackberryVersion;\n\t\tvar firefoxVersion;\n\n\t\t// Devices that don't support touch don't need FastClick\n\t\tif (typeof window.ontouchstart === 'undefined') {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Chrome version - zero for other browsers\n\t\tchromeVersion = +(/Chrome\\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];\n\n\t\tif (chromeVersion) {\n\n\t\t\tif (deviceIsAndroid) {\n\t\t\t\tmetaViewport = document.querySelector('meta[name=viewport]');\n\n\t\t\t\tif (metaViewport) {\n\t\t\t\t\t// Chrome on Android with user-scalable=\"no\" doesn't need FastClick (issue #89)\n\t\t\t\t\tif (metaViewport.content.indexOf('user-scalable=no') !== -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// Chrome 32 and above with width=device-width or less don't need FastClick\n\t\t\t\t\tif (chromeVersion > 31 && document.documentElement.scrollWidth <= window.outerWidth) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// Chrome desktop doesn't need FastClick (issue #15)\n\t\t\t} else {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (deviceIsBlackBerry10) {\n\t\t\tblackberryVersion = navigator.userAgent.match(/Version\\/([0-9]*)\\.([0-9]*)/);\n\n\t\t\t// BlackBerry 10.3+ does not require Fastclick library.\n\t\t\t// https://github.com/ftlabs/fastclick/issues/251\n\t\t\tif (blackberryVersion[1] >= 10 && blackberryVersion[2] >= 3) {\n\t\t\t\tmetaViewport = document.querySelector('meta[name=viewport]');\n\n\t\t\t\tif (metaViewport) {\n\t\t\t\t\t// user-scalable=no eliminates click delay.\n\t\t\t\t\tif (metaViewport.content.indexOf('user-scalable=no') !== -1) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\t// width=device-width (or less than device-width) eliminates click delay.\n\t\t\t\t\tif (document.documentElement.scrollWidth <= window.outerWidth) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// IE10 with -ms-touch-action: none or manipulation, which disables double-tap-to-zoom (issue #97)\n\t\tif (layer.style.msTouchAction === 'none' || layer.style.touchAction === 'manipulation') {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Firefox version - zero for other browsers\n\t\tfirefoxVersion = +(/Firefox\\/([0-9]+)/.exec(navigator.userAgent) || [,0])[1];\n\n\t\tif (firefoxVersion >= 27) {\n\t\t\t// Firefox 27+ does not have tap delay if the content is not zoomable - https://bugzilla.mozilla.org/show_bug.cgi?id=922896\n\n\t\t\tmetaViewport = document.querySelector('meta[name=viewport]');\n\t\t\tif (metaViewport && (metaViewport.content.indexOf('user-scalable=no') !== -1 || document.documentElement.scrollWidth <= window.outerWidth)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// IE11: prefixed -ms-touch-action is no longer supported and it's recommended to use non-prefixed version\n\t\t// http://msdn.microsoft.com/en-us/library/windows/apps/Hh767313.aspx\n\t\tif (layer.style.touchAction === 'none' || layer.style.touchAction === 'manipulation') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t};\n\n\n\t/**\n\t * Factory method for creating a FastClick object\n\t *\n\t * @param {Element} layer The layer to listen on\n\t * @param {Object} [options={}] The options to override the defaults\n\t */\n\tFastClick.attach = function(layer, options) {\n\t\treturn new FastClick(layer, options);\n\t};\n\n  window.FastClick = FastClick;\n}());\n","/**\n * MicroEvent - to make any js object an event emitter (server or browser)\n * \n * - pure javascript - server compatible, browser compatible\n * - dont rely on the browser doms\n * - super simple - you get it immediately, no mystery, no magic involved\n *\n * - create a MicroEventDebug with goodies to debug\n *   - make it safer to use\n*/\n\n/** NOTE: This library is customized for Onsen UI. */\n\nvar MicroEvent  = function(){};\nMicroEvent.prototype  = {\n  on  : function(event, fct){\n    this._events = this._events || {};\n    this._events[event] = this._events[event] || [];\n    this._events[event].push(fct);\n  },\n  once : function(event, fct){\n    var self = this;\n    var wrapper = function() {\n      self.off(event, wrapper);\n      return fct.apply(null, arguments);\n    };\n    this.on(event, wrapper);\n  },\n  off  : function(event, fct){\n    this._events = this._events || {};\n    if( event in this._events === false  )  return;\n\n    this._events[event] = this._events[event]\n      .filter(function(_fct) {\n        if (fct) {\n           return fct !== _fct;\n        }\n        else {\n          return false;\n        }\n      });\n  },\n  emit : function(event /* , args... */){\n    this._events = this._events || {};\n    if( event in this._events === false  )  return;\n    for(var i = 0; i < this._events[event].length; i++){\n      this._events[event][i].apply(this, Array.prototype.slice.call(arguments, 1));\n    }\n  }\n};\n\n/**\n * mixin will delegate all MicroEvent.js function in the destination object\n *\n * - require('MicroEvent').mixin(Foobar) will make Foobar able to use MicroEvent\n *\n * @param {Object} the object which will support MicroEvent\n*/\nMicroEvent.mixin  = function(destObject){\n  var props = ['on', 'once', 'off', 'emit'];\n  for(var i = 0; i < props.length; i ++){\n    if( typeof destObject === 'function' ){\n      destObject.prototype[props[i]]  = MicroEvent.prototype[props[i]];\n    }else{\n      destObject[props[i]] = MicroEvent.prototype[props[i]];\n    }\n  }\n}\n\n// export in common js\nif( typeof module !== \"undefined\" && ('exports' in module)){\n  module.exports  = MicroEvent;\n}\n\nwindow.MicroEvent = MicroEvent;\n","(function() {\n    function Viewport() {\n\n        this.PRE_IOS7_VIEWPORT = \"initial-scale=1, maximum-scale=1, user-scalable=no\";\n        this.IOS7_VIEWPORT = \"initial-scale=1, maximum-scale=1, user-scalable=no\";\n        this.DEFAULT_VIEWPORT = \"initial-scale=1, maximum-scale=1, user-scalable=no\";\n\n        this.ensureViewportElement();\n        this.platform = {};\n        this.platform.name = this.getPlatformName();\n        this.platform.version = this.getPlatformVersion();\n\n        return this;\n    };\n\n    Viewport.prototype.ensureViewportElement = function(){\n        this.viewportElement = document.querySelector('meta[name=viewport]');\n        if(!this.viewportElement){\n            this.viewportElement = document.createElement('meta');\n            this.viewportElement.name = \"viewport\";\n            document.head.appendChild(this.viewportElement);\n        }\n    },\n\n    Viewport.prototype.setup = function() {\n        if (!this.viewportElement) {\n            return;\n        }\n\n        if (this.viewportElement.getAttribute('data-no-adjust') == \"true\") {\n            return;\n        }\n\n        if (!this.viewportElement.getAttribute('content')) {\n            if (this.platform.name == 'ios') {\n                if (this.platform.version >= 7 && isWebView()) {\n                    this.viewportElement.setAttribute('content', this.IOS7_VIEWPORT);\n                } else {\n                    this.viewportElement.setAttribute('content', this.PRE_IOS7_VIEWPORT);\n                }\n            } else {\n                this.viewportElement.setAttribute('content', this.DEFAULT_VIEWPORT);\n            }\n        }\n\n        function isWebView() {\n            return !!(window.cordova || window.phonegap || window.PhoneGap);\n        }\n    };\n\n    Viewport.prototype.getPlatformName = function() {\n        if (navigator.userAgent.match(/Android/i)) {\n            return \"android\";\n        }\n\n        if (navigator.userAgent.match(/iPhone|iPad|iPod/i)) {\n            return \"ios\";\n        }\n\n        // unknown\n        return undefined;\n    };\n\n    Viewport.prototype.getPlatformVersion = function() {\n        var start = window.navigator.userAgent.indexOf('OS ');\n        return window.Number(window.navigator.userAgent.substr(start + 3, 3).replace('_', '.'));\n    };\n\n    window.Viewport = Viewport;\n})();\n","// Load non-polyfill libraries\nimport './FastClick@1.0.6+mod/fastclick.js';\nimport './microevent.js@47cbc14+mod/microevent.js';\nimport './viewport.js';\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\n/**\n * @object ons.platform\n * @category util\n * @description\n *   [en]Utility methods to detect current platform.[/en]\n *   [ja][/ja]\n */\nclass Platform {\n\n  /**\n   * All elements will be rendered as if the app was running on this platform.\n   * @type {String}\n   */\n  constructor() {\n    this._renderPlatform = null;\n  }\n\n  /**\n   * @method select\n   * @signature select(platform)\n   * @param  {string} platform Name of the platform.\n   *   [en]Possible values are: \"opera\", \"firefox\", \"safari\", \"chrome\", \"ie\", \"android\", \"blackberry\", \"ios\" or \"wp\".[/en]\n   *   [ja]\"opera\", \"firefox\", \"safari\", \"chrome\", \"ie\", \"android\", \"blackberry\", \"ios\", \"wp\"[/ja]\n   * @description\n   *   [en]Sets the platform used to render the elements. Useful for testing.[/en]\n   *   [ja][/ja]\n   */\n  select(platform) {\n    if (typeof platform === 'string') {\n      this._renderPlatform = platform.trim().toLowerCase();\n    }\n  }\n\n  /**\n   * @method isWebView\n   * @signature isWebView()\n   * @description\n   *   [en]Returns whether app is running in Cordova.[/en]\n   *   [ja]Cordova[/ja]\n   * @return {Boolean}\n   */\n  isWebView() {\n    if (document.readyState === 'loading' || document.readyState == 'uninitialized') {\n      throw new Error('isWebView() method is available after dom contents loaded.');\n    }\n\n    return !!(window.cordova || window.phonegap || window.PhoneGap);\n  }\n\n  /**\n   * @method isIOS\n   * @signature isIOS()\n   * @description\n   *   [en]Returns whether the OS is iOS.[/en]\n   *   [ja]iOS[/ja]\n   * @return {Boolean}\n   */\n  isIOS() {\n    if (this._renderPlatform) {\n      return this._renderPlatform === 'ios';\n    } else if (typeof device === 'object' && !/browser/i.test(device.platform)) {\n      return /iOS/i.test(device.platform);\n    } else {\n      return /iPhone|iPad|iPod/i.test(navigator.userAgent);\n    }\n  }\n\n  /**\n   * @method isAndroid\n   * @signature isAndroid()\n   * @description\n   *   [en]Returns whether the OS is Android.[/en]\n   *   [ja]Android[/ja]\n   * @return {Boolean}\n   */\n  isAndroid() {\n    if (this._renderPlatform) {\n      return this._renderPlatform === 'android';\n    } else if (typeof device === 'object' && !/browser/i.test(device.platform)) {\n      return /Android/i.test(device.platform);\n    } else {\n      return /Android/i.test(navigator.userAgent);\n    }\n  }\n\n  /**\n   * @method isAndroidPhone\n   * @signature isAndroidPhone()\n   * @description\n   *   [en]Returns whether the device is Android phone.[/en]\n   *   [ja]Android[/ja]\n   * @return {Boolean}\n   */\n  isAndroidPhone() {\n    return /Android/i.test(navigator.userAgent) && /Mobile/i.test(navigator.userAgent);\n  }\n\n  /**\n   * @method isAndroidTablet\n   * @signature isAndroidTablet()\n   * @description\n   *   [en]Returns whether the device is Android tablet.[/en]\n   *   [ja]Android[/ja]\n   * @return {Boolean}\n   */\n  isAndroidTablet() {\n    return /Android/i.test(navigator.userAgent) && !/Mobile/i.test(navigator.userAgent);\n  }\n\n  /**\n   * @return {Boolean}\n   */\n  isWP() {\n    if (this._renderPlatform) {\n      return this._renderPlatform === 'wp';\n    } else if (typeof device === 'object' && !/browser/i.test(device.platform)) {\n      return /Win32NT|WinCE/i.test(device.platform);\n    } else {\n      return /Windows Phone|IEMobile|WPDesktop/i.test(navigator.userAgent);\n    }\n  }\n\n  /**\n   * @methos isIPhone\n   * @signature isIPhone()\n   * @description\n   *   [en]Returns whether the device is iPhone.[/en]\n   *   [ja]iPhone[/ja]\n   * @return {Boolean}\n   */\n  isIPhone() {\n    return /iPhone/i.test(navigator.userAgent);\n  }\n\n  /**\n   * @method isIPad\n   * @signature isIPad()\n   * @description\n   *   [en]Returns whether the device is iPad.[/en]\n   *   [ja]iPad[/ja]\n   * @return {Boolean}\n   */\n  isIPad() {\n    return /iPad/i.test(navigator.userAgent);\n  }\n\n  /**\n   * @return {Boolean}\n   */\n  isIPod() {\n    return /iPod/i.test(navigator.userAgent);\n  }\n\n  /**\n   * @method isBlackBerry\n   * @signature isBlackBerry()\n   * @description\n   *   [en]Returns whether the device is BlackBerry.[/en]\n   *   [ja]BlackBerry[/ja]\n   * @return {Boolean}\n   */\n  isBlackBerry() {\n    if (this._renderPlatform) {\n      return this._renderPlatform === 'blackberry';\n    } else if (typeof device === 'object' && !/browser/i.test(device.platform)) {\n      return /BlackBerry/i.test(device.platform);\n    } else {\n      return /BlackBerry|RIM Tablet OS|BB10/i.test(navigator.userAgent);\n    }\n  }\n\n  /**\n   * @method isOpera\n   * @signature isOpera()\n   * @description\n   *   [en]Returns whether the browser is Opera.[/en]\n   *   [ja]Opera[/ja]\n   * @return {Boolean}\n   */\n  isOpera() {\n    if (this._renderPlatform) {\n      return this._renderPlatform === 'opera';\n    } else {\n      return (!!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0);\n    }\n  }\n\n  /**\n   * @method isFirefox\n   * @signature isFirefox()\n   * @description\n   *   [en]Returns whether the browser is Firefox.[/en]\n   *   [ja]Firefox[/ja]\n   * @return {Boolean}\n   */\n  isFirefox() {\n    if (this._renderPlatform) {\n      return this._renderPlatform === 'firefox';\n    } else {\n      return (typeof InstallTrigger !== 'undefined');\n    }\n  }\n\n  /**\n   * @method isSafari\n   * @signature isSafari()\n   * @description\n   *   [en]Returns whether the browser is Safari.[/en]\n   *   [ja]Safari[/ja]\n   * @return {Boolean}\n   */\n  isSafari() {\n    if (this._renderPlatform) {\n      return this._renderPlatform === 'safari';\n    } else {\n      return (Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0) || (function (p) { return p.toString() === '[object SafariRemoteNotification]' })(!window['safari'] || safari.pushNotification);\n    }\n  }\n\n  /**\n   * @method isChrome\n   * @signature isChrome()\n   * @description\n   *   [en]Returns whether the browser is Chrome.[/en]\n   *   [ja]Chrome[/ja]\n   * @return {Boolean}\n   */\n  isChrome() {\n    if (this._renderPlatform) {\n      return this._renderPlatform === 'chrome';\n    } else {\n      return (!!window.chrome && !(!!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0) && !(navigator.userAgent.indexOf(' Edge/') >= 0));\n    }\n  }\n\n  /**\n   * @method isIE\n   * @signature isIE()\n   * @description\n   *   [en]Returns whether the browser is Internet Explorer.[/en]\n   *   [ja]Internet Explorer[/ja]\n   * @return {Boolean}\n   */\n  isIE() {\n    if (this._renderPlatform) {\n      return this._renderPlatform === 'ie';\n    } else {\n      return false || !!document.documentMode;\n    }\n  }\n\n  /**\n   * @method isEdge\n   * @signature isEdge()\n   * @description\n   *   [en]Returns whether the browser is Edge.[/en]\n   *   [ja]Edge[/ja]\n   * @return {Boolean}\n   */\n  isEdge() {\n    if (this._renderPlatform) {\n      return this._renderPlatform === 'edge';\n    } else {\n      return navigator.userAgent.indexOf(' Edge/') >= 0;\n    }\n  }\n\n  /**\n   * @method isIOS7above\n   * @signature isIOS7above()\n   * @description\n   *   [en]Returns whether the iOS version is 7 or above.[/en]\n   *   [ja]iOS7[/ja]\n   * @return {Boolean}\n   */\n  isIOS7above() {\n    if (typeof device === 'object' && !/browser/i.test(device.platform)) {\n      return (/iOS/i.test(device.platform) && (parseInt(device.version.split('.')[0]) >= 7));\n    } else if(/iPhone|iPad|iPod/i.test(navigator.userAgent)) {\n      const ver = (navigator.userAgent.match(/\\b[0-9]+_[0-9]+(?:_[0-9]+)?\\b/) || [''])[0].replace(/_/g, '.');\n      return (parseInt(ver.split('.')[0]) >= 7);\n    }\n    return false;\n  }\n\n  /**\n   * @return {String}\n   */\n  getMobileOS() {\n    if (this.isAndroid()) {\n      return 'android';\n    }\n    else if (this.isIOS()) {\n      return 'ios';\n    }\n    else if (this.isWP()) {\n      return 'wp';\n    }\n    else {\n      return 'other';\n    }\n  }\n\n  /**\n   * @return {String}\n   */\n  getIOSDevice() {\n    if (this.isIPhone()) {\n      return 'iphone';\n    }\n    else if (this.isIPad()) {\n      return 'ipad';\n    }\n    else if (this.isIPod()) {\n      return 'ipod';\n    }\n    else {\n      return 'na';\n    }\n  }\n}\n\n\nexport default new Platform();\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport platform from './platform';\n\nconst pageAttributeExpression = {\n  _variables: {},\n\n  /**\n   * Define a variable.\n   *\n   * @param {String} name Name of the variable\n   * @param {String|Function} value Value of the variable. Can be a string or a function. The function must return a string.\n   * @param {Boolean} overwrite If this value is false, an error will be thrown when trying to define a variable that has already been defined.\n   */\n  defineVariable: function(name, value, overwrite=false) {\n    if (typeof name !== 'string') {\n      throw new Error('Variable name must be a string.');\n    }\n    else if (typeof value !== 'string' && typeof value !== 'function') {\n      throw new Error('Variable value must be a string or a function.');\n    }\n    else if (this._variables.hasOwnProperty(name) && !overwrite) {\n      throw new Error(`\"${name}\" is already defined.`);\n    }\n    this._variables[name] = value;\n  },\n\n  /**\n   * Get a variable.\n   *\n   * @param {String} name Name of the variable.\n   * @return {String|Function|null}\n   */\n  getVariable: function(name) {\n    if (!this._variables.hasOwnProperty(name)) {\n      return null;\n    }\n\n    return this._variables[name];\n  },\n\n  /**\n   * Remove a variable.\n   *\n   * @param {String} name Name of the varaible.\n   */\n  removeVariable: function(name) {\n    delete this._variables[name];\n  },\n\n  /**\n   * Get all variables.\n   *\n   * @return {Object}\n   */\n  getAllVariables: function() {\n    return this._variables;\n  },\n  _parsePart: function(part) {\n    let c,\n      inInterpolation = false,\n      currentIndex = 0;\n\n    const tokens = [];\n\n    if (part.length === 0) {\n      throw new Error('Unable to parse empty string.');\n    }\n\n    for (let i = 0; i < part.length; i++) {\n      c = part.charAt(i);\n\n      if (c === '$' && part.charAt(i + 1) === '{') {\n        if (inInterpolation) {\n          throw new Error('Nested interpolation not supported.');\n        }\n\n        const token = part.substring(currentIndex, i);\n        if (token.length > 0) {\n          tokens.push(part.substring(currentIndex, i));\n        }\n\n        currentIndex = i;\n        inInterpolation = true;\n      }\n      else if (c === '}') {\n        if (!inInterpolation) {\n          throw new Error('} must be preceeded by ${');\n        }\n\n        const token = part.substring(currentIndex, i + 1);\n        if (token.length > 0) {\n          tokens.push(part.substring(currentIndex, i + 1));\n        }\n\n        currentIndex = i + 1;\n        inInterpolation = false;\n      }\n    }\n\n    if (inInterpolation) {\n      throw new Error('Unterminated interpolation.');\n    }\n\n    tokens.push(part.substring(currentIndex, part.length));\n\n    return tokens;\n  },\n  _replaceToken: function(token) {\n    const re = /^\\${(.*?)}$/,\n      match = token.match(re);\n\n    if (match) {\n      const name = match[1].trim();\n      const variable = this.getVariable(name);\n\n      if (variable === null) {\n        throw new Error(`Variable \"${name}\" does not exist.`);\n      }\n      else if (typeof variable === 'string') {\n        return variable;\n      }\n      else {\n        const rv = variable();\n\n        if (typeof rv !== 'string') {\n          throw new Error('Must return a string.');\n        }\n\n        return rv;\n      }\n    }\n    else {\n      return token;\n    }\n  },\n  _replaceTokens: function(tokens) {\n    return tokens.map(this._replaceToken.bind(this));\n  },\n  _parseExpression: function(expression) {\n    return expression.split(',')\n      .map(\n        function(part) {\n          return part.trim();\n        }\n      )\n      .map(this._parsePart.bind(this))\n      .map(this._replaceTokens.bind(this))\n      .map((part) => part.join(''));\n  },\n\n  /**\n   * Evaluate an expression.\n   *\n   * @param {String} expression An page attribute expression.\n   * @return {Array}\n   */\n  evaluate: function(expression) {\n    if (!expression) {\n      return [];\n    }\n\n    return this._parseExpression(expression);\n  }\n};\n\n// Define default variables.\npageAttributeExpression.defineVariable('mobileOS', platform.getMobileOS());\npageAttributeExpression.defineVariable('iOSDevice', platform.getIOSDevice());\npageAttributeExpression.defineVariable('runtime', () => {\n  return platform.isWebView() ? 'cordova' : 'browser';\n});\n\nexport default pageAttributeExpression;\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\n\n/**\n * Minimal animation library for managing css transition on mobile browsers.\n */\n'use strict';\n\nvar TIMEOUT_RATIO = 1.4;\n\nvar util = {\n};\n\n// capitalize string\nutil.capitalize = function(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n};\n\n/**\n * @param {Object} params\n * @param {String} params.property\n * @param {Float} params.duration\n * @param {String} params.timing\n */\nutil.buildTransitionValue = function(params) {\n  params.property = params.property || 'all';\n  params.duration = params.duration || 0.4;\n  params.timing = params.timing || 'linear';\n\n  var props = params.property.split(/ +/);\n\n  return props.map(function(prop) {\n    return prop + ' ' + params.duration + 's ' + params.timing;\n  }).join(', ');\n};\n\n/**\n * Add an event handler on \"transitionend\" event.\n */\nutil.onceOnTransitionEnd = function(element, callback) {\n  if (!element) {\n    return function() {};\n  }\n\n  var fn = function(event) {\n    if (element == event.target) {\n      event.stopPropagation();\n      removeListeners();\n\n      callback();\n    }\n  };\n\n  var removeListeners = function() {\n    util._transitionEndEvents.forEach(function(eventName) {\n      element.removeEventListener(eventName, fn, false);\n    });\n  };\n\n  util._transitionEndEvents.forEach(function(eventName) {\n    element.addEventListener(eventName, fn, false);\n  });\n\n  return removeListeners;\n};\n\nutil._transitionEndEvents = (function() {\n\n  if ('ontransitionend' in window) {\n    return ['transitionend'];\n  }\n\n  if ('onwebkittransitionend' in window) {\n    return ['webkitTransitionEnd'];\n  }\n\n  if (util.vendorPrefix === 'webkit' || util.vendorPrefix === 'o' || util.vendorPrefix === 'moz' || util.vendorPrefix === 'ms') {\n    return [util.vendorPrefix + 'TransitionEnd', 'transitionend'];\n  }\n\n  return [];\n})();\n\nutil._cssPropertyDict = (function() {\n  var styles = window.getComputedStyle(document.documentElement, '');\n  var dict = {};\n  var a = 'A'.charCodeAt(0);\n  var z = 'z'.charCodeAt(0);\n\n  var upper = function(s) {\n    return s.substr(1).toUpperCase();\n  };\n\n  for (var i = 0; i < styles.length; i++) {\n\n    var key = styles[i]\n    .replace(/^[\\-]+/, '')\n    .replace(/[\\-][a-z]/g, upper)\n    .replace(/^moz/, 'Moz');\n\n    if (a <= key.charCodeAt(0) && z >= key.charCodeAt(0)) {\n      if (key !== 'cssText' && key !== 'parentText') {\n        dict[key] = true;\n      }\n    }\n  }\n\n  return dict;\n})();\n\nutil.hasCssProperty = function(name) {\n  return name in util._cssPropertyDict;\n};\n\n/**\n * Vendor prefix for css property.\n */\nutil.vendorPrefix = (function() {\n  var styles = window.getComputedStyle(document.documentElement, ''),\n    pre = (Array.prototype.slice\n      .call(styles)\n      .join('')\n      .match(/-(moz|webkit|ms)-/) || (styles.OLink === '' && ['', 'o'])\n    )[1];\n    return pre;\n})();\n\nutil.forceLayoutAtOnce = function(elements, callback) {\n  this.batchImmediate(function() {\n    elements.forEach(function(element) {\n      // force layout\n      element.offsetHeight;\n    });\n    callback();\n  });\n};\n\nutil.batchImmediate = (function() {\n  var callbacks = [];\n\n  return function(callback) {\n    if (callbacks.length === 0) {\n      setImmediate(function() {\n        var concreateCallbacks = callbacks.slice(0);\n        callbacks = [];\n        concreateCallbacks.forEach(function(callback) {\n          callback();\n        });\n      });\n    }\n\n    callbacks.push(callback);\n  };\n})();\n\nutil.batchAnimationFrame = (function() {\n  var callbacks = [];\n\n  var raf = window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function(callback) {\n    setTimeout(callback, 1000 / 60);\n  };\n\n  return function(callback) {\n    if (callbacks.length === 0) {\n      raf(function() {\n        var concreateCallbacks = callbacks.slice(0);\n        callbacks = [];\n        concreateCallbacks.forEach(function(callback) {\n          callback();\n        });\n      });\n    }\n\n    callbacks.push(callback);\n  };\n})();\n\nutil.transitionPropertyName = (function() {\n  if (util.hasCssProperty('transitionDuration')) {\n    return 'transition';\n  }\n\n  if (util.hasCssProperty(util.vendorPrefix + 'TransitionDuration')) {\n    return util.vendorPrefix + 'Transition';\n  }\n\n  throw new Error('Invalid state');\n})();\n\n\n/**\n * @param {HTMLElement} element\n */\nvar Animit = function(element) {\n  if (!(this instanceof Animit)) {\n    return new Animit(element);\n  }\n\n  if (element instanceof HTMLElement) {\n    this.elements = [element];\n  } else if (Object.prototype.toString.call(element) === '[object Array]') {\n    this.elements = element;\n\n  } else {\n    throw new Error('First argument must be an array or an instance of HTMLElement.');\n  }\n\n  this.transitionQueue = [];\n  this.lastStyleAttributeDict = [];\n};\n\nAnimit.prototype = {\n\n  /**\n   * @property {Array}\n   */\n  transitionQueue: undefined,\n\n  /**\n   * @property {Array}\n   */\n  elements: undefined,\n\n  /**\n   * Start animation sequence with passed animations.\n   *\n   * @param {Function} callback\n   */\n  play: function(callback) {\n    if (typeof callback === 'function') {\n      this.transitionQueue.push(function(done) {\n        callback();\n        done();\n      });\n    }\n\n    this.startAnimation();\n\n    return this;\n  },\n\n  /**\n   * Queue transition animations or other function.\n   *\n   * e.g. animit(elt).queue({color: 'red'})\n   * e.g. animit(elt).queue({color: 'red'}, {duration: 0.4})\n   * e.g. animit(elt).queue({css: {color: 'red'}, duration: 0.2})\n   *\n   * @param {Object|Animit.Transition|Function} transition\n   * @param {Object} [options]\n   */\n  queue: function(transition, options) {\n    var queue = this.transitionQueue;\n\n    if (transition && options) {\n      options.css = transition;\n      transition = new Animit.Transition(options);\n    }\n\n    if (!(transition instanceof Function || transition instanceof Animit.Transition)) {\n      if (transition.css) {\n        transition = new Animit.Transition(transition);\n      } else {\n        transition = new Animit.Transition({\n          css: transition\n        });\n      }\n    }\n\n    if (transition instanceof Function) {\n      queue.push(transition);\n    } else if (transition instanceof Animit.Transition) {\n      queue.push(transition.build());\n    } else {\n      throw new Error('Invalid arguments');\n    }\n\n    return this;\n  },\n\n  /**\n   * Queue transition animations.\n   *\n   * @param {Float} seconds\n   */\n  wait: function(seconds) {\n    if (seconds > 0) {\n      this.transitionQueue.push(function(done) {\n        setTimeout(done, 1000 * seconds);\n      });\n    }\n\n    return this;\n  },\n\n  saveStyle: function() {\n\n    this.transitionQueue.push(function(done) {\n      this.elements.forEach(function(element, index) {\n        var css = this.lastStyleAttributeDict[index] = {};\n\n        for (var i = 0; i < element.style.length; i++) {\n          css[element.style[i]] = element.style[element.style[i]];\n        }\n      }.bind(this));\n      done();\n    }.bind(this));\n\n    return this;\n  },\n\n  /**\n   * Restore element's style.\n   *\n   * @param {Object} [options]\n   * @param {Float} [options.duration]\n   * @param {String} [options.timing]\n   * @param {String} [options.transition]\n   */\n  restoreStyle: function(options) {\n    options = options || {};\n    var self = this;\n\n    if (options.transition && !options.duration) {\n      throw new Error('\"options.duration\" is required when \"options.transition\" is enabled.');\n    }\n\n    var transitionName = util.transitionPropertyName;\n\n    if (options.transition || (options.duration && options.duration > 0)) {\n      var transitionValue = options.transition || ('all ' + options.duration + 's ' + (options.timing || 'linear'));\n\n      this.transitionQueue.push(function(done) {\n        var elements = this.elements;\n        var timeoutId;\n\n        var clearTransition = function() {\n          elements.forEach(function(element) {\n            element.style[transitionName] = '';\n          });\n        };\n\n        // add \"transitionend\" event handler\n        var removeListeners = util.onceOnTransitionEnd(elements[0], function() {\n          clearTimeout(timeoutId);\n          clearTransition();\n          done();\n        });\n\n        // for fail safe.\n        timeoutId = setTimeout(function() {\n          removeListeners();\n          clearTransition();\n          done();\n        }, options.duration * 1000 * TIMEOUT_RATIO);\n\n        // transition and style settings\n        elements.forEach(function(element, index) {\n\n          var css = self.lastStyleAttributeDict[index];\n\n          if (!css) {\n            throw new Error('restoreStyle(): The style is not saved. Invoke saveStyle() before.');\n          }\n\n          self.lastStyleAttributeDict[index] = undefined;\n\n          var name;\n          for (var i = 0, len = element.style.length; i < len; i++) {\n            name = element.style[i];\n            if (css[name] === undefined) {\n              css[name] = '';\n            }\n          }\n\n          element.style[transitionName] = transitionValue;\n\n          Object.keys(css).forEach(function(key) {\n            if (key !== transitionName) {\n              element.style[key] = css[key];\n            }\n          });\n\n          element.style[transitionName] = transitionValue;\n        });\n      });\n    } else {\n      this.transitionQueue.push(function(done) {\n        reset();\n        done();\n      });\n    }\n\n    return this;\n\n    function reset() {\n      // Clear transition animation settings.\n      self.elements.forEach(function(element, index) {\n        element.style[transitionName] = 'none';\n\n        var css = self.lastStyleAttributeDict[index];\n\n        if (!css) {\n          throw new Error('restoreStyle(): The style is not saved. Invoke saveStyle() before.');\n        }\n\n        self.lastStyleAttributeDict[index] = undefined;\n\n        for (var i = 0, name = ''; i < element.style.length; i++) {\n          name = element.style[i];\n          if (typeof css[element.style[i]] === 'undefined') {\n            css[element.style[i]] = '';\n          }\n        }\n\n        Object.keys(css).forEach(function(key) {\n          element.style[key] = css[key];\n        });\n\n      });\n    }\n  },\n\n  /**\n   * Start animation sequence.\n   */\n  startAnimation: function() {\n    this._dequeueTransition();\n\n    return this;\n  },\n\n  _dequeueTransition: function() {\n    var transition = this.transitionQueue.shift();\n    if (this._currentTransition) {\n      throw new Error('Current transition exists.');\n    }\n    this._currentTransition = transition;\n    var self = this;\n    var called = false;\n\n    var done = function() {\n      if (!called) {\n        called = true;\n        self._currentTransition = undefined;\n        self._dequeueTransition();\n      } else {\n        throw new Error('Invalid state: This callback is called twice.');\n      }\n    };\n\n    if (transition) {\n      transition.call(this, done);\n    }\n  }\n\n};\n\n/**\n * @param {Animit} arguments\n */\nAnimit.runAll = function(/* arguments... */) {\n  for (var i = 0; i < arguments.length; i++) {\n    arguments[i].play();\n  }\n};\n\n\n/**\n * @param {Object} options\n * @param {Float} [options.duration]\n * @param {String} [options.property]\n * @param {String} [options.timing]\n */\nAnimit.Transition = function(options) {\n  this.options = options || {};\n  this.options.duration = this.options.duration || 0;\n  this.options.timing = this.options.timing || 'linear';\n  this.options.css = this.options.css || {};\n  this.options.property = this.options.property || 'all';\n};\n\nAnimit.Transition.prototype = {\n\n  /**\n   * @param {HTMLElement} element\n   * @return {Function}\n   */\n  build: function() {\n\n    if (Object.keys(this.options.css).length === 0) {\n      throw new Error('options.css is required.');\n    }\n\n    var css = createActualCssProps(this.options.css);\n\n    if (this.options.duration > 0) {\n      var transitionValue = util.buildTransitionValue(this.options);\n      var self = this;\n\n      return function(callback) {\n        var elements = this.elements;\n        var timeout = self.options.duration * 1000 * TIMEOUT_RATIO;\n        var timeoutId;\n\n        var removeListeners = util.onceOnTransitionEnd(elements[0], function() {\n          clearTimeout(timeoutId);\n          callback();\n        });\n\n        timeoutId = setTimeout(function() {\n          removeListeners();\n          callback();\n        }, timeout);\n\n        elements.forEach(function(element) {\n          element.style[util.transitionPropertyName] = transitionValue;\n\n          Object.keys(css).forEach(function(name) {\n            element.style[name] = css[name];\n          });\n        });\n\n      };\n    }\n\n    if (this.options.duration <= 0) {\n      return function(callback) {\n        var elements = this.elements;\n\n        elements.forEach(function(element) {\n          element.style[util.transitionPropertyName] = '';\n\n          Object.keys(css).forEach(function(name) {\n            element.style[name] = css[name];\n          });\n        });\n\n        if (elements.length > 0) {\n          util.forceLayoutAtOnce(elements, function() {\n            util.batchAnimationFrame(callback);\n          });\n        } else {\n          util.batchAnimationFrame(callback);\n        }\n      };\n    }\n\n    function createActualCssProps(css) {\n      var result = {};\n\n      Object.keys(css).forEach(function(name) {\n        var value = css[name];\n\n        if (util.hasCssProperty(name)) {\n          result[name] = value;\n          return;\n        }\n\n        var prefixed = util.vendorPrefix + util.capitalize(name);\n        if (util.hasCssProperty(prefixed)) {\n          result[prefixed] = value;\n        } else {\n          result[prefixed] = value;\n          result[name] = value;\n        }\n      });\n\n      return result;\n    }\n\n  }\n};\n\nexport default  Animit;\n\n","/*\n * Gesture detector library that forked from github.com/EightMedia/hammer.js.\n */\n\n'use strict';\n\nvar Event, Utils, Detection, PointerEvent;\n\n/**\n * @object ons.GestureDetector\n * @category gesture\n * @description\n *   [en]Utility class for gesture detection.[/en]\n *   [ja][/ja]\n */\n\n/**\n * @method constructor\n * @signature constructor(element[, options])\n * @description\n *  [en]Create a new GestureDetector instance.[/en]\n *  [ja]GestureDetector[/ja]\n * @param {Element} element\n *   [en]Name of the event.[/en]\n *   [ja]DOM[/ja]\n * @param {Object} [options]\n *   [en]Options object.[/en]\n *   [ja][/ja]\n * @return {ons.GestureDetector.Instance}\n */\nvar GestureDetector = function GestureDetector(element, options) {\n  return new GestureDetector.Instance(element, options || {});\n};\n\n\n/**\n * default settings.\n * more settings are defined per gesture at `/gestures`. Each gesture can be disabled/enabled\n * by setting it's name (like `swipe`) to false.\n * You can set the defaults for all instances by changing this object before creating an instance.\n * @example\n * ````\n *  GestureDetector.defaults.drag = false;\n *  GestureDetector.defaults.behavior.touchAction = 'pan-y';\n *  delete GestureDetector.defaults.behavior.userSelect;\n * ````\n * @property defaults\n * @type {Object}\n */\nGestureDetector.defaults = {\n  behavior: {\n    // userSelect: 'none', // Also disables selection in `input` children\n    touchAction: 'pan-y',\n    touchCallout: 'none',\n    contentZooming: 'none',\n    userDrag: 'none',\n    tapHighlightColor: 'rgba(0,0,0,0)'\n  }\n};\n\n/**\n * GestureDetector document where the base events are added at\n * @property DOCUMENT\n * @type {HTMLElement}\n * @default window.document\n */\nGestureDetector.DOCUMENT = document;\n\n/**\n * detect support for pointer events\n * @property HAS_POINTEREVENTS\n * @type {Boolean}\n */\nGestureDetector.HAS_POINTEREVENTS = navigator.pointerEnabled || navigator.msPointerEnabled;\n\n/**\n * detect support for touch events\n * @property HAS_TOUCHEVENTS\n * @type {Boolean}\n */\nGestureDetector.HAS_TOUCHEVENTS = ('ontouchstart' in window);\n\n/**\n * detect mobile browsers\n * @property IS_MOBILE\n * @type {Boolean}\n */\nGestureDetector.IS_MOBILE = /mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent);\n\n/**\n * detect if we want to support mouseevents at all\n * @property NO_MOUSEEVENTS\n * @type {Boolean}\n */\nGestureDetector.NO_MOUSEEVENTS = (GestureDetector.HAS_TOUCHEVENTS && GestureDetector.IS_MOBILE) || GestureDetector.HAS_POINTEREVENTS;\n\n/**\n * interval in which GestureDetector recalculates current velocity/direction/angle in ms\n * @property CALCULATE_INTERVAL\n * @type {Number}\n * @default 25\n */\nGestureDetector.CALCULATE_INTERVAL = 25;\n\n/**\n * eventtypes per touchevent (start, move, end) are filled by `Event.determineEventTypes` on `setup`\n * the object contains the DOM event names per type (`EVENT_START`, `EVENT_MOVE`, `EVENT_END`)\n * @property EVENT_TYPES\n * @private\n * @writeOnce\n * @type {Object}\n */\nvar EVENT_TYPES = {};\n\n/**\n * direction strings, for safe comparisons\n * @property DIRECTION_DOWN|LEFT|UP|RIGHT\n * @final\n * @type {String}\n * @default 'down' 'left' 'up' 'right'\n */\nvar DIRECTION_DOWN = GestureDetector.DIRECTION_DOWN = 'down';\nvar DIRECTION_LEFT = GestureDetector.DIRECTION_LEFT = 'left';\nvar DIRECTION_UP = GestureDetector.DIRECTION_UP = 'up';\nvar DIRECTION_RIGHT = GestureDetector.DIRECTION_RIGHT = 'right';\n\n/**\n * pointertype strings, for safe comparisons\n * @property POINTER_MOUSE|TOUCH|PEN\n * @final\n * @type {String}\n * @default 'mouse' 'touch' 'pen'\n */\nvar POINTER_MOUSE = GestureDetector.POINTER_MOUSE = 'mouse';\nvar POINTER_TOUCH = GestureDetector.POINTER_TOUCH = 'touch';\nvar POINTER_PEN = GestureDetector.POINTER_PEN = 'pen';\n\n/**\n * eventtypes\n * @property EVENT_START|MOVE|END|RELEASE|TOUCH\n * @final\n * @type {String}\n * @default 'start' 'change' 'move' 'end' 'release' 'touch'\n */\nvar EVENT_START = GestureDetector.EVENT_START = 'start';\nvar EVENT_MOVE = GestureDetector.EVENT_MOVE = 'move';\nvar EVENT_END = GestureDetector.EVENT_END = 'end';\nvar EVENT_RELEASE = GestureDetector.EVENT_RELEASE = 'release';\nvar EVENT_TOUCH = GestureDetector.EVENT_TOUCH = 'touch';\n\n/**\n * if the window events are set...\n * @property READY\n * @writeOnce\n * @type {Boolean}\n * @default false\n */\nGestureDetector.READY = false;\n\n/**\n * plugins namespace\n * @property plugins\n * @type {Object}\n */\nGestureDetector.plugins = GestureDetector.plugins || {};\n\n/**\n * gestures namespace\n * see `/gestures` for the definitions\n * @property gestures\n * @type {Object}\n */\nGestureDetector.gestures = GestureDetector.gestures || {};\n\n/**\n * setup events to detect gestures on the document\n * this function is called when creating an new instance\n * @private\n */\nfunction setup() {\n  if(GestureDetector.READY) {\n    return;\n  }\n\n  // find what eventtypes we add listeners to\n  Event.determineEventTypes();\n\n  // Register all gestures inside GestureDetector.gestures\n  Utils.each(GestureDetector.gestures, function(gesture) {\n    Detection.register(gesture);\n  });\n\n  // Add touch events on the document\n  Event.onTouch(GestureDetector.DOCUMENT, EVENT_MOVE, Detection.detect);\n  Event.onTouch(GestureDetector.DOCUMENT, EVENT_END, Detection.detect);\n\n  // GestureDetector is ready...!\n  GestureDetector.READY = true;\n}\n\n/**\n * @module GestureDetector\n *\n * @class Utils\n * @static\n */\nUtils = GestureDetector.utils = {\n  /**\n   * extend method, could also be used for cloning when `dest` is an empty object.\n   * changes the dest object\n   * @param {Object} dest\n   * @param {Object} src\n   * @param {Boolean} [merge=false]  do a merge\n   * @return {Object} dest\n   */\n  extend: function extend(dest, src, merge) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key) && (dest[key] === undefined || !merge)) {\n        dest[key] = src[key];\n      }\n    }\n    return dest;\n  },\n\n  /**\n   * simple addEventListener wrapper\n   * @param {HTMLElement} element\n   * @param {String} type\n   * @param {Function} handler\n   */\n  on: function on(element, type, handler) {\n    element.addEventListener(type, handler, false);\n  },\n\n  /**\n   * simple removeEventListener wrapper\n   * @param {HTMLElement} element\n   * @param {String} type\n   * @param {Function} handler\n   */\n  off: function off(element, type, handler) {\n    element.removeEventListener(type, handler, false);\n  },\n\n  /**\n   * forEach over arrays and objects\n   * @param {Object|Array} obj\n   * @param {Function} iterator\n   * @param {any} iterator.item\n   * @param {Number} iterator.index\n   * @param {Object|Array} iterator.obj the source object\n   * @param {Object} context value to use as `this` in the iterator\n   */\n  each: function each(obj, iterator, context) {\n    var i, len;\n\n    // native forEach on arrays\n    if('forEach' in obj) {\n      obj.forEach(iterator, context);\n      // arrays\n    } else if(obj.length !== undefined) {\n      for(i = 0, len = obj.length; i < len; i++) {\n        if(iterator.call(context, obj[i], i, obj) === false) {\n          return;\n        }\n      }\n      // objects\n    } else {\n      for(i in obj) {\n        if(obj.hasOwnProperty(i) &&\n          iterator.call(context, obj[i], i, obj) === false) {\n          return;\n        }\n      }\n    }\n  },\n\n  /**\n   * find if a string contains the string using indexOf\n   * @param {String} src\n   * @param {String} find\n   * @return {Boolean} found\n   */\n  inStr: function inStr(src, find) {\n    return src.indexOf(find) > -1;\n  },\n\n  /**\n   * find if a array contains the object using indexOf or a simple polyfill\n   * @param {String} src\n   * @param {String} find\n   * @return {Boolean|Number} false when not found, or the index\n   */\n  inArray: function inArray(src, find, deep) {\n    if (deep) {\n      return src.findIndex(function(item) {\n        return Object.keys(find).every(function(key) {\n          return item[key] === find[key];\n        });\n      });\n    }\n\n    if(src.indexOf) {\n      return src.indexOf(find);\n    } else {\n      for(var i = 0, len = src.length; i < len; i++) {\n        if(src[i] === find) {\n          return i;\n        }\n      }\n      return -1;\n    }\n  },\n\n  /**\n   * convert an array-like object (`arguments`, `touchlist`) to an array\n   * @param {Object} obj\n   * @return {Array}\n   */\n  toArray: function toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n  },\n\n  /**\n   * find if a node is in the given parent\n   * @param {HTMLElement} node\n   * @param {HTMLElement} parent\n   * @return {Boolean} found\n   */\n  hasParent: function hasParent(node, parent) {\n    while(node) {\n      if(node == parent) {\n        return true;\n      }\n      node = node.parentNode;\n    }\n    return false;\n  },\n\n  /**\n   * get the center of all the touches\n   * @param {Array} touches\n   * @return {Object} center contains `pageX`, `pageY`, `clientX` and `clientY` properties\n   */\n  getCenter: function getCenter(touches) {\n    var pageX = [],\n        pageY = [],\n        clientX = [],\n        clientY = [],\n        min = Math.min,\n        max = Math.max;\n\n    // no need to loop when only one touch\n    if(touches.length === 1) {\n      return {\n        pageX: touches[0].pageX,\n        pageY: touches[0].pageY,\n        clientX: touches[0].clientX,\n        clientY: touches[0].clientY\n      };\n    }\n\n    Utils.each(touches, function(touch) {\n      pageX.push(touch.pageX);\n      pageY.push(touch.pageY);\n      clientX.push(touch.clientX);\n      clientY.push(touch.clientY);\n    });\n\n    return {\n      pageX: (min.apply(Math, pageX) + max.apply(Math, pageX)) / 2,\n      pageY: (min.apply(Math, pageY) + max.apply(Math, pageY)) / 2,\n      clientX: (min.apply(Math, clientX) + max.apply(Math, clientX)) / 2,\n      clientY: (min.apply(Math, clientY) + max.apply(Math, clientY)) / 2\n    };\n  },\n\n  /**\n   * calculate the velocity between two points. unit is in px per ms.\n   * @param {Number} deltaTime\n   * @param {Number} deltaX\n   * @param {Number} deltaY\n   * @return {Object} velocity `x` and `y`\n   */\n  getVelocity: function getVelocity(deltaTime, deltaX, deltaY) {\n    return {\n      x: Math.abs(deltaX / deltaTime) || 0,\n      y: Math.abs(deltaY / deltaTime) || 0\n    };\n  },\n\n  /**\n   * calculate the angle between two coordinates\n   * @param {Touch} touch1\n   * @param {Touch} touch2\n   * @return {Number} angle\n   */\n  getAngle: function getAngle(touch1, touch2) {\n    var x = touch2.clientX - touch1.clientX,\n        y = touch2.clientY - touch1.clientY;\n\n    return Math.atan2(y, x) * 180 / Math.PI;\n  },\n\n  /**\n   * do a small comparison to get the direction between two touches.\n   * @param {Touch} touch1\n   * @param {Touch} touch2\n   * @return {String} direction matches `DIRECTION_LEFT|RIGHT|UP|DOWN`\n   */\n  getDirection: function getDirection(touch1, touch2) {\n    var x = Math.abs(touch1.clientX - touch2.clientX),\n        y = Math.abs(touch1.clientY - touch2.clientY);\n\n    if(x >= y) {\n      return touch1.clientX - touch2.clientX > 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return touch1.clientY - touch2.clientY > 0 ? DIRECTION_UP : DIRECTION_DOWN;\n  },\n\n  /**\n   * calculate the distance between two touches\n   * @param {Touch}touch1\n   * @param {Touch} touch2\n   * @return {Number} distance\n   */\n  getDistance: function getDistance(touch1, touch2) {\n    var x = touch2.clientX - touch1.clientX,\n        y = touch2.clientY - touch1.clientY;\n\n    return Math.sqrt((x * x) + (y * y));\n  },\n\n  /**\n   * calculate the scale factor between two touchLists\n   * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n   * @param {Array} start array of touches\n   * @param {Array} end array of touches\n   * @return {Number} scale\n   */\n  getScale: function getScale(start, end) {\n    // need two fingers...\n    if(start.length >= 2 && end.length >= 2) {\n      return this.getDistance(end[0], end[1]) / this.getDistance(start[0], start[1]);\n    }\n    return 1;\n  },\n\n  /**\n   * calculate the rotation degrees between two touchLists\n   * @param {Array} start array of touches\n   * @param {Array} end array of touches\n   * @return {Number} rotation\n   */\n  getRotation: function getRotation(start, end) {\n    // need two fingers\n    if(start.length >= 2 && end.length >= 2) {\n      return this.getAngle(end[1], end[0]) - this.getAngle(start[1], start[0]);\n    }\n    return 0;\n  },\n\n  /**\n   * find out if the direction is vertical   *\n   * @param {String} direction matches `DIRECTION_UP|DOWN`\n   * @return {Boolean} is_vertical\n   */\n  isVertical: function isVertical(direction) {\n    return direction == DIRECTION_UP || direction == DIRECTION_DOWN;\n  },\n\n  /**\n   * set css properties with their prefixes\n   * @param {HTMLElement} element\n   * @param {String} prop\n   * @param {String} value\n   * @param {Boolean} [toggle=true]\n   * @return {Boolean}\n   */\n  setPrefixedCss: function setPrefixedCss(element, prop, value, toggle) {\n    var prefixes = ['', 'Webkit', 'Moz', 'O', 'ms'];\n    prop = Utils.toCamelCase(prop);\n\n    for(var i = 0; i < prefixes.length; i++) {\n      var p = prop;\n      // prefixes\n      if(prefixes[i]) {\n        p = prefixes[i] + p.slice(0, 1).toUpperCase() + p.slice(1);\n      }\n\n      // test the style\n      if(p in element.style) {\n        element.style[p] = (toggle === null || toggle) && value || '';\n        break;\n      }\n    }\n  },\n\n  /**\n   * toggle browser default behavior by setting css properties.\n   * `userSelect='none'` also sets `element.onselectstart` to false\n   * `userDrag='none'` also sets `element.ondragstart` to false\n   *\n   * @param {HtmlElement} element\n   * @param {Object} props\n   * @param {Boolean} [toggle=true]\n   */\n  toggleBehavior: function toggleBehavior(element, props, toggle) {\n    if(!props || !element || !element.style) {\n      return;\n    }\n\n    // set the css properties\n    Utils.each(props, function(value, prop) {\n      Utils.setPrefixedCss(element, prop, value, toggle);\n    });\n\n    var falseFn = toggle && function() {\n      return false;\n    };\n\n    // also the disable onselectstart\n    if(props.userSelect == 'none') {\n      element.onselectstart = falseFn;\n    }\n    // and disable ondragstart\n    if(props.userDrag == 'none') {\n      element.ondragstart = falseFn;\n    }\n  },\n\n  /**\n   * convert a string with underscores to camelCase\n   * so prevent_default becomes preventDefault\n   * @param {String} str\n   * @return {String} camelCaseStr\n   */\n  toCamelCase: function toCamelCase(str) {\n    return str.replace(/[_-]([a-z])/g, function(s) {\n      return s[1].toUpperCase();\n    });\n  }\n};\n\n\n/**\n * @module GestureDetector\n */\n/**\n * @class Event\n * @static\n */\nEvent = GestureDetector.event = {\n  /**\n   * when touch events have been fired, this is true\n   * this is used to stop mouse events\n   * @property prevent_mouseevents\n   * @private\n   * @type {Boolean}\n   */\n  preventMouseEvents: false,\n\n  /**\n   * if EVENT_START has been fired\n   * @property started\n   * @private\n   * @type {Boolean}\n   */\n  started: false,\n\n  /**\n   * when the mouse is hold down, this is true\n   * @property should_detect\n   * @private\n   * @type {Boolean}\n   */\n  shouldDetect: false,\n\n  /**\n   * simple event binder with a hook and support for multiple types\n   * @param {HTMLElement} element\n   * @param {String} type\n   * @param {Function} handler\n   * @param {Function} [hook]\n   * @param {Object} hook.type\n   */\n  on: function on(element, type, handler, hook) {\n    var types = type.split(' ');\n    Utils.each(types, function(type) {\n      Utils.on(element, type, handler);\n      hook && hook(type);\n    });\n  },\n\n  /**\n   * simple event unbinder with a hook and support for multiple types\n   * @param {HTMLElement} element\n   * @param {String} type\n   * @param {Function} handler\n   * @param {Function} [hook]\n   * @param {Object} hook.type\n   */\n  off: function off(element, type, handler, hook) {\n    var types = type.split(' ');\n    Utils.each(types, function(type) {\n      Utils.off(element, type, handler);\n      hook && hook(type);\n    });\n  },\n\n  /**\n   * the core touch event handler.\n   * this finds out if we should to detect gestures\n   * @param {HTMLElement} element\n   * @param {String} eventType matches `EVENT_START|MOVE|END`\n   * @param {Function} handler\n   * @return onTouchHandler {Function} the core event handler\n   */\n  onTouch: function onTouch(element, eventType, handler) {\n    var self = this;\n\n    var onTouchHandler = function onTouchHandler(ev) {\n      var srcType = ev.type.toLowerCase(),\n          isPointer = GestureDetector.HAS_POINTEREVENTS,\n          isMouse = Utils.inStr(srcType, 'mouse'),\n          triggerType;\n\n      // if we are in a mouseevent, but there has been a touchevent triggered in this session\n      // we want to do nothing. simply break out of the event.\n      if(isMouse && self.preventMouseEvents) {\n        return;\n\n        // mousebutton must be down\n      } else if(isMouse && eventType == EVENT_START && ev.button === 0) {\n        self.preventMouseEvents = false;\n        self.shouldDetect = true;\n      } else if(isPointer && eventType == EVENT_START) {\n        self.shouldDetect = (ev.buttons === 1 || PointerEvent.matchType(POINTER_TOUCH, ev));\n        // just a valid start event, but no mouse\n      } else if(!isMouse && eventType == EVENT_START) {\n        self.preventMouseEvents = true;\n        self.shouldDetect = true;\n      }\n\n      // update the pointer event before entering the detection\n      if(isPointer && eventType != EVENT_END) {\n        PointerEvent.updatePointer(eventType, ev);\n      }\n\n      // we are in a touch/down state, so allowed detection of gestures\n      if(self.shouldDetect) {\n        triggerType = self.doDetect.call(self, ev, eventType, element, handler);\n      }\n\n      // ...and we are done with the detection\n      // so reset everything to start each detection totally fresh\n      if(triggerType == EVENT_END) {\n        self.preventMouseEvents = false;\n        self.shouldDetect = false;\n        PointerEvent.reset();\n        // update the pointerevent object after the detection\n      }\n\n      if(isPointer && eventType == EVENT_END) {\n        PointerEvent.updatePointer(eventType, ev);\n      }\n    };\n\n    this.on(element, EVENT_TYPES[eventType], onTouchHandler);\n    return onTouchHandler;\n  },\n\n  /**\n   * the core detection method\n   * this finds out what GestureDetector-touch-events to trigger\n   * @param {Object} ev\n   * @param {String} eventType matches `EVENT_START|MOVE|END`\n   * @param {HTMLElement} element\n   * @param {Function} handler\n   * @return {String} triggerType matches `EVENT_START|MOVE|END`\n   */\n  doDetect: function doDetect(ev, eventType, element, handler) {\n    var touchList = this.getTouchList(ev, eventType);\n    var touchListLength = touchList.length;\n    var triggerType = eventType;\n    var triggerChange = touchList.trigger; // used by fakeMultitouch plugin\n    var changedLength = touchListLength;\n\n    // at each touchstart-like event we want also want to trigger a TOUCH event...\n    if(eventType == EVENT_START) {\n      triggerChange = EVENT_TOUCH;\n      // ...the same for a touchend-like event\n    } else if(eventType == EVENT_END) {\n      triggerChange = EVENT_RELEASE;\n\n      // keep track of how many touches have been removed\n      changedLength = touchList.length - ((ev.changedTouches) ? ev.changedTouches.length : 1);\n    }\n\n    // after there are still touches on the screen,\n    // we just want to trigger a MOVE event. so change the START or END to a MOVE\n    // but only after detection has been started, the first time we actually want a START\n    if(changedLength > 0 && this.started) {\n      triggerType = EVENT_MOVE;\n    }\n\n    // detection has been started, we keep track of this, see above\n    this.started = true;\n\n    // generate some event data, some basic information\n    var evData = this.collectEventData(element, triggerType, touchList, ev);\n\n    // trigger the triggerType event before the change (TOUCH, RELEASE) events\n    // but the END event should be at last\n    if(eventType != EVENT_END) {\n      handler.call(Detection, evData);\n    }\n\n    // trigger a change (TOUCH, RELEASE) event, this means the length of the touches changed\n    if(triggerChange) {\n      evData.changedLength = changedLength;\n      evData.eventType = triggerChange;\n\n      handler.call(Detection, evData);\n\n      evData.eventType = triggerType;\n      delete evData.changedLength;\n    }\n\n    // trigger the END event\n    if(triggerType == EVENT_END) {\n      handler.call(Detection, evData);\n\n      // ...and we are done with the detection\n      // so reset everything to start each detection totally fresh\n      this.started = false;\n    }\n\n    return triggerType;\n  },\n\n  /**\n   * we have different events for each device/browser\n   * determine what we need and set them in the EVENT_TYPES constant\n   * the `onTouch` method is bind to these properties.\n   * @return {Object} events\n   */\n  determineEventTypes: function determineEventTypes() {\n    var types;\n    if(GestureDetector.HAS_POINTEREVENTS) {\n      if(window.PointerEvent) {\n        types = [\n          'pointerdown',\n          'pointermove',\n          'pointerup pointercancel lostpointercapture'\n        ];\n      } else {\n        types = [\n          'MSPointerDown',\n          'MSPointerMove',\n          'MSPointerUp MSPointerCancel MSLostPointerCapture'\n        ];\n      }\n    } else if(GestureDetector.NO_MOUSEEVENTS) {\n      types = [\n        'touchstart',\n        'touchmove',\n        'touchend touchcancel'\n      ];\n    } else {\n      types = [\n        'touchstart mousedown',\n        'touchmove mousemove',\n        'touchend touchcancel mouseup'\n      ];\n    }\n\n    EVENT_TYPES[EVENT_START] = types[0];\n    EVENT_TYPES[EVENT_MOVE] = types[1];\n    EVENT_TYPES[EVENT_END] = types[2];\n    return EVENT_TYPES;\n  },\n\n  /**\n   * create touchList depending on the event\n   * @param {Object} ev\n   * @param {String} eventType\n   * @return {Array} touches\n   */\n  getTouchList: function getTouchList(ev, eventType) {\n    // get the fake pointerEvent touchlist\n    if(GestureDetector.HAS_POINTEREVENTS) {\n      return PointerEvent.getTouchList();\n    }\n\n    // get the touchlist\n    if(ev.touches) {\n      if(eventType == EVENT_MOVE) {\n        return ev.touches;\n      }\n\n      var identifiers = [];\n      var concat = [].concat(Utils.toArray(ev.touches), Utils.toArray(ev.changedTouches));\n      var touchList = [];\n\n      Utils.each(concat, function(touch) {\n        if(Utils.inArray(identifiers, touch.identifier) === -1) {\n          touchList.push(touch);\n        }\n        identifiers.push(touch.identifier);\n      });\n\n      return touchList;\n    }\n\n    // make fake touchList from mouse position\n    ev.identifier = 1;\n    return [ev];\n  },\n\n  /**\n   * collect basic event data\n   * @param {HTMLElement} element\n   * @param {String} eventType matches `EVENT_START|MOVE|END`\n   * @param {Array} touches\n   * @param {Object} ev\n   * @return {Object} ev\n   */\n  collectEventData: function collectEventData(element, eventType, touches, ev) {\n    // find out pointerType\n    var pointerType = POINTER_TOUCH;\n    if(Utils.inStr(ev.type, 'mouse') || PointerEvent.matchType(POINTER_MOUSE, ev)) {\n      pointerType = POINTER_MOUSE;\n    } else if(PointerEvent.matchType(POINTER_PEN, ev)) {\n      pointerType = POINTER_PEN;\n    }\n\n    return {\n      center: Utils.getCenter(touches),\n      timeStamp: Date.now(),\n      target: ev.target,\n      touches: touches,\n      eventType: eventType,\n      pointerType: pointerType,\n      srcEvent: ev,\n\n      /**\n       * prevent the browser default actions\n       * mostly used to disable scrolling of the browser\n       */\n      preventDefault: function() {\n        var srcEvent = this.srcEvent;\n        srcEvent.preventManipulation && srcEvent.preventManipulation();\n        srcEvent.preventDefault && srcEvent.preventDefault();\n      },\n\n      /**\n       * stop bubbling the event up to its parents\n       */\n      stopPropagation: function() {\n        this.srcEvent.stopPropagation();\n      },\n\n      /**\n       * immediately stop gesture detection\n       * might be useful after a swipe was detected\n       * @return {*}\n       */\n      stopDetect: function() {\n        return Detection.stopDetect();\n      }\n    };\n  }\n};\n\n\n/**\n * @module GestureDetector\n *\n * @class PointerEvent\n * @static\n */\nPointerEvent = GestureDetector.PointerEvent = {\n  /**\n   * holds all pointers, by `identifier`\n   * @property pointers\n   * @type {Object}\n   */\n  pointers: {},\n\n  /**\n   * get the pointers as an array\n   * @return {Array} touchlist\n   */\n  getTouchList: function getTouchList() {\n    var touchlist = [];\n    // we can use forEach since pointerEvents only is in IE10\n    Utils.each(this.pointers, function(pointer) {\n      touchlist.push(pointer);\n    });\n    return touchlist;\n  },\n\n  /**\n   * update the position of a pointer\n   * @param {String} eventType matches `EVENT_START|MOVE|END`\n   * @param {Object} pointerEvent\n   */\n  updatePointer: function updatePointer(eventType, pointerEvent) {\n    if(eventType == EVENT_END || (eventType != EVENT_END && pointerEvent.buttons !== 1)) {\n      delete this.pointers[pointerEvent.pointerId];\n    } else {\n      pointerEvent.identifier = pointerEvent.pointerId;\n      this.pointers[pointerEvent.pointerId] = pointerEvent;\n    }\n  },\n\n  /**\n   * check if ev matches pointertype\n   * @param {String} pointerType matches `POINTER_MOUSE|TOUCH|PEN`\n   * @param {PointerEvent} ev\n   */\n  matchType: function matchType(pointerType, ev) {\n    if(!ev.pointerType) {\n      return false;\n    }\n\n    var pt = ev.pointerType,\n        types = {};\n\n    types[POINTER_MOUSE] = (pt === (ev.MSPOINTER_TYPE_MOUSE || POINTER_MOUSE));\n    types[POINTER_TOUCH] = (pt === (ev.MSPOINTER_TYPE_TOUCH || POINTER_TOUCH));\n    types[POINTER_PEN] = (pt === (ev.MSPOINTER_TYPE_PEN || POINTER_PEN));\n    return types[pointerType];\n  },\n\n  /**\n   * reset the stored pointers\n   */\n  reset: function resetList() {\n    this.pointers = {};\n  }\n};\n\n\n/**\n * @module GestureDetector\n *\n * @class Detection\n * @static\n */\nDetection = GestureDetector.detection = {\n  // contains all registered GestureDetector.gestures in the correct order\n  gestures: [],\n\n  // data of the current GestureDetector.gesture detection session\n  current: null,\n\n  // the previous GestureDetector.gesture session data\n  // is a full clone of the previous gesture.current object\n  previous: null,\n\n  // when this becomes true, no gestures are fired\n  stopped: false,\n\n  /**\n   * start GestureDetector.gesture detection\n   * @param {GestureDetector.Instance} inst\n   * @param {Object} eventData\n   */\n  startDetect: function startDetect(inst, eventData) {\n    // already busy with a GestureDetector.gesture detection on an element\n    if(this.current) {\n      return;\n    }\n\n    this.stopped = false;\n\n    // holds current session\n    this.current = {\n      inst: inst, // reference to GestureDetectorInstance we're working for\n      startEvent: Utils.extend({}, eventData), // start eventData for distances, timing etc\n      lastEvent: false, // last eventData\n      lastCalcEvent: false, // last eventData for calculations.\n      futureCalcEvent: false, // last eventData for calculations.\n      lastCalcData: {}, // last lastCalcData\n      name: '' // current gesture we're in/detected, can be 'tap', 'hold' etc\n    };\n\n    this.detect(eventData);\n  },\n\n  /**\n   * GestureDetector.gesture detection\n   * @param {Object} eventData\n   * @return {any}\n   */\n  detect: function detect(eventData) {\n    if(!this.current || this.stopped) {\n      return;\n    }\n\n    // extend event data with calculations about scale, distance etc\n    eventData = this.extendEventData(eventData);\n\n    // GestureDetector instance and instance options\n    var inst = this.current.inst,\n        instOptions = inst.options;\n\n    // call GestureDetector.gesture handlers\n    Utils.each(this.gestures, function triggerGesture(gesture) {\n      // only when the instance options have enabled this gesture\n      if(!this.stopped && inst.enabled && instOptions[gesture.name]) {\n        gesture.handler.call(gesture, eventData, inst);\n      }\n    }, this);\n\n    // store as previous event event\n    if(this.current) {\n      this.current.lastEvent = eventData;\n    }\n\n    if(eventData.eventType == EVENT_END) {\n      this.stopDetect();\n    }\n\n    return eventData; // eslint-disable-line consistent-return\n  },\n\n  /**\n   * clear the GestureDetector.gesture vars\n   * this is called on endDetect, but can also be used when a final GestureDetector.gesture has been detected\n   * to stop other GestureDetector.gestures from being fired\n   */\n  stopDetect: function stopDetect() {\n    // clone current data to the store as the previous gesture\n    // used for the double tap gesture, since this is an other gesture detect session\n    this.previous = Utils.extend({}, this.current);\n\n    // reset the current\n    this.current = null;\n    this.stopped = true;\n  },\n\n  /**\n   * calculate velocity, angle and direction\n   * @param {Object} ev\n   * @param {Object} center\n   * @param {Number} deltaTime\n   * @param {Number} deltaX\n   * @param {Number} deltaY\n   */\n  getCalculatedData: function getCalculatedData(ev, center, deltaTime, deltaX, deltaY) {\n    var cur = this.current,\n        recalc = false,\n        calcEv = cur.lastCalcEvent,\n        calcData = cur.lastCalcData;\n\n    if(calcEv && ev.timeStamp - calcEv.timeStamp > GestureDetector.CALCULATE_INTERVAL) {\n      center = calcEv.center;\n      deltaTime = ev.timeStamp - calcEv.timeStamp;\n      deltaX = ev.center.clientX - calcEv.center.clientX;\n      deltaY = ev.center.clientY - calcEv.center.clientY;\n      recalc = true;\n    }\n\n    if(ev.eventType == EVENT_TOUCH || ev.eventType == EVENT_RELEASE) {\n      cur.futureCalcEvent = ev;\n    }\n\n    if(!cur.lastCalcEvent || recalc) {\n      calcData.velocity = Utils.getVelocity(deltaTime, deltaX, deltaY);\n      calcData.angle = Utils.getAngle(center, ev.center);\n      calcData.direction = Utils.getDirection(center, ev.center);\n\n      cur.lastCalcEvent = cur.futureCalcEvent || ev;\n      cur.futureCalcEvent = ev;\n    }\n\n    ev.velocityX = calcData.velocity.x;\n    ev.velocityY = calcData.velocity.y;\n    ev.interimAngle = calcData.angle;\n    ev.interimDirection = calcData.direction;\n  },\n\n  /**\n   * extend eventData for GestureDetector.gestures\n   * @param {Object} ev\n   * @return {Object} ev\n   */\n  extendEventData: function extendEventData(ev) {\n    var cur = this.current,\n        startEv = cur.startEvent,\n        lastEv = cur.lastEvent || startEv;\n\n    // update the start touchlist to calculate the scale/rotation\n    if(ev.eventType == EVENT_TOUCH || ev.eventType == EVENT_RELEASE) {\n      startEv.touches = [];\n      Utils.each(ev.touches, function(touch) {\n        startEv.touches.push({\n          clientX: touch.clientX,\n          clientY: touch.clientY\n        });\n      });\n    }\n\n    var deltaTime = ev.timeStamp - startEv.timeStamp,\n        deltaX = ev.center.clientX - startEv.center.clientX,\n        deltaY = ev.center.clientY - startEv.center.clientY;\n\n    this.getCalculatedData(ev, lastEv.center, deltaTime, deltaX, deltaY);\n\n    Utils.extend(ev, {\n      startEvent: startEv,\n\n      deltaTime: deltaTime,\n      deltaX: deltaX,\n      deltaY: deltaY,\n\n      distance: Utils.getDistance(startEv.center, ev.center),\n      angle: Utils.getAngle(startEv.center, ev.center),\n      direction: Utils.getDirection(startEv.center, ev.center),\n      scale: Utils.getScale(startEv.touches, ev.touches),\n      rotation: Utils.getRotation(startEv.touches, ev.touches)\n    });\n\n    return ev;\n  },\n\n  /**\n   * register new gesture\n   * @param {Object} gesture object, see `gestures/` for documentation\n   * @return {Array} gestures\n   */\n  register: function register(gesture) {\n    // add an enable gesture options if there is no given\n    var options = gesture.defaults || {};\n    if(options[gesture.name] === undefined) {\n      options[gesture.name] = true;\n    }\n\n    // extend GestureDetector default options with the GestureDetector.gesture options\n    Utils.extend(GestureDetector.defaults, options, true);\n\n    // set its index\n    gesture.index = gesture.index || 1000;\n\n    // add GestureDetector.gesture to the list\n    this.gestures.push(gesture);\n\n    // sort the list by index\n    this.gestures.sort(function(a, b) {\n      if(a.index < b.index) {\n        return -1;\n      }\n      if(a.index > b.index) {\n        return 1;\n      }\n      return 0;\n    });\n\n    return this.gestures;\n  }\n};\n\n\n/**\n * @module GestureDetector\n */\n\n/**\n * create new GestureDetector instance\n * all methods should return the instance itself, so it is chainable.\n *\n * @class Instance\n * @constructor\n * @param {HTMLElement} element\n * @param {Object} [options={}] options are merged with `GestureDetector.defaults`\n * @return {GestureDetector.Instance}\n */\nGestureDetector.Instance = function(element, options) {\n  var self = this;\n\n  // setup GestureDetectorJS window events and register all gestures\n  // this also sets up the default options\n  setup();\n\n  /**\n   * @property element\n   * @type {HTMLElement}\n   */\n  this.element = element;\n\n  /**\n   * @property enabled\n   * @type {Boolean}\n   * @protected\n   */\n  this.enabled = true;\n\n  /**\n   * options, merged with the defaults\n   * options with an _ are converted to camelCase\n   * @property options\n   * @type {Object}\n   */\n  Utils.each(options, function(value, name) {\n    delete options[name];\n    options[Utils.toCamelCase(name)] = value;\n  });\n\n  this.options = Utils.extend(Utils.extend({}, GestureDetector.defaults), options || {});\n\n  // add some css to the element to prevent the browser from doing its native behavior\n  if(this.options.behavior) {\n    Utils.toggleBehavior(this.element, this.options.behavior, true);\n  }\n\n  /**\n   * event start handler on the element to start the detection\n   * @property eventStartHandler\n   * @type {Object}\n   */\n  this.eventStartHandler = Event.onTouch(element, EVENT_START, function(ev) {\n    if(self.enabled && ev.eventType == EVENT_START) {\n      Detection.startDetect(self, ev);\n    } else if(ev.eventType == EVENT_TOUCH) {\n      Detection.detect(ev);\n    }\n  });\n\n  /**\n   * keep a list of user event handlers which needs to be removed when calling 'dispose'\n   * @property eventHandlers\n   * @type {Array}\n   */\n  this.eventHandlers = [];\n};\n\nGestureDetector.Instance.prototype = {\n  /**\n   * @method on\n   * @signature on(gestures, handler)\n   * @description\n   *  [en]Adds an event handler for a gesture. Available gestures are: drag, dragleft, dragright, dragup, dragdown, hold, release, swipe, swipeleft, swiperight, swipeup, swipedown, tap, doubletap, touch, transform, pinch, pinchin, pinchout and rotate. [/en]\n   *  [ja]drag dragleft dragright dragup dragdown hold release swipe swipeleft swiperight swipeup swipedown tap doubletap touch transform pinch pinchin pinchout rotate [/ja]\n   * @param {String} gestures\n   *   [en]A space separated list of gestures.[/en]\n   *   [ja][/ja]\n   * @param {Function} handler\n   *   [en]An event handling function.[/en]\n   *   [ja][/ja]\n   */\n  on: function onEvent(gestures, handler) {\n    var self = this;\n    Event.on(self.element, gestures, handler, function(type) {\n      self.eventHandlers.push({ gesture: type, handler: handler });\n    });\n    return self;\n  },\n\n  /**\n   * @method off\n   * @signature off(gestures, handler)\n   * @description\n   *  [en]Remove an event listener.[/en]\n   *  [ja][/ja]\n   * @param {String} gestures\n   *   [en]A space separated list of gestures.[/en]\n   *   [ja][/ja]\n   * @param {Function} handler\n   *   [en]An event handling function.[/en]\n   *   [ja][/ja]\n   */\n  off: function offEvent(gestures, handler) {\n    var self = this;\n\n    Event.off(self.element, gestures, handler, function(type) {\n      var index = Utils.inArray(self.eventHandlers, { gesture: type, handler: handler }, true);\n      if(index >= 0) {\n        self.eventHandlers.splice(index, 1);\n      }\n    });\n    return self;\n  },\n\n  /**\n   * trigger gesture event\n   * @method trigger\n   * @signature trigger(gesture, eventData)\n   * @param {String} gesture\n   * @param {Object} [eventData]\n   */\n  trigger: function triggerEvent(gesture, eventData) {\n    // optional\n    if(!eventData) {\n      eventData = {};\n    }\n\n    // create DOM event\n    var event = GestureDetector.DOCUMENT.createEvent('Event');\n    event.initEvent(gesture, true, true);\n    event.gesture = eventData;\n\n    // trigger on the target if it is in the instance element,\n    // this is for event delegation tricks\n    var element = this.element;\n    if(Utils.hasParent(eventData.target, element)) {\n      element = eventData.target;\n    }\n\n    element.dispatchEvent(event);\n    return this;\n  },\n\n  /**\n   * @method enable\n   * @signature enable(state)\n   * @description\n   *  [en]Enable or disable gesture detection.[/en]\n   *  [ja]/[/ja]\n   * @param {Boolean} state\n   *   [en]Specify if it should be enabled or not.[/en]\n   *   [ja][/ja]\n   */\n  enable: function enable(state) {\n    this.enabled = state;\n    return this;\n  },\n\n  /**\n   * @method dispose\n   * @signature dispose()\n   * @description\n   *  [en]Remove and destroy all event handlers for this instance.[/en]\n   *  [ja][/ja]\n   */\n  dispose: function dispose() {\n    var i, eh;\n\n    // undo all changes made by stop_browser_behavior\n    Utils.toggleBehavior(this.element, this.options.behavior, false);\n\n    // unbind all custom event handlers\n    for(i = -1; (eh = this.eventHandlers[++i]);) { // eslint-disable-line no-cond-assign\n      Utils.off(this.element, eh.gesture, eh.handler);\n    }\n\n    this.eventHandlers = [];\n\n    // unbind the start event listener\n    Event.off(this.element, EVENT_TYPES[EVENT_START], this.eventStartHandler);\n\n    return null;\n  }\n};\n\n\n/**\n * @module gestures\n */\n/**\n * Move with x fingers (default 1) around on the page.\n * Preventing the default browser behavior is a good way to improve feel and working.\n * ````\n *  GestureDetectortime.on(\"drag\", function(ev) {\n *    console.log(ev);\n *    ev.gesture.preventDefault();\n *  });\n * ````\n *\n * @class Drag\n * @static\n */\n/**\n * @event drag\n * @param {Object} ev\n */\n/**\n * @event dragstart\n * @param {Object} ev\n */\n/**\n * @event dragend\n * @param {Object} ev\n */\n/**\n * @event drapleft\n * @param {Object} ev\n */\n/**\n * @event dragright\n * @param {Object} ev\n */\n/**\n * @event dragup\n * @param {Object} ev\n */\n/**\n * @event dragdown\n * @param {Object} ev\n */\n\n/**\n * @param {String} name\n */\n(function(name) {\n  var triggered = false;\n\n  function dragGesture(ev, inst) {\n    var cur = Detection.current;\n\n    // max touches\n    if(inst.options.dragMaxTouches > 0 &&\n      ev.touches.length > inst.options.dragMaxTouches) {\n      return;\n    }\n\n    switch(ev.eventType) {\n    case EVENT_START:\n      triggered = false;\n      break;\n\n    case EVENT_MOVE:\n      // when the distance we moved is too small we skip this gesture\n      // or we can be already in dragging\n      if(ev.distance < inst.options.dragMinDistance &&\n        cur.name != name) {\n        return;\n      }\n\n      var startCenter = cur.startEvent.center;\n\n      // we are dragging!\n      if(cur.name != name) {\n        cur.name = name;\n        if(inst.options.dragDistanceCorrection && ev.distance > 0) {\n          // When a drag is triggered, set the event center to dragMinDistance pixels from the original event center.\n          // Without this correction, the dragged distance would jumpstart at dragMinDistance pixels instead of at 0.\n          // It might be useful to save the original start point somewhere\n          var factor = Math.abs(inst.options.dragMinDistance / ev.distance);\n          startCenter.pageX += ev.deltaX * factor;\n          startCenter.pageY += ev.deltaY * factor;\n          startCenter.clientX += ev.deltaX * factor;\n          startCenter.clientY += ev.deltaY * factor;\n\n          // recalculate event data using new start point\n          ev = Detection.extendEventData(ev);\n        }\n      }\n\n      // lock drag to axis?\n      if(cur.lastEvent.dragLockToAxis ||\n        ( inst.options.dragLockToAxis &&\n          inst.options.dragLockMinDistance <= ev.distance\n        )) {\n          ev.dragLockToAxis = true;\n        }\n\n        // keep direction on the axis that the drag gesture started on\n        var lastDirection = cur.lastEvent.direction;\n        if(ev.dragLockToAxis && lastDirection !== ev.direction) {\n          if(Utils.isVertical(lastDirection)) {\n            ev.direction = (ev.deltaY < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n          } else {\n            ev.direction = (ev.deltaX < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n          }\n        }\n\n        // first time, trigger dragstart event\n        if(!triggered) {\n          inst.trigger(name + 'start', ev);\n          triggered = true;\n        }\n\n        // trigger events\n        inst.trigger(name, ev);\n        inst.trigger(name + ev.direction, ev);\n\n        var isVertical = Utils.isVertical(ev.direction);\n\n        // block the browser events\n        if((inst.options.dragBlockVertical && isVertical) ||\n          (inst.options.dragBlockHorizontal && !isVertical)) {\n          ev.preventDefault();\n        }\n        break;\n\n      case EVENT_RELEASE:\n        if(triggered && ev.changedLength <= inst.options.dragMaxTouches) {\n          inst.trigger(name + 'end', ev);\n          triggered = false;\n        }\n        break;\n\n      case EVENT_END:\n        triggered = false;\n        break;\n      }\n    }\n\n    GestureDetector.gestures.Drag = {\n      name: name,\n      index: 50,\n      handler: dragGesture,\n      defaults: {\n        /**\n         * minimal movement that have to be made before the drag event gets triggered\n         * @property dragMinDistance\n         * @type {Number}\n         * @default 10\n         */\n        dragMinDistance: 10,\n\n        /**\n         * Set dragDistanceCorrection to true to make the starting point of the drag\n         * be calculated from where the drag was triggered, not from where the touch started.\n         * Useful to avoid a jerk-starting drag, which can make fine-adjustments\n         * through dragging difficult, and be visually unappealing.\n         * @property dragDistanceCorrection\n         * @type {Boolean}\n         * @default true\n         */\n        dragDistanceCorrection: true,\n\n        /**\n         * set 0 for unlimited, but this can conflict with transform\n         * @property dragMaxTouches\n         * @type {Number}\n         * @default 1\n         */\n        dragMaxTouches: 1,\n\n        /**\n         * prevent default browser behavior when dragging occurs\n         * be careful with it, it makes the element a blocking element\n         * when you are using the drag gesture, it is a good practice to set this true\n         * @property dragBlockHorizontal\n         * @type {Boolean}\n         * @default false\n         */\n        dragBlockHorizontal: false,\n\n        /**\n         * same as `dragBlockHorizontal`, but for vertical movement\n         * @property dragBlockVertical\n         * @type {Boolean}\n         * @default false\n         */\n        dragBlockVertical: false,\n\n        /**\n         * dragLockToAxis keeps the drag gesture on the axis that it started on,\n         * It disallows vertical directions if the initial direction was horizontal, and vice versa.\n         * @property dragLockToAxis\n         * @type {Boolean}\n         * @default false\n         */\n        dragLockToAxis: false,\n\n        /**\n         * drag lock only kicks in when distance > dragLockMinDistance\n         * This way, locking occurs only when the distance has become large enough to reliably determine the direction\n         * @property dragLockMinDistance\n         * @type {Number}\n         * @default 25\n         */\n        dragLockMinDistance: 25\n      }\n    };\n  })('drag');\n\n  /**\n   * @module gestures\n   */\n  /**\n   * trigger a simple gesture event, so you can do anything in your handler.\n   * only usable if you know what your doing...\n   *\n   * @class Gesture\n   * @static\n   */\n  /**\n   * @event gesture\n   * @param {Object} ev\n   */\n  GestureDetector.gestures.Gesture = {\n    name: 'gesture',\n    index: 1337,\n    handler: function releaseGesture(ev, inst) {\n      inst.trigger(this.name, ev);\n    }\n  };\n\n  /**\n   * @module gestures\n   */\n  /**\n   * Touch stays at the same place for x time\n   *\n   * @class Hold\n   * @static\n   */\n  /**\n   * @event hold\n   * @param {Object} ev\n   */\n\n  /**\n   * @param {String} name\n   */\n  (function(name) {\n    var timer;\n\n    function holdGesture(ev, inst) {\n      var options = inst.options,\n          current = Detection.current;\n\n      switch(ev.eventType) {\n      case EVENT_START:\n        clearTimeout(timer);\n\n        // set the gesture so we can check in the timeout if it still is\n        current.name = name;\n\n        // set timer and if after the timeout it still is hold,\n        // we trigger the hold event\n        timer = setTimeout(function() {\n          if(current && current.name == name) {\n            inst.trigger(name, ev);\n          }\n        }, options.holdTimeout);\n        break;\n\n      case EVENT_MOVE:\n        if(ev.distance > options.holdThreshold) {\n          clearTimeout(timer);\n        }\n        break;\n\n      case EVENT_RELEASE:\n        clearTimeout(timer);\n        break;\n      }\n    }\n\n    GestureDetector.gestures.Hold = {\n      name: name,\n      index: 10,\n      defaults: {\n        /**\n         * @property holdTimeout\n         * @type {Number}\n         * @default 500\n         */\n        holdTimeout: 500,\n\n        /**\n         * movement allowed while holding\n         * @property holdThreshold\n         * @type {Number}\n         * @default 2\n         */\n        holdThreshold: 2\n      },\n      handler: holdGesture\n    };\n  })('hold');\n\n  /**\n   * @module gestures\n   */\n  /**\n   * when a touch is being released from the page\n   *\n   * @class Release\n   * @static\n   */\n  /**\n   * @event release\n   * @param {Object} ev\n   */\n  GestureDetector.gestures.Release = {\n    name: 'release',\n    index: Infinity,\n    handler: function releaseGesture(ev, inst) {\n      if(ev.eventType == EVENT_RELEASE) {\n        inst.trigger(this.name, ev);\n      }\n    }\n  };\n\n  /**\n   * @module gestures\n   */\n  /**\n   * triggers swipe events when the end velocity is above the threshold\n   * for best usage, set `preventDefault` (on the drag gesture) to `true`\n   * ````\n   *  GestureDetectortime.on(\"dragleft swipeleft\", function(ev) {\n   *    console.log(ev);\n   *    ev.gesture.preventDefault();\n   *  });\n   * ````\n   *\n   * @class Swipe\n   * @static\n   */\n  /**\n   * @event swipe\n   * @param {Object} ev\n   */\n  /**\n   * @event swipeleft\n   * @param {Object} ev\n   */\n  /**\n   * @event swiperight\n   * @param {Object} ev\n   */\n  /**\n   * @event swipeup\n   * @param {Object} ev\n   */\n  /**\n   * @event swipedown\n   * @param {Object} ev\n   */\n  GestureDetector.gestures.Swipe = {\n    name: 'swipe',\n    index: 40,\n    defaults: {\n      /**\n       * @property swipeMinTouches\n       * @type {Number}\n       * @default 1\n       */\n      swipeMinTouches: 1,\n\n      /**\n       * @property swipeMaxTouches\n       * @type {Number}\n       * @default 1\n       */\n      swipeMaxTouches: 1,\n\n      /**\n       * horizontal swipe velocity\n       * @property swipeVelocityX\n       * @type {Number}\n       * @default 0.6\n       */\n      swipeVelocityX: 0.6,\n\n      /**\n       * vertical swipe velocity\n       * @property swipeVelocityY\n       * @type {Number}\n       * @default 0.6\n       */\n      swipeVelocityY: 0.6\n    },\n\n    handler: function swipeGesture(ev, inst) {\n      if(ev.eventType == EVENT_RELEASE) {\n        var touches = ev.touches.length,\n            options = inst.options;\n\n        // max touches\n        if(touches < options.swipeMinTouches ||\n          touches > options.swipeMaxTouches) {\n          return;\n        }\n\n        // when the distance we moved is too small we skip this gesture\n        // or we can be already in dragging\n        if(ev.velocityX > options.swipeVelocityX ||\n          ev.velocityY > options.swipeVelocityY) {\n          // trigger swipe events\n          inst.trigger(this.name, ev);\n          inst.trigger(this.name + ev.direction, ev);\n        }\n      }\n    }\n  };\n\n  /**\n   * @module gestures\n   */\n  /**\n   * Single tap and a double tap on a place\n   *\n   * @class Tap\n   * @static\n   */\n  /**\n   * @event tap\n   * @param {Object} ev\n   */\n  /**\n   * @event doubletap\n   * @param {Object} ev\n   */\n\n  /**\n   * @param {String} name\n   */\n  (function(name) {\n    var hasMoved = false;\n\n    function tapGesture(ev, inst) {\n      var options = inst.options,\n          current = Detection.current,\n          prev = Detection.previous,\n          sincePrev,\n          didDoubleTap;\n\n      switch(ev.eventType) {\n      case EVENT_START:\n        hasMoved = false;\n        break;\n\n      case EVENT_MOVE:\n        hasMoved = hasMoved || (ev.distance > options.tapMaxDistance);\n        break;\n\n      case EVENT_END:\n        if(!Utils.inStr(ev.srcEvent.type, 'cancel') && ev.deltaTime < options.tapMaxTime && !hasMoved) {\n          // previous gesture, for the double tap since these are two different gesture detections\n          sincePrev = prev && prev.lastEvent && ev.timeStamp - prev.lastEvent.timeStamp;\n          didDoubleTap = false;\n\n          // check if double tap\n          if(prev && prev.name == name &&\n            (sincePrev && sincePrev < options.doubleTapInterval) &&\n            ev.distance < options.doubleTapDistance) {\n            inst.trigger('doubletap', ev);\n            didDoubleTap = true;\n          }\n\n          // do a single tap\n          if(!didDoubleTap || options.tapAlways) {\n            current.name = name;\n            inst.trigger(current.name, ev);\n          }\n        }\n        break;\n      }\n    }\n\n    GestureDetector.gestures.Tap = {\n      name: name,\n      index: 100,\n      handler: tapGesture,\n      defaults: {\n        /**\n         * max time of a tap, this is for the slow tappers\n         * @property tapMaxTime\n         * @type {Number}\n         * @default 250\n         */\n        tapMaxTime: 250,\n\n        /**\n         * max distance of movement of a tap, this is for the slow tappers\n         * @property tapMaxDistance\n         * @type {Number}\n         * @default 10\n         */\n        tapMaxDistance: 10,\n\n        /**\n         * always trigger the `tap` event, even while double-tapping\n         * @property tapAlways\n         * @type {Boolean}\n         * @default true\n         */\n        tapAlways: true,\n\n        /**\n         * max distance between two taps\n         * @property doubleTapDistance\n         * @type {Number}\n         * @default 20\n         */\n        doubleTapDistance: 20,\n\n        /**\n         * max time between two taps\n         * @property doubleTapInterval\n         * @type {Number}\n         * @default 300\n         */\n        doubleTapInterval: 300\n      }\n    };\n  })('tap');\n\n  /**\n   * @module gestures\n   */\n  /**\n   * when a touch is being touched at the page\n   *\n   * @class Touch\n   * @static\n   */\n  /**\n   * @event touch\n   * @param {Object} ev\n   */\n  GestureDetector.gestures.Touch = {\n    name: 'touch',\n    index: -Infinity,\n    defaults: {\n      /**\n       * call preventDefault at touchstart, and makes the element blocking by disabling the scrolling of the page,\n       * but it improves gestures like transforming and dragging.\n       * be careful with using this, it can be very annoying for users to be stuck on the page\n       * @property preventDefault\n       * @type {Boolean}\n       * @default false\n       */\n      preventDefault: false,\n\n      /**\n       * disable mouse events, so only touch (or pen!) input triggers events\n       * @property preventMouse\n       * @type {Boolean}\n       * @default false\n       */\n      preventMouse: false\n    },\n    handler: function touchGesture(ev, inst) {\n      if(inst.options.preventMouse && ev.pointerType == POINTER_MOUSE) {\n        ev.stopDetect();\n        return;\n      }\n\n      if(inst.options.preventDefault) {\n        ev.preventDefault();\n      }\n\n      if(ev.eventType == EVENT_TOUCH) {\n        inst.trigger('touch', ev);\n      }\n    }\n  };\n\n  /**\n   * @module gestures\n   */\n  /**\n   * User want to scale or rotate with 2 fingers\n   * Preventing the default browser behavior is a good way to improve feel and working. This can be done with the\n   * `preventDefault` option.\n   *\n   * @class Transform\n   * @static\n   */\n  /**\n   * @event transform\n   * @param {Object} ev\n   */\n  /**\n   * @event transformstart\n   * @param {Object} ev\n   */\n  /**\n   * @event transformend\n   * @param {Object} ev\n   */\n  /**\n   * @event pinchin\n   * @param {Object} ev\n   */\n  /**\n   * @event pinchout\n   * @param {Object} ev\n   */\n  /**\n   * @event rotate\n   * @param {Object} ev\n   */\n\n  /**\n   * @param {String} name\n   */\n  (function(name) {\n    var triggered = false;\n\n    function transformGesture(ev, inst) {\n      switch(ev.eventType) {\n      case EVENT_START:\n        triggered = false;\n        break;\n\n      case EVENT_MOVE:\n        // at least multitouch\n        if(ev.touches.length < 2) {\n          return;\n        }\n\n        var scaleThreshold = Math.abs(1 - ev.scale);\n        var rotationThreshold = Math.abs(ev.rotation);\n\n        // when the distance we moved is too small we skip this gesture\n        // or we can be already in dragging\n        if(scaleThreshold < inst.options.transformMinScale &&\n          rotationThreshold < inst.options.transformMinRotation) {\n          return;\n        }\n\n        // we are transforming!\n        Detection.current.name = name;\n\n        // first time, trigger dragstart event\n        if(!triggered) {\n          inst.trigger(name + 'start', ev);\n          triggered = true;\n        }\n\n        inst.trigger(name, ev); // basic transform event\n\n        // trigger rotate event\n        if(rotationThreshold > inst.options.transformMinRotation) {\n          inst.trigger('rotate', ev);\n        }\n\n        // trigger pinch event\n        if(scaleThreshold > inst.options.transformMinScale) {\n          inst.trigger('pinch', ev);\n          inst.trigger('pinch' + (ev.scale < 1 ? 'in' : 'out'), ev);\n        }\n        break;\n\n      case EVENT_RELEASE:\n        if(triggered && ev.changedLength < 2) {\n          inst.trigger(name + 'end', ev);\n          triggered = false;\n        }\n        break;\n      }\n    }\n\n    GestureDetector.gestures.Transform = {\n      name: name,\n      index: 45,\n      defaults: {\n        /**\n         * minimal scale factor, no scale is 1, zoomin is to 0 and zoomout until higher then 1\n         * @property transformMinScale\n         * @type {Number}\n         * @default 0.01\n         */\n        transformMinScale: 0.01,\n\n        /**\n         * rotation in degrees\n         * @property transformMinRotation\n         * @type {Number}\n         * @default 1\n         */\n        transformMinRotation: 1\n      },\n\n      handler: transformGesture\n    };\n  })('transform');\n\nexport default GestureDetector;\n","import util from '../util';\nimport animit from '../animit';\nimport GestureDetector from '../gesture-detector';\n\nconst directionMap = {\n  vertical: {\n    axis: 'Y',\n    size: 'Height',\n    dir: ['up', 'down'],\n    t3d: ['0px, ', 'px, 0px']\n  },\n  horizontal: {\n    axis: 'X',\n    size: 'Width',\n    dir: ['left', 'right'],\n    t3d: ['', 'px, 0px, 0px']\n  }\n};\n\nexport default class Swiper {\n  constructor(params) {\n    // Parameters\n    const FALSE = (() => false);\n    `getInitialIndex getBubbleWidth isVertical isOverScrollable isCentered\n    isAutoScrollable refreshHook preChangeHook postChangeHook overScrollHook`\n      .split(/\\s+/)\n      .forEach(key => this[key] = params[key] || FALSE);\n\n    this.getElement = params.getElement; // Required\n    this.scrollHook = params.scrollHook; // Optional\n    this.itemSize = params.itemSize || '100%';\n\n    this.getAutoScrollRatio = (...args) => {\n      let ratio = params.getAutoScrollRatio && params.getAutoScrollRatio(...args);\n      ratio = typeof ratio === 'number' && ratio === ratio ? ratio : .5;\n      if (ratio < 0.0 || ratio > 1.0) {\n        throw new Error('Invalid auto-scroll-ratio ' + ratio + '. Must be between 0 and 1');\n      }\n      return ratio;\n    };\n\n    // Bind handlers\n    this.onDragStart = this.onDragStart.bind(this);\n    this.onDrag = this.onDrag.bind(this);\n    this.onDragEnd = this.onDragEnd.bind(this);\n    this.onResize = this.onResize.bind(this);\n  }\n\n  init({ swipeable, autoRefresh } = {}) {\n    this.initialized = true;\n    this.target = this.getElement().children[0];\n    this.blocker = this.getElement().children[1];\n    if (!this.target || !this.blocker) {\n      throw new Error('Expected \"target\" and \"blocker\" elements to exist before initializing Swiper.');\n    }\n\n    // Add classes\n    this.getElement().classList.add('ons-swiper');\n    this.target.classList.add('ons-swiper-target');\n    this.blocker.classList.add('ons-swiper-blocker');\n\n    // Setup listeners\n    this._gestureDetector = new GestureDetector(this.getElement(), { dragMinDistance: 1, dragLockToAxis: true });\n    this._mutationObserver = new MutationObserver(() => this.refresh());\n    this.updateSwipeable(swipeable);\n    this.updateAutoRefresh(autoRefresh);\n    this.resizeOn();\n\n    // Setup initial layout\n    this._scroll = this._offset = this._lastActiveIndex = 0;\n    this._updateLayout();\n    this._setupInitialIndex();\n    setImmediate(() => this.initialized && this._setupInitialIndex());\n\n    // Fix rendering glitch on Android 4.1\n    if (this.offsetHeight === 0) {\n      setImmediate(() => this.refresh());\n    }\n  }\n\n  dispose() {\n    this.initialized = false;\n    this.updateSwipeable(false);\n    this.updateAutoRefresh(false);\n\n    this._gestureDetector && this._gestureDetector.dispose();\n    this.target = this.blocker = this._gestureDetector = this._mutationObserver = null;\n\n    this.resizeOff();\n  }\n\n  onResize() {\n    const i = this._scroll / this.targetSize;\n    this._reset();\n    this.setActiveIndex(i);\n    this.refresh();\n  }\n\n  get itemCount() {\n    return this.target.children.length;\n  }\n\n  get itemNumSize() {\n    if (typeof this._itemNumSize !== 'number' || this._itemNumSize !== this._itemNumSize) {\n      this._itemNumSize = this._calculateItemSize();\n    }\n    return this._itemNumSize;\n  }\n\n  get maxScroll() {\n    const max = this.itemCount * this.itemNumSize - this.targetSize;\n    return Math.ceil(max < 0 ? 0 : max); // Need to return an integer value.\n  }\n\n  _calculateItemSize() {\n    const matches = this.itemSize.match(/^(\\d+)(px|%)/);\n\n    if (!matches) {\n      throw new Error(`Invalid state: swiper's size unit must be '%' or 'px'`);\n    }\n\n    const value = parseInt(matches[1], 10);\n    return matches[2] === '%' ? Math.round(value / 100 * this.targetSize) : value;\n  }\n\n  _setupInitialIndex() {\n    this._reset();\n    this._lastActiveIndex = Math.max(Math.min(Number(this.getInitialIndex()), this.itemCount), 0);\n    this._scroll = this._offset + this.itemNumSize * this._lastActiveIndex;\n    this._scrollTo(this._scroll);\n  }\n\n  setActiveIndex(index, options = {}) {\n    index = Math.max(0, Math.min(index, this.itemCount - 1));\n    const scroll = Math.max(0, Math.min(this.maxScroll, this._offset + this.itemNumSize * index));\n    return this._changeTo(scroll, options);\n  }\n\n  getActiveIndex(scroll = this._scroll) {\n    scroll -= this._offset;\n    const count = this.itemCount,\n      size = this.itemNumSize;\n\n    if (scroll < 0) {\n      return 0;\n    }\n\n    for (let i = 0; i < count; i++) {\n      if (size * i <= scroll && size * (i + 1) > scroll) {\n        return i;\n      }\n    }\n\n    return count - 1;\n  }\n\n  resizeOn() {\n    window.addEventListener('resize', this.onResize, true);\n  }\n\n  resizeOff() {\n    window.removeEventListener('resize', this.onResize, true);\n  }\n\n  updateSwipeable(shouldUpdate) {\n    if (this._gestureDetector) {\n      const action = shouldUpdate ? 'on' : 'off';\n      this._gestureDetector[action]('drag', this.onDrag);\n      this._gestureDetector[action]('dragstart', this.onDragStart);\n      this._gestureDetector[action]('dragend', this.onDragEnd);\n    }\n  }\n\n  updateAutoRefresh(shouldWatch) {\n    if (this._mutationObserver) {\n      shouldWatch\n        ? this._mutationObserver.observe(this.target, { childList: true })\n        : this._mutationObserver.disconnect();\n    }\n  }\n\n  updateItemSize(newSize) {\n    this.itemSize = newSize || '100%';\n    this.refresh();\n  }\n\n  toggleBlocker(block) {\n    this.blocker.style.pointerEvents = block ? 'auto' : 'none';\n  }\n\n  _canConsumeGesture(gesture) {\n    const d = gesture.direction;\n    const isFirst = this._scroll === 0 && !this.isOverScrollable();\n    const isLast = this._scroll === this.maxScroll && !this.isOverScrollable();\n\n    return this.isVertical()\n      ? ((d === 'down' && !isFirst) || (d === 'up' && !isLast))\n      : ((d === 'right' && !isFirst) || (d === 'left' && !isLast));\n  }\n\n  onDragStart(event) {\n    this._ignoreDrag = event.consumed;\n\n    // distance and deltaTime filter some weird dragstart events that are not fired immediately\n    if (event.gesture && !this._ignoreDrag && (event.gesture.distance <= 15 || event.gesture.deltaTime <= 100)) {\n      const consume = event.consume;\n      event.consume = () => { consume && consume(); this._ignoreDrag = true; };\n\n      if (this._canConsumeGesture(event.gesture)) {\n        const startX = event.gesture.center && event.gesture.center.clientX || 0,\n          distFromEdge = this.getBubbleWidth() || 0,\n          start = () => {\n            consume && consume();\n            event.consumed = true;\n            this._started = true; // Avoid starting drag from outside\n            this.toggleBlocker(true);\n            util.preventScroll(this._gestureDetector);\n          };\n\n        // Let parent elements consume the gesture or consume it right away\n        startX < distFromEdge || startX > (this.targetSize - distFromEdge)\n          ? setImmediate(() => !this._ignoreDrag && start())\n          : start();\n      }\n    }\n  }\n\n  onDrag(event) {\n    if (!event.gesture || this._ignoreDrag || !this._started) {\n      return;\n    }\n\n    this._continued = true; // Fix for random 'dragend' without 'drag'\n    event.stopPropagation();\n\n    this._scrollTo(this._scroll - this._getDelta(event), { throttle: true });\n  }\n\n  onDragEnd(event) {\n    this._started = false;\n    if (!event.gesture || this._ignoreDrag || !this._continued) {\n      this._ignoreDrag = true; // onDragEnd might fire before onDragStart's setImmediate\n      return;\n    }\n\n    this._continued = false;\n    event.stopPropagation();\n\n    const scroll = this._scroll - this._getDelta(event);\n    const normalizedScroll = this._normalizeScroll(scroll);\n    scroll === normalizedScroll ? this._startMomentumScroll(scroll, event) : this._killOverScroll(normalizedScroll);\n    this.toggleBlocker(false);\n  }\n\n  _startMomentumScroll(scroll, event) {\n    const velocity = this._getVelocity(event),\n      matchesDirection = event.gesture.interimDirection === this.dM.dir[Math.min(Math.sign(this._getDelta(event)) + 1, 1)];\n\n    const nextScroll = this._getAutoScroll(scroll, velocity, matchesDirection);\n    let duration = Math.abs(nextScroll - scroll) / (velocity + 0.01) / 1000;\n    duration = Math.min(.25, Math.max(.1, duration));\n\n    this._changeTo(nextScroll, { swipe: true, animationOptions: { duration, timing: 'cubic-bezier(.4, .7, .5, 1)' } });\n  }\n\n  _killOverScroll(scroll) {\n    this._scroll = scroll;\n    const direction = this.dM.dir[Number(scroll > 0)];\n    const killOverScroll = () => this._changeTo(scroll, { animationOptions: { duration: .4, timing: 'cubic-bezier(.1, .4, .1, 1)' } });\n    this.overScrollHook({ direction, killOverScroll }) || killOverScroll();\n  }\n\n  _changeTo(scroll, options = {}) {\n    const e = { activeIndex: this.getActiveIndex(scroll), lastActiveIndex: this._lastActiveIndex, swipe: options.swipe || false };\n    const change = e.activeIndex !== e.lastActiveIndex;\n    const canceled = change ? this.preChangeHook(e) : false;\n\n    this._scroll = canceled ? this._offset + e.lastActiveIndex * this.itemNumSize : scroll;\n    this._lastActiveIndex = canceled ? e.lastActiveIndex : e.activeIndex;\n\n    return this._scrollTo(this._scroll, options).then(() => {\n      if (scroll === this._scroll && !canceled) {\n        change && this.postChangeHook(e);\n      } else if (options.reject) {\n        return Promise.reject('Canceled');\n      }\n    });\n  }\n\n  _scrollTo(scroll, options = {}) {\n    if (options.throttle) {\n      const ratio = 0.35;\n      if (scroll < 0) {\n        scroll = this.isOverScrollable() ? Math.round(scroll * ratio) : 0;\n      } else {\n        const maxScroll = this.maxScroll;\n        if (maxScroll < scroll) {\n          scroll = this.isOverScrollable() ? maxScroll + Math.round((scroll - maxScroll) * ratio) : maxScroll;\n        }\n      }\n    }\n\n    const opt = options.animation  === 'none' ? {} :  options.animationOptions;\n    this.scrollHook && this.itemNumSize > 0 && this.scrollHook((scroll / this.itemNumSize).toFixed(2), options.animationOptions || {});\n    return new Promise(resolve => animit(this.target).queue({ transform: this._getTransform(scroll) }, opt).play(resolve));\n  }\n\n  _getAutoScroll(scroll, velocity, matchesDirection) {\n    const max = this.maxScroll,\n      offset = this._offset,\n      size = this.itemNumSize;\n\n    if (!this.isAutoScrollable()) {\n      return Math.max(0, Math.min(max, scroll));\n    }\n\n    let arr = [];\n    for (let s = offset; s < max; s += size) {\n      arr.push(s);\n    }\n    arr.push(max);\n\n    arr = arr\n      .sort((left, right) => Math.abs(left - scroll) - Math.abs(right - scroll))\n      .filter((item, pos) => !pos || item !== arr[pos - 1]);\n\n    let result = arr[0];\n    const lastScroll = this._lastActiveIndex * size + offset;\n    const scrollRatio = Math.abs(scroll - lastScroll) / size;\n\n    if (scrollRatio <= this.getAutoScrollRatio(matchesDirection, velocity, size)) {\n      result = lastScroll;\n    } else {\n      if (scrollRatio < 1.0 && arr[0] === lastScroll && arr.length > 1) {\n        result = arr[1];\n      }\n    }\n    return Math.max(0, Math.min(max, result));\n  }\n\n  _reset() {\n    this._targetSize = this._itemNumSize = undefined;\n  }\n\n  _normalizeScroll(scroll) {\n    return Math.max( Math.min(scroll, this.maxScroll), 0)\n  }\n\n  refresh() {\n    this._reset();\n    this._updateLayout();\n\n    const scroll = this._normalizeScroll(this._scroll);\n    scroll !== this._scroll ? this._killOverScroll(scroll) : this._changeTo(scroll);\n\n    this.refreshHook();\n  }\n\n  get targetSize() {\n    if (!this._targetSize) {\n      this._targetSize = this.target[`offset${this.dM.size}`];\n    }\n    return this._targetSize;\n  }\n\n  _getDelta(event) {\n    return event.gesture[`delta${this.dM.axis}`];\n  }\n\n  _getVelocity(event) {\n    return event.gesture[`velocity${this.dM.axis}`];\n  }\n\n  _getTransform(scroll) {\n    return `translate3d(${this.dM.t3d[0]}${-scroll}${this.dM.t3d[1]})`;\n  }\n\n  _updateLayout() {\n    this.dM = directionMap[this.isVertical() ? 'vertical' : 'horizontal'];\n    this.target.classList.toggle('ons-swiper-target--vertical', this.isVertical());\n\n    for (let c = this.target.children[0]; c; c = c.nextElementSibling) {\n      c.style[this.dM.size.toLowerCase()] = this.itemSize;\n    }\n\n    if (this.isCentered()) {\n      this._offset = (this.targetSize - this.itemNumSize) / -2 || 0;\n    }\n  }\n}\n\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../util';\nimport platform from '../platform';\nimport pageAttributeExpression from '../page-attribute-expression';\nimport Swiper from './swiper';\n\nconst internal = {};\n\ninternal.config = {\n  autoStatusBarFill: true,\n  animationsDisabled: false,\n  warningsDisabled: false\n};\n\ninternal.nullElement = window.document.createElement('div');\n\ninternal.Swiper = Swiper;\n\n/**\n * @return {Boolean}\n */\ninternal.isEnabledAutoStatusBarFill = () => {\n  return !!internal.config.autoStatusBarFill;\n};\n\n/**\n * @param {String} html\n * @return {String}\n */\ninternal.normalizePageHTML = html => ('' + html).trim();\n\ninternal.waitDOMContentLoaded = callback => {\n  if (window.document.readyState === 'loading' || window.document.readyState == 'uninitialized') {\n    const wrappedCallback = () => {\n      callback();\n      window.document.removeEventListener('DOMContentLoaded', wrappedCallback);\n    };\n    window.document.addEventListener('DOMContentLoaded', wrappedCallback);\n  } else {\n    setImmediate(callback);\n  }\n};\n\ninternal.autoStatusBarFill = action => {\n  const onReady = () => {\n    if (internal.shouldFillStatusBar()) {\n      action();\n    }\n    document.removeEventListener('deviceready', onReady);\n  };\n\n  if (typeof device === 'object') {\n    document.addEventListener('deviceready', onReady);\n  } else if (['complete', 'interactive'].indexOf(document.readyState) === -1) {\n    internal.waitDOMContentLoaded(onReady);\n  } else {\n    onReady();\n  }\n};\n\ninternal.shouldFillStatusBar = () => internal.isEnabledAutoStatusBarFill() &&\n  (platform.isWebView() && platform.isIOS7above() || document.body.querySelector('.ons-status-bar-mock'));\n\ninternal.templateStore = {\n  _storage: {},\n\n  /**\n   * @param {String} key\n   * @return {String/null} template\n   */\n  get(key) {\n    return internal.templateStore._storage[key] || null;\n  },\n\n  /**\n   * @param {String} key\n   * @param {String} template\n   */\n  set(key, template) {\n    internal.templateStore._storage[key] = template;\n  }\n};\n\nwindow.document.addEventListener('_templateloaded', function(e) {\n  if (e.target.nodeName.toLowerCase() === 'ons-template') {\n    internal.templateStore.set(e.templateId, e.template);\n  }\n}, false);\n\ninternal.waitDOMContentLoaded(function() {\n  register('script[type=\"text/ons-template\"]');\n  register('script[type=\"text/template\"]');\n  register('script[type=\"text/ng-template\"]');\n  register('template');\n\n  function register(query) {\n    const templates = window.document.querySelectorAll(query);\n    for (let i = 0; i < templates.length; i++) {\n      internal.templateStore.set(templates[i].getAttribute('id'), templates[i].textContent || templates[i].content);\n    }\n  }\n});\n\n/**\n * @param {String} page\n * @return {Promise}\n */\ninternal.getTemplateHTMLAsync = function(page) {\n  return new Promise((resolve, reject) => {\n    internal.waitDOMContentLoaded(() => {\n      const cache = internal.templateStore.get(page);\n      if (cache) {\n        if (cache instanceof DocumentFragment) {\n          return resolve(cache);\n        }\n\n        const html = typeof cache === 'string' ? cache : cache[1];\n        return resolve(internal.normalizePageHTML(html));\n      }\n\n      const local = window.document.getElementById(page);\n      if (local) {\n        const html = local.textContent || local.content;\n        return resolve(html);\n      }\n\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET', page, true);\n      xhr.onload = function() {\n        const html = xhr.responseText;\n        if (xhr.status >= 400 && xhr.status < 600) {\n          reject(html);\n        } else {\n          const fragment = util.createFragment(html);\n          internal.templateStore.set(page, fragment);\n          resolve(fragment);\n        }\n      };\n      xhr.onerror = function() {\n        throw new Error(`The page is not found: ${page}`);\n      };\n      xhr.send(null);\n    });\n  });\n};\n\n/**\n * @param {String} page\n * @return {Promise}\n */\ninternal.getPageHTMLAsync = function(page) {\n  const pages = pageAttributeExpression.evaluate(page);\n\n  const getPage = (page) => {\n    if (typeof page !== 'string') {\n      return Promise.reject('Must specify a page.');\n    }\n\n    return internal.getTemplateHTMLAsync(page)\n      .catch(function(error) {\n        if (pages.length === 0) {\n          return Promise.reject(error);\n        }\n\n        return getPage(pages.shift());\n      });\n  };\n\n  return getPage(pages.shift());\n};\n\nexport default internal;\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../util';\nimport internal from '../internal';\n\nexport default class AnimatorFactory {\n\n  /**\n   * @param {Object} opts\n   * @param {Object} opts.animators The dictionary for animator classes\n   * @param {Function} opts.baseClass The base class of animators\n   * @param {String} [opts.baseClassName] The name of the base class of animators\n   * @param {String} [opts.defaultAnimation] The default animation name\n   * @param {Object} [opts.defaultAnimationOptions] The default animation options\n   */\n  constructor(opts) {\n    this._animators = opts.animators;\n    this._baseClass = opts.baseClass;\n    this._baseClassName = opts.baseClassName || opts.baseClass.name;\n    this._animation = opts.defaultAnimation || 'default';\n    this._animationOptions = opts.defaultAnimationOptions || {};\n\n    if (!this._animators[this._animation]) {\n      throw new Error('No such animation: ' + this._animation);\n    }\n  }\n\n  /**\n   * @param {String} jsonString\n   * @return {Object/null}\n   */\n  static parseAnimationOptionsString(jsonString) {\n    try {\n      if (typeof jsonString === 'string') {\n        const result = util.animationOptionsParse(jsonString);\n        if (typeof result === 'object' && result !== null) {\n          return result;\n        } else {\n          console.error('\"animation-options\" attribute must be a JSON object string: ' + jsonString);\n        }\n      }\n      return {};\n    } catch (e) {\n      console.error('\"animation-options\" attribute must be a JSON object string: ' + jsonString);\n      return {};\n    }\n  }\n\n  /**\n   * @param {Object} options\n   */\n  setAnimationOptions(options) {\n    this._animationOptions = options;\n  }\n\n  /**\n   * @param {Object} options\n   * @param {String} [options.animation] The animation name\n   * @param {Object} [options.animationOptions] The animation options\n   * @param {Object} defaultAnimator The default animator instance\n   * @return {Object} An animator instance\n   */\n  newAnimator(options = {}, defaultAnimator) {\n\n    let animator = null;\n\n    if (options.animation instanceof this._baseClass) {\n      return options.animation;\n    }\n\n    let Animator = null;\n\n    if (typeof options.animation === 'string') {\n      Animator = this._animators[options.animation];\n    }\n\n    if (!Animator && defaultAnimator) {\n      animator = defaultAnimator;\n    } else {\n      Animator = Animator || this._animators[this._animation];\n\n      const animationOpts = util.extend(\n        {},\n        this._animationOptions,\n        options.animationOptions || {},\n        internal.config.animationsDisabled ? {duration: 0, delay: 0} : {}\n      );\n\n      animator = new Animator(animationOpts);\n\n      if (typeof animator === 'function') {\n        animator = new animator(animationOpts); // eslint-disable-line new-cap\n      }\n    }\n\n    if (!(animator instanceof this._baseClass)) {\n      throw new Error('\"animator\" is not an instance of ' + this._baseClassName + '.');\n    }\n\n    return animator;\n  }\n}\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport onsPlatform from './platform';\nimport util from './util';\n\nlet autoStyleEnabled = true;\n\n// Modifiers\nconst modifiersMap = {\n  'quiet': 'material--flat',\n  'light': 'material--flat',\n  'outline': 'material--flat',\n  'cta': '',\n  'large--quiet': 'material--flat large',\n  'large--cta': 'large',\n  'noborder': '',\n  'tappable': ''\n};\n\nconst platforms = {};\n\nplatforms.android = element => {\n\n  const elementName = element.tagName.toLowerCase();\n\n  if (!util.hasModifier(element, 'material')) {\n    const oldModifier = element.getAttribute('modifier') || '';\n\n    const newModifier = oldModifier.trim().split(/\\s+/).map(e => modifiersMap.hasOwnProperty(e) ? modifiersMap[e] : e);\n    newModifier.unshift('material');\n\n    element.setAttribute('modifier', newModifier.join(' ').trim());\n  }\n\n  const elements = [\n    'ons-alert-dialog-button',\n    'ons-toolbar-button',\n    'ons-back-button',\n    'ons-button',\n    'ons-list-item',\n    'ons-fab',\n    'ons-speed-dial',\n    'ons-speed-dial-item',\n    'ons-tab'\n  ];\n\n\n  // Effects\n  if (elements.indexOf(elementName) !== -1\n    && !element.hasAttribute('ripple')\n    && !element.querySelector('ons-ripple')) {\n\n    if (elementName === 'ons-list-item') {\n      if (element.hasAttribute('tappable')) {\n        element.setAttribute('ripple', '');\n        element.removeAttribute('tappable');\n      }\n    } else {\n      element.setAttribute('ripple', '');\n    }\n  }\n};\n\nplatforms.ios = element => {\n\n // Modifiers\n if (util.removeModifier(element, 'material')) {\n   if (util.removeModifier(element, 'material--flat')) {\n     util.addModifier(element, (util.removeModifier(element, 'large')) ? 'large--quiet' : 'quiet');\n   }\n\n   if (!element.getAttribute('modifier')) {\n     element.removeAttribute('modifier');\n   }\n }\n\n // Effects\n if (element.hasAttribute('ripple')) {\n   if (element.tagName.toLowerCase() === 'ons-list-item') {\n     element.setAttribute('tappable', '');\n   }\n\n   element.removeAttribute('ripple');\n }\n};\n\nconst unlocked = {\n  android: true\n};\n\nconst getPlatform = (element, force) => {\n  if (autoStyleEnabled && !element.hasAttribute('disable-auto-styling')) {\n    const mobileOS = onsPlatform.getMobileOS();\n    if (platforms.hasOwnProperty(mobileOS) && (unlocked.hasOwnProperty(mobileOS) || force)) {\n      return mobileOS;\n    }\n  }\n  return null;\n};\n\nconst prepare = (element, force) => {\n  const p = getPlatform(element, force);\n  p && platforms[p](element);\n};\n\nconst mapModifier = (modifier, element, force) => {\n  if (getPlatform(element, force)) {\n    return modifier.split(/\\s+/).map(m => modifiersMap.hasOwnProperty(m) ? modifiersMap[m] : m).join(' ');\n  }\n  return modifier;\n};\n\nconst restoreModifier = element => {\n  if (getPlatform(element) === 'android') {\n    const modifier = element.getAttribute('modifier') || '';\n    let newModifier = mapModifier(modifier, element);\n\n    if (!/(^|\\s+)material($|\\s+)/i.test(modifier)) {\n      newModifier = 'material ' + newModifier;\n    }\n\n    if (newModifier !== modifier) {\n      element.setAttribute('modifier', newModifier.trim());\n      return true;\n    }\n  }\n  return false;\n};\n\nexport default {\n  isEnabled: () => autoStyleEnabled,\n  enable: () => autoStyleEnabled = true,\n  disable: () => autoStyleEnabled = false,\n  prepare,\n  mapModifier,\n  getPlatform,\n  restoreModifier\n};\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../util.js';\nimport autoStyle from '../autostyle.js';\n\nexport default class ModifierUtil {\n  /**\n   * @param {String} last\n   * @param {String} current\n   */\n  static diff(last, current) {\n    last = makeDict(('' + last).trim());\n    current = makeDict(('' + current).trim());\n\n    const removed = Object.keys(last).reduce((result, token) => {\n      if (!current[token]) {\n        result.push(token);\n      }\n      return result;\n    }, []);\n\n    const added = Object.keys(current).reduce((result, token) => {\n      if (!last[token]) {\n        result.push(token);\n      }\n      return result;\n    }, []);\n\n    return {added, removed};\n\n    function makeDict(modifier) {\n      const dict = {};\n      ModifierUtil.split(modifier).forEach(token => dict[token] = token);\n      return dict;\n    }\n  }\n\n  /**\n   * @param {Object} diff\n   * @param {Array} diff.removed\n   * @param {Array} diff.added\n   * @param {Object} classList\n   * @param {String} template\n   */\n  static applyDiffToClassList(diff, classList, template) {\n    diff.added\n      .map(modifier => template.replace(/\\*/g, modifier))\n      .forEach(klass => klass.split(/\\s+/).forEach(k => classList.add(k)));\n\n    diff.removed\n      .map(modifier => template.replace(/\\*/g, modifier))\n      .forEach(klass => klass.split(/\\s+/).forEach(k => classList.remove(k)));\n  }\n\n  /**\n   * @param {Object} diff\n   * @param {Array} diff.removed\n   * @param {Array} diff.added\n   * @param {HTMLElement} element\n   * @param {Object} scheme\n   */\n  static applyDiffToElement(diff, element, scheme) {\n    Object.keys(scheme).forEach(selector => {\n      const targetElements = !selector || util.match(element, selector) ? [element] : element.querySelectorAll(selector);\n      for (let i = 0; i < targetElements.length; i++) {\n        ModifierUtil.applyDiffToClassList(diff, targetElements[i].classList, scheme[selector]);\n      }\n    });\n  }\n\n  /**\n   * @param {String} last\n   * @param {String} current\n   * @param {HTMLElement} element\n   * @param {Object} scheme\n   */\n  static onModifierChanged(last, current, element, scheme) {\n    ModifierUtil.applyDiffToElement(ModifierUtil.diff(last, current), element, scheme);\n    autoStyle.restoreModifier(element);\n  }\n\n  static refresh(element, scheme) {\n    ModifierUtil.applyDiffToElement(ModifierUtil.diff('', element.getAttribute('modifier') || ''), element, scheme);\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @param {Object} scheme\n   */\n  static initModifier(element, scheme) {\n    const modifier = element.getAttribute('modifier');\n    if (typeof modifier !== 'string') {\n      return;\n    }\n\n    ModifierUtil.applyDiffToElement({\n      removed: [],\n      added: ModifierUtil.split(modifier)\n    }, element, scheme);\n  }\n\n  static split(modifier) {\n    if (typeof modifier !== 'string') {\n      return [];\n    }\n\n    return modifier.trim().split(/ +/).filter(token => token !== '');\n  }\n\n  /**\n   * Add modifier token to an element.\n   */\n  static addModifier(element, modifierToken) {\n    if (!element.hasAttribute('modifier')) {\n      element.setAttribute('modifier', modifierToken);\n    } else {\n      const tokens = ModifierUtil.split(element.getAttribute('modifier'));\n      if (tokens.indexOf(modifierToken) == -1) {\n        tokens.push(modifierToken);\n        element.setAttribute('modifier', tokens.join(' '));\n      }\n    }\n  }\n\n  /**\n   * Remove modifier token from an element.\n   */\n  static removeModifier(element, modifierToken) {\n    if (element.hasAttribute('modifier')) {\n      const tokens = ModifierUtil.split(element.getAttribute('modifier'));\n      const index = tokens.indexOf(modifierToken);\n      if (index !== -1) {\n        tokens.splice(index, 1);\n        element.setAttribute('modifier', tokens.join(' '));\n      }\n    }\n  }\n}\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\nimport internal from './internal';\nimport AnimatorFactory from './animator-factory';\nimport ModifierUtil from './modifier-util';\n//import ToastQueue from './toast-queue';\n//import {LazyRepeatProvider, LazyRepeatDelegate} from './lazy-repeat';\n\ninternal.AnimatorFactory = AnimatorFactory;\ninternal.ModifierUtil = ModifierUtil;\n//internal.ToastQueue = ToastQueue;\n//internal.LazyRepeatProvider = LazyRepeatProvider;\n//internal.LazyRepeatDelegate = LazyRepeatDelegate;\n\nexport default internal;\n\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\n'use strict';\n\nconst unwrap = string => string.slice(1, -1);\nconst isObjectString = string => string.startsWith('{') && string.endsWith('}');\nconst isArrayString = string => string.startsWith('[') && string.endsWith(']');\nconst isQuotedString = string => (string.startsWith('\\'') && string.endsWith('\\'')) || (string.startsWith('\"') && string.endsWith('\"'));\n\nconst error = (token, string, originalString) => {\n  throw new Error('Unexpected token \\'' + token + '\\' at position ' + (originalString.length - string.length - 1) + ' in string: \\'' + originalString + '\\'');\n};\n\nconst processToken = (token, string, originalString) => {\n  if (token === 'true' || token === 'false') {\n    return token === 'true';\n  } else if (isQuotedString(token)) {\n    return unwrap(token);\n  } else if (!isNaN(token)) {\n    return +(token);\n  } else if (isObjectString(token)) {\n    return parseObject(unwrap(token));\n  } else if (isArrayString(token)) {\n    return parseArray(unwrap(token));\n  } else {\n    error(token, string, originalString);\n  }\n};\n\nconst nextToken = (string) => {\n  string = string.trimLeft();\n  let limit = string.length;\n\n  if (string[0] === ':' || string[0] === ',') {\n\n    limit = 1;\n\n  } else if (string[0] === '{' || string[0] === '[') {\n\n    const c = string.charCodeAt(0);\n    let nestedObject = 1;\n    for (let i = 1; i < string.length; i++) {\n      if (string.charCodeAt(i) === c) {\n        nestedObject++;\n      } else if (string.charCodeAt(i) === c + 2) {\n        nestedObject--;\n        if (nestedObject === 0) {\n          limit = i + 1;\n          break;\n        }\n      }\n    }\n\n  } else if (string[0] === '\\'' || string[0] === '\\\"') {\n\n    for (let i = 1; i < string.length; i++) {\n      if (string[i] === string[0]) {\n        limit = i + 1;\n        break;\n      }\n    }\n\n  } else {\n\n    for (let i = 1; i < string.length; i++) {\n      if ([' ', ',', ':'].indexOf(string[i]) !== -1) {\n        limit = i;\n        break;\n      }\n    }\n\n  }\n\n  return string.slice(0, limit);\n};\n\nconst parseObject = (string) => {\n  const isValidKey = key => /^[A-Z_\\$][A-Z0-9_\\$]*$/i.test(key);\n\n  string = string.trim();\n  const originalString = string;\n  const object = {};\n  let readingKey = true, key, previousToken, token;\n\n  while(string.length > 0) {\n    previousToken = token;\n    token = nextToken(string);\n    string = string.slice(token.length, string.length).trimLeft();\n\n    if ((token === ':' && (!readingKey || !previousToken || previousToken === ','))\n       || (token === ',' && readingKey)\n       || (token !== ':' && token !== ',' && (previousToken && previousToken !== ',' && previousToken !== ':'))) {\n      error(token, string, originalString);\n    } else if (token === ':' && readingKey && previousToken) {\n      previousToken = isQuotedString(previousToken) ? unwrap(previousToken) : previousToken;\n      if (isValidKey(previousToken)) {\n        key = previousToken;\n        readingKey = false;\n      } else {\n        throw new Error('Invalid key token \\'' + previousToken + '\\' at position 0 in string: \\'' + originalString + '\\'');\n      }\n    } else if (token === ',' && !readingKey && previousToken) {\n      object[key] = processToken(previousToken, string, originalString);\n      readingKey = true;\n    }\n  }\n\n  if (token) {\n    object[key] = processToken(token, string, originalString);\n  }\n\n  return object;\n};\n\nconst parseArray = (string) => {\n  string = string.trim();\n  const originalString = string;\n  const array = [];\n  let previousToken, token;\n\n  while(string.length > 0) {\n    previousToken = token;\n    token = nextToken(string);\n    string = string.slice(token.length, string.length).trimLeft();\n\n    if (token === ',' && (!previousToken || previousToken === ',')) {\n      error(token, string, originalString);\n    } else if (token === ',') {\n      array.push(processToken(previousToken, string, originalString));\n    }\n  }\n\n  if (token) {\n    if (token !== ',') {\n      array.push(processToken(token, string, originalString));\n    } else {\n      error(token, string, originalString);\n    }\n  }\n\n  return array;\n};\n\nconst parse = (string) => {\n  string = string.trim();\n\n  if (isObjectString(string)) {\n    return parseObject(unwrap(string));\n  } else if (isArrayString(string)) {\n    return parseArray(unwrap(string));\n  } else {\n    throw new Error('Provided string must be object or array like: ' + string);\n  }\n};\n\nexport default parse;\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport internal from './internal';\nimport autoStyle from './autostyle';\nimport ModifierUtil from './internal/modifier-util';\nimport animationOptionsParse from './animation-options-parser';\n\nconst util = {};\n\nutil.globals = {\n  fabOffset: 0\n};\n\n/**\n * @param {String/Function} query dot class name or node name or matcher function.\n * @return {Function}\n */\nutil.prepareQuery = (query) => {\n  return query instanceof Function ? query : (element) => util.match(element, query);\n};\n\n/**\n * @param {Element} e\n * @param {String/Function} s CSS Selector.\n * @return {Boolean}\n */\nutil.match = (e, s) => (e.matches || e.webkitMatchesSelector || e.mozMatchesSelector || e.msMatchesSelector).call(e, s);\n\n/**\n * @param {Element} element\n * @param {String/Function} query dot class name or node name or matcher function.\n * @return {HTMLElement/null}\n */\nutil.findChild = (element, query) => {\n  const match = util.prepareQuery(query);\n\n  // Caution: `element.children` is `undefined` in some environments if `element` is `svg`\n  for (let i = 0; i < element.childNodes.length; i++) {\n    const node = element.childNodes[i];\n    if (node.nodeType !== Node.ELEMENT_NODE) { // process only element nodes\n      continue;\n    }\n    if (match(node)) {\n      return node;\n    }\n  }\n  return null;\n};\n\n/**\n * @param {Element} element\n * @param {String/Function} query dot class name or node name or matcher function.\n * @return {HTMLElement/null}\n */\nutil.findParent = (element, query, until) => {\n  const match = util.prepareQuery(query);\n\n  let parent = element.parentNode;\n  for (;;) {\n    if (!parent || parent === document || (until && until(parent))) {\n      return null;\n    } else if (match(parent)) {\n      return parent;\n    }\n    parent = parent.parentNode;\n  }\n};\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nutil.isAttached = element => document.body.contains(element);\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nutil.hasAnyComponentAsParent = (element) => {\n  while (element && document.documentElement !== element) {\n    element = element.parentNode;\n    if (element && element.nodeName.toLowerCase().match(/(ons-navigator|ons-tabbar|ons-modal)/)) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/**\n * @param {Element} element\n * @return {boolean}\n */\nutil.isPageControl = element => element.nodeName.match(/^ons-(navigator|splitter|tabbar|page)$/i);\n\n/**\n * @param {Element} element\n * @param {String} action to propagate\n */\nutil.propagateAction = (element, action) => {\n  for (let i = 0; i < element.childNodes.length; i++) {\n    const child = element.childNodes[i];\n    if (child[action] instanceof Function) {\n      child[action]();\n    } else {\n      util.propagateAction(child, action);\n    }\n  }\n};\n\n/**\n * @param {String} string - string to be camelized\n * @return {String} Camelized string\n */\nutil.camelize = string => string.toLowerCase().replace(/-([a-z])/g, (m, l) => l.toUpperCase());\n\n/**\n * @param {String} selector - tag and class only\n * @param {Object} style\n * @param {Element}\n */\nutil.create = (selector = '', style = {}) => {\n  const classList = selector.split('.');\n  const element = document.createElement(classList.shift() || 'div');\n\n  if (classList.length) {\n    element.className = classList.join(' ');\n  }\n\n  util.extend(element.style, style);\n\n  return element;\n};\n\n/**\n * @param {String} html\n * @return {Element}\n */\nutil.createElement = (html) => {\n  const wrapper = document.createElement('div');\n\n  if (html instanceof DocumentFragment) {\n    wrapper.appendChild(document.importNode(html, true));\n  } else {\n    wrapper.innerHTML = html.trim();\n  }\n\n  if (wrapper.children.length > 1) {\n    throw new Error('\"html\" must be one wrapper element.');\n  }\n\n  const element = wrapper.children[0];\n  wrapper.children[0].remove();\n  return element;\n};\n\n/**\n * @param {String} html\n * @return {HTMLFragment}\n */\nutil.createFragment = (html) => {\n  const wrapper = document.createElement('div');\n  wrapper.innerHTML = html;\n  const fragment = document.createDocumentFragment();\n\n  while (wrapper.firstChild) {\n    fragment.appendChild(wrapper.firstChild);\n  }\n\n  return fragment;\n};\n\n/*\n * @param {Object} dst Destination object.\n * @param {...Object} src Source object(s).\n * @returns {Object} Reference to `dst`.\n */\nutil.extend = (dst, ...args) => {\n  for (let i = 0; i < args.length; i++) {\n    if (args[i]) {\n      const keys = Object.keys(args[i]);\n      for (let j = 0; j < keys.length; j++) {\n        const key = keys[j];\n        dst[key] = args[i][key];\n      }\n    }\n  }\n\n  return dst;\n};\n\n/**\n * @param {Object} arrayLike\n * @return {Array}\n */\nutil.arrayFrom = (arrayLike) => {\n  return Array.prototype.slice.apply(arrayLike);\n};\n\n/**\n * @param {String} jsonString\n * @param {Object} [failSafe]\n * @return {Object}\n */\nutil.parseJSONObjectSafely = (jsonString, failSafe = {}) => {\n  try {\n    const result = JSON.parse('' + jsonString);\n    if (typeof result === 'object' && result !== null) {\n      return result;\n    }\n  } catch(e) {\n    return failSafe;\n  }\n  return failSafe;\n};\n\n/**\n * @param {String} path - path such as 'myApp.controllers.data.loadData'\n * @return {Any} - whatever is located at that path\n */\nutil.findFromPath = (path) => {\n  path = path.split('.');\n  var el = window, key;\n  while (key = path.shift()) { // eslint-disable-line no-cond-assign\n    el = el[key];\n  }\n  return el;\n};\n\n/**\n * @param {HTMLElement} container - Page or page-container that implements 'topPage'\n * @return {HTMLElement|null} - Visible page element or null if not found.\n */\nutil.getTopPage = container => container && (container.tagName.toLowerCase() === 'ons-page' ? container : container.topPage) || null;\n\n/**\n * @param {HTMLElement} container - Element where the search begins\n * @return {HTMLElement|null} - Page element that contains the visible toolbar or null.\n */\nutil.findToolbarPage = container => {\n  const page = util.getTopPage(container);\n\n  if (page) {\n    if (page._canAnimateToolbar()) {\n      return page;\n    }\n\n    for (let i = 0; i < page._contentElement.children.length; i++) {\n      const nextPage = util.getTopPage(page._contentElement.children[i]);\n      if (nextPage && !/ons-tabbar/i.test(page._contentElement.children[i].tagName)) {\n        return util.findToolbarPage(nextPage);\n      }\n    }\n  }\n\n  return null;\n};\n\n/**\n * @param {Element} element\n * @param {String} eventName\n * @param {Object} [detail]\n * @return {CustomEvent}\n */\nutil.triggerElementEvent = (target, eventName, detail = {}) => {\n\n  const event = new CustomEvent(eventName, {\n    bubbles: true,\n    cancelable: true,\n    detail: detail\n  });\n\n  Object.keys(detail).forEach(key => {\n    event[key] = detail[key];\n  });\n\n  target.dispatchEvent(event);\n\n  return event;\n};\n\n/**\n * @param {Element} target\n * @param {String} modifierName\n * @return {Boolean}\n */\nutil.hasModifier = (target, modifierName) => {\n  if (!target.hasAttribute('modifier')) {\n    return false;\n  }\n\n  return RegExp(`(^|\\\\s+)${modifierName}($|\\\\s+)`, 'i').test(target.getAttribute('modifier'));\n};\n\n/**\n * @param {Element} target\n * @param {String} modifierName\n * @param {Object} options.autoStyle Maps the modifierName to the corresponding styled modifier.\n * @param {Object} options.forceAutoStyle Ignores platform limitation.\n * @return {Boolean} Whether it was added or not.\n */\nutil.addModifier = (target, modifierName, options = {}) => {\n  if (options.autoStyle) {\n    modifierName = autoStyle.mapModifier(modifierName, target, options.forceAutoStyle);\n  }\n\n  if (util.hasModifier(target, modifierName)) {\n    return false;\n  }\n\n  target.setAttribute('modifier', ((target.getAttribute('modifier') || '') + ' ' + modifierName).trim());\n  return true;\n};\n\n/**\n * @param {Element} target\n * @param {String} modifierName\n * @param {Object} options.autoStyle Maps the modifierName to the corresponding styled modifier.\n * @param {Object} options.forceAutoStyle Ignores platform limitation.\n * @return {Boolean} Whether it was found or not.\n */\nutil.removeModifier = (target, modifierName, options = {}) => {\n  if (options.autoStyle) {\n    modifierName = autoStyle.mapModifier(modifierName, target, options.forceAutoStyle);\n  }\n\n  if (!target.getAttribute('modifier') || !util.hasModifier(target, modifierName)) {\n    return false;\n  }\n\n  const newModifiers = target.getAttribute('modifier').split(/\\s+/).filter(m => m && m !== modifierName);\n  newModifiers.length ? target.setAttribute('modifier', newModifiers.join(' ')) : target.removeAttribute('modifier');\n  return true;\n};\n\n/**\n * @param {Element} target\n * @param {String} modifierName\n * @param {Boolean} options.force Forces modifier to be added or removed.\n * @param {Object} options.autoStyle Maps the modifierName to the corresponding styled modifier.\n * @param {Boolean} options.forceAutoStyle Ignores platform limitation.\n * @return {Boolean} Whether it was found or not.\n */\nutil.toggleModifier = (...args) => {\n  const options = args.length > 2 ? args[2] : {};\n  const force = typeof options === 'boolean' ? options : options.force;\n\n  const toggle = typeof force === 'boolean' ? force : !util.hasModifier(...args);\n  toggle ? util.addModifier(...args) : util.removeModifier(...args)\n};\n\n/**\n * @param {Element} el\n * @param {String} defaultClass\n * @param {Object} scheme\n */\nutil.restoreClass = (el, defaultClass, scheme) => {\n  defaultClass.split(/\\s+/).forEach(c => !el.classList.contains(c) && el.classList.add(c));\n  el.hasAttribute('modifier') && ModifierUtil.refresh(el, scheme);\n}\n\n// TODO: FIX\nutil.updateParentPosition = (el) => {\n  if (!el._parentUpdated && el.parentElement) {\n    if (window.getComputedStyle(el.parentElement).getPropertyValue('position') === 'static') {\n      el.parentElement.style.position = 'relative';\n    }\n    el._parentUpdated = true;\n  }\n};\n\nutil.toggleAttribute = (element, name, value) => {\n  if (value) {\n    element.setAttribute(name, typeof value === 'boolean' ? '' : value);\n  } else {\n    element.removeAttribute(name);\n  }\n};\n\nutil.bindListeners = (element, listenerNames) => {\n  listenerNames.forEach(name => {\n    const boundName = name.replace(/^_[a-z]/, '_bound' + name[1].toUpperCase());\n    element[boundName] = element[boundName] || element[name].bind(element);\n  });\n};\n\nutil.each = (obj, f) => Object.keys(obj).forEach(key => f(key, obj[key]));\n\n\n/**\n * @param {Element} target\n * @param {boolean} hasRipple\n * @param {Object} attrs\n */\nutil.updateRipple = (target, hasRipple, attrs = {}) => {\n  if (hasRipple === undefined) {\n    hasRipple = target.hasAttribute('ripple');\n  }\n\n  const rippleElement = util.findChild(target, 'ons-ripple');\n\n  if (hasRipple) {\n    if (!rippleElement) {\n      const element = document.createElement('ons-ripple');\n      Object.keys(attrs).forEach(key => element.setAttribute(key, attrs[key]));\n      target.insertBefore(element, target.firstChild);\n    }\n  } else if (rippleElement) {\n    rippleElement.remove();\n  }\n};\n\n/**\n * @param {String}\n * @return {Object}\n */\nutil.animationOptionsParse = animationOptionsParse;\n\n/**\n * @param {*} value\n */\nutil.isInteger = (value) => {\n  return typeof value === 'number' &&\n    isFinite(value) &&\n    Math.floor(value) === value;\n};\n\n/**\n * @return {Object} Deferred promise.\n */\nutil.defer = () => {\n  const deferred = {};\n  deferred.promise = new Promise((resolve, reject) => {\n    deferred.resolve = resolve;\n    deferred.reject = reject;\n  });\n  return deferred;\n};\n\n/**\n * Show warnings when they are enabled.\n *\n * @param {*} arguments to console.warn\n */\nutil.warn = (...args) => {\n  if (!internal.config.warningsDisabled) {\n    console.warn(...args);\n  }\n};\n\nutil.preventScroll = gd => {\n  const prevent = e => e.cancelable && e.preventDefault();\n\n  const clean = (e) => {\n    gd.off('touchmove', prevent);\n    gd.off('dragend', clean);\n  };\n\n  gd.on('touchmove', prevent);\n  gd.on('dragend', clean);\n}\n\nexport default util;\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from './util';\n\n// Validate parameters\nconst checkOptions = options => {\n  if (!Object.hasOwnProperty.call(options, 'buttons') || !(options.buttons instanceof Array)) {\n    throw new Error('\"options.buttons\" must be an instance of Array.')\n  }\n  if (Object.hasOwnProperty.call(options, 'callback') && !(options.callback instanceof Function)) {\n    throw new Error('\"options.callback\" must be an instance of Function.')\n  }\n  if (Object.hasOwnProperty.call(options, 'compile') && !(options.compile instanceof Function)) {\n    throw new Error('\"options.compile\" must be an instance of Function.')\n  }\n  if (Object.hasOwnProperty.call(options, 'destroy') && !(options.destroy instanceof Function)) {\n    throw new Error('\"options.destroy\" must be an instance of Function.')\n  }\n};\n\n// Action Sheet\nexport default (options = {}) => {\n  checkOptions(options);\n\n  // Main component\n  let actionSheet = util.createElement(`\n    <ons-action-sheet\n      ${options.title ? `title=\"${options.title}\"` : ''}\n      ${options.cancelable ? 'cancelable' : ''}\n      ${options.modifier ? `modifier=\"${options.modifier}\"` : ''}\n      ${options.maskColor ? `mask-color=\"${options.maskColor}\"` : ''}\n      ${options.id ? `id=\"${options.id}\"` : ''}\n      ${options.class ? `class=\"${options.class}\"` : ''}\n    >\n      <div class=\"action-sheet\"></div>\n    </ons-action-sheet>\n  `);\n\n  // Resolve action and clean up\n  const deferred = util.defer();\n  const resolver = (event, index = -1) => {\n    if (actionSheet) {\n      options.destroy && options.destroy(actionSheet);\n\n      actionSheet.removeEventListener('dialog-cancel', resolver, false);\n      actionSheet.remove();\n      actionSheet = null;\n\n      options.callback && options.callback(index);\n      deferred.resolve(index);\n    }\n  };\n\n  // Link cancel handler\n  actionSheet.addEventListener('dialog-cancel', resolver, false);\n\n  // Create buttons and link action handler\n  const buttons = document.createDocumentFragment();\n  options.buttons.forEach((item, index) => {\n    const buttonOptions = (typeof item === 'string') ? { label: item } : { ...item };\n    if (options.destructive === index) {\n      buttonOptions.modifier = (buttonOptions.modifier || '') + ' destructive';\n    }\n\n    const button = util.createElement(`\n      <ons-action-sheet-button\n        ${buttonOptions.icon ? `icon=\"${buttonOptions.icon}\"` : ''}\n        ${buttonOptions.modifier ? `modifier=\"${buttonOptions.modifier}\"` : ''}\n      >\n        ${buttonOptions.label}\n      </ons-action-sheet-button>\n    `);\n\n    button.onclick = event => actionSheet.hide().then(() => resolver(event, index));\n    buttons.appendChild(button);\n  });\n\n  // Finish component and attach\n  util.findChild(actionSheet, '.action-sheet').appendChild(buttons);\n  document.body.appendChild(actionSheet);\n  options.compile && options.compile(el.dialog);\n\n  // Show\n  setImmediate(() => actionSheet.show({\n    animation: options.animation,\n    animationOptions: options.animationOptions\n  }));\n\n  return deferred.promise;\n};\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nconst create = () => {\n\n  /**\n   * @object ons.orientation\n   * @category util\n   * @description\n   *   [en]Utility methods for orientation detection.[/en]\n   *   [ja][/ja]\n   */\n  const obj = {\n    /**\n     * @event change\n     * @description\n     *   [en]Fired when the device orientation changes.[/en]\n     *   [ja][/ja]\n     * @param {Object} event\n     *   [en]Event object.[/en]\n     *   [ja][/ja]\n     * @param {Boolean} event.isPortrait\n     *   [en]Will be true if the current orientation is portrait mode.[/en]\n     *   [ja]portraittrue[/ja]\n     */\n\n    /**\n     * @method on\n     * @signature on(eventName, listener)\n     * @description\n     *   [en]Add an event listener.[/en]\n     *   [ja][/ja]\n     * @param {String} eventName\n     *   [en]Name of the event.[/en]\n     *   [ja][/ja]\n     * @param {Function} listener\n     *   [en]Function to execute when the event is triggered.[/en]\n     *   [ja][/ja]\n     */\n\n    /**\n     * @method once\n     * @signature once(eventName, listener)\n     * @description\n     *  [en]Add an event listener that's only triggered once.[/en]\n     *  [ja][/ja]\n     * @param {String} eventName\n     *   [en]Name of the event.[/en]\n     *   [ja][/ja]\n     * @param {Function} listener\n     *   [en]Function to execute when the event is triggered.[/en]\n     *   [ja][/ja]\n     */\n\n    /**\n     * @method off\n     * @signature off(eventName, [listener])\n     * @description\n     *  [en]Remove an event listener. If the listener is not specified all listeners for the event type will be removed.[/en]\n     *  [ja][/ja]\n     * @param {String} eventName\n     *   [en]Name of the event.[/en]\n     *   [ja][/ja]\n     * @param {Function} listener\n     *   [en]Function to execute when the event is triggered.[/en]\n     *   [ja][/ja]\n     */\n\n    // actual implementation to detect if whether current screen is portrait or not\n    _isPortrait: false,\n\n    /**\n     * @method isPortrait\n     * @signature isPortrait()\n     * @return {Boolean}\n     *   [en]Will be true if the current orientation is portrait mode.[/en]\n     *   [ja]portraittrue[/ja]\n     * @description\n     *   [en]Returns whether the current screen orientation is portrait or not.[/en]\n     *   [ja]portrait[/ja]\n     */\n    isPortrait: function() {\n      return this._isPortrait();\n    },\n\n    /**\n     * @method isLandscape\n     * @signature isLandscape()\n     * @return {Boolean}\n     *   [en]Will be true if the current orientation is landscape mode.[/en]\n     *   [ja]landscapetrue[/ja]\n     * @description\n     *   [en]Returns whether the current screen orientation is landscape or not.[/en]\n     *   [ja]landscape[/ja]\n     */\n    isLandscape: function() {\n      return !this.isPortrait();\n    },\n\n    _init: function() {\n      document.addEventListener('DOMContentLoaded', this._onDOMContentLoaded.bind(this), false);\n\n      if ('orientation' in window) {\n        window.addEventListener('orientationchange', this._onOrientationChange.bind(this), false);\n      } else {\n        window.addEventListener('resize', this._onResize.bind(this), false);\n      }\n\n      this._isPortrait = function() {\n        return window.innerHeight > window.innerWidth;\n      };\n\n      return this;\n    },\n\n    _onDOMContentLoaded: function() {\n      this._installIsPortraitImplementation();\n      this.emit('change', {isPortrait: this.isPortrait()});\n    },\n\n    _installIsPortraitImplementation: function() {\n      const isPortrait = window.innerWidth < window.innerHeight;\n\n      if (!('orientation' in window)) {\n        this._isPortrait = function() {\n          return window.innerHeight > window.innerWidth;\n        };\n      } else if (window.orientation % 180 === 0) {\n        this._isPortrait = function() {\n          return Math.abs(window.orientation % 180) === 0 ? isPortrait : !isPortrait;\n        };\n      } else {\n        this._isPortrait = function() {\n          return Math.abs(window.orientation % 180) === 90 ? isPortrait : !isPortrait;\n        };\n      }\n    },\n\n    _onOrientationChange: function() {\n      const isPortrait = this._isPortrait();\n\n      // Wait for the dimensions to change because\n      // of Android inconsistency.\n      let nIter = 0;\n      const interval = setInterval(() => {\n        nIter++;\n\n        const w = window.innerWidth;\n        const h = window.innerHeight;\n\n        if ((isPortrait && w <= h) ||\n           (!isPortrait && w >= h)) {\n          this.emit('change', {isPortrait: isPortrait});\n          clearInterval(interval);\n        } else if (nIter === 50) {\n          this.emit('change', {isPortrait: isPortrait});\n          clearInterval(interval);\n        }\n      }, 20);\n    },\n\n    // Run on not mobile browser.\n    _onResize: function() {\n      this.emit('change', {isPortrait: this.isPortrait()});\n    }\n  };\n\n  MicroEvent.mixin(obj);\n\n  return obj;\n};\n\nexport default create()._init();\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from './util';\n\n/**\n * @object ons.modifier\n * @category visual\n * @description\n *   [en]\n *     Utility methods to change modifier attributes of Onsen UI elements..\n *   [/en]\n *   [ja][/ja]\n * @example\n * ons.modifier.add(myOnsInputElement, 'underbar');\n * ons.modifier.toggle(myOnsToastElement, 'custom-modifier');\n *\n */\nexport default {\n  /**\n   * @method add\n   * @signature add(element, modifier [, modifier])\n   * @description\n   *   [en]Add the specified modifiers to the element if they are not already included.[/en]\n   *   [ja][/ja]\n   * @param {HTMLElement} element\n   *   [en]Target element.[/en]\n   *   [ja][/ja]\n   * @param {String} modifier\n   *   [en]Name of the modifier.[/en]\n   *   [ja][/ja]\n   */\n  add: (element, ...modifiers) => modifiers.forEach(modifier => util.addModifier(element, modifier)),\n  /**\n   * @method remove\n   * @signature remove(element, modifier [, modifier])\n   * @description\n   *   [en]Remove the specified modifiers from the element if they are included.[/en]\n   *   [ja][/ja]\n   * @param {HTMLElement} element\n   *   [en]Target element.[/en]\n   *   [ja][/ja]\n   * @param {String} modifier\n   *   [en]Name of the modifier.[/en]\n   *   [ja][/ja]\n   */\n  remove: (element, ...modifiers) => modifiers.forEach(modifier => util.removeModifier(element, modifier)),\n  /**\n   * @method contains\n   * @signature contains(element, modifier)\n   * @description\n   *   [en]Check whether the specified modifier is included in the element.[/en]\n   *   [ja][/ja]\n   * @param {HTMLElement} element\n   *   [en]Target element.[/en]\n   *   [ja][/ja]\n   * @param {String} modifier\n   *   [en]Name of the modifier.[/en]\n   *   [ja][/ja]\n   * @return {Boolean}\n   *   [en]`true` when the specified modifier is found in the element's `modifier` attribute. `false` otherwise.[/en]\n   *   [ja][/ja]\n   */\n  contains: util.hasModifier,\n  /**\n   * @method toggle\n   * @signature toggle(element, modifier [, force])\n   * @description\n   *   [en]Toggle the specified modifier.[/en]\n   *   [ja][/ja]\n   * @param {HTMLElement} element\n   *   [en]Target element.[/en]\n   *   [ja][/ja]\n   * @param {String} modifier\n   *   [en]Name of the modifier.[/en]\n   *   [ja][/ja]\n   * @param {String} force\n   *   [en]If it evaluates to true, add specified modifier value, and if it evaluates to false, remove it.[/en]\n   *   [ja][/ja]\n   */\n  toggle: util.toggleModifier\n};\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from './util';\n\nconst softwareKeyboard = new MicroEvent();\nsoftwareKeyboard._visible = false;\n\nconst onShow = () => {\n  softwareKeyboard._visible = true;\n  softwareKeyboard.emit('show');\n};\n\nconst onHide = () => {\n  softwareKeyboard._visible = false;\n  softwareKeyboard.emit('hide');\n};\n\nconst bindEvents = () => {\n  if (typeof Keyboard !== 'undefined') {\n    // https://github.com/martinmose/cordova-keyboard/blob/95f3da3a38d8f8e1fa41fbf40145352c13535a00/README.md\n    Keyboard.onshow = onShow;\n    Keyboard.onhide = onHide;\n    softwareKeyboard.emit('init', {visible: Keyboard.isVisible});\n\n    return true;\n  } else if (typeof cordova.plugins !== 'undefined' && typeof cordova.plugins.Keyboard !== 'undefined') {\n    // https://github.com/driftyco/ionic-plugins-keyboard/blob/ca27ecf/README.md\n    window.addEventListener('native.keyboardshow', onShow);\n    window.addEventListener('native.keyboardhide', onHide);\n    softwareKeyboard.emit('init', {visible: cordova.plugins.Keyboard.isVisible});\n\n    return true;\n  }\n\n  return false;\n};\n\nconst noPluginError = () => {\n  util.warn('ons-keyboard: Cordova Keyboard plugin is not present.');\n};\n\ndocument.addEventListener('deviceready', () => {\n  if (!bindEvents()) {\n    if (document.querySelector('[ons-keyboard-active]') ||\n      document.querySelector('[ons-keyboard-inactive]')) {\n      noPluginError();\n    }\n\n    softwareKeyboard.on = noPluginError;\n  }\n});\n\nexport default softwareKeyboard;\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport platform from './platform';\n\n\nconst util = {\n  _ready: false,\n\n  _domContentLoaded: false,\n\n  _onDOMContentLoaded: () => {\n    util._domContentLoaded = true;\n\n    if (platform.isWebView()) {\n      window.document.addEventListener('deviceready', () => {\n        util._ready = true;\n      }, false);\n    } else {\n      util._ready = true;\n    }\n  },\n\n  addBackButtonListener: function(fn) {\n    if (!this._domContentLoaded) {\n      throw new Error('This method is available after DOMContentLoaded');\n    }\n\n    if (this._ready) {\n      window.document.addEventListener('backbutton', fn, false);\n    } else {\n      window.document.addEventListener('deviceready', function() {\n        window.document.addEventListener('backbutton', fn, false);\n      });\n    }\n  },\n\n  removeBackButtonListener: function(fn) {\n    if (!this._domContentLoaded) {\n      throw new Error('This method is available after DOMContentLoaded');\n    }\n\n    if (this._ready) {\n      window.document.removeEventListener('backbutton', fn, false);\n    } else {\n      window.document.addEventListener('deviceready', function() {\n        window.document.removeEventListener('backbutton', fn, false);\n      });\n    }\n  }\n};\nwindow.addEventListener('DOMContentLoaded', () => util._onDOMContentLoaded(), false);\n\nconst HandlerRepository = {\n  _store: {},\n\n  _genId: (() => {\n    let i = 0;\n    return () => i++;\n  })(),\n\n  set: function(element, handler) {\n    if (element.dataset.deviceBackButtonHandlerId) {\n      this.remove(element);\n    }\n    const id = element.dataset.deviceBackButtonHandlerId = HandlerRepository._genId();\n    this._store[id] = handler;\n  },\n\n  remove: function(element) {\n    if (element.dataset.deviceBackButtonHandlerId) {\n      delete this._store[element.dataset.deviceBackButtonHandlerId];\n      delete element.dataset.deviceBackButtonHandlerId;\n    }\n  },\n\n  get: function(element) {\n    if (!element.dataset.deviceBackButtonHandlerId) {\n      return undefined;\n    }\n\n    const id = element.dataset.deviceBackButtonHandlerId;\n\n    if (!this._store[id]) {\n      throw new Error();\n    }\n\n    return this._store[id];\n  },\n\n  has: function(element) {\n    if (!element.dataset) {\n      return false;\n    }\n\n    const id = element.dataset.deviceBackButtonHandlerId;\n\n    return !!this._store[id];\n  }\n};\n\nclass DeviceBackButtonDispatcher {\n  constructor() {\n    this._isEnabled = false;\n    this._boundCallback = this._callback.bind(this);\n  }\n\n\n  /**\n   * Enable to handle 'backbutton' events.\n   */\n  enable() {\n    if (!this._isEnabled) {\n      util.addBackButtonListener(this._boundCallback);\n      this._isEnabled = true;\n    }\n  }\n\n  /**\n   * Disable to handle 'backbutton' events.\n   */\n  disable() {\n    if (this._isEnabled) {\n      util.removeBackButtonListener(this._boundCallback);\n      this._isEnabled = false;\n    }\n  }\n\n  /**\n   * Fire a 'backbutton' event manually.\n   */\n  fireDeviceBackButtonEvent() {\n    const event = document.createEvent('Event');\n    event.initEvent('backbutton', true, true);\n    document.dispatchEvent(event);\n  }\n\n  _callback() {\n    this._dispatchDeviceBackButtonEvent();\n  }\n\n  /**\n   * @param {HTMLElement} element\n   * @param {Function} callback\n   */\n  createHandler(element, callback) {\n    if (!(element instanceof HTMLElement)) {\n      throw new Error('element must be an instance of HTMLElement');\n    }\n\n    if (!(callback instanceof Function)) {\n      throw new Error('callback must be an instance of Function');\n    }\n\n    const handler = {\n      _callback: callback,\n      _element: element,\n\n      disable: function() {\n        HandlerRepository.remove(element);\n      },\n\n      setListener: function(callback) {\n        this._callback = callback;\n      },\n\n      enable: function() {\n        HandlerRepository.set(element, this);\n      },\n\n      isEnabled: function() {\n        return HandlerRepository.get(element) === this;\n      },\n\n      destroy: function() {\n        HandlerRepository.remove(element);\n        this._callback = this._element = null;\n      }\n    };\n\n    handler.enable();\n\n    return handler;\n  }\n\n  _dispatchDeviceBackButtonEvent() {\n    const tree = this._captureTree();\n\n    const element = this._findHandlerLeafElement(tree);\n\n    let handler = HandlerRepository.get(element);\n    handler._callback(createEvent(element));\n\n    function createEvent(element) {\n      return {\n        _element: element,\n        callParentHandler: function() {\n          let parent = this._element.parentNode;\n\n          while (parent) {\n            handler = HandlerRepository.get(parent);\n            if (handler) {\n              return handler._callback(createEvent(parent));\n            }\n            parent = parent.parentNode;\n          }\n        }\n      };\n    }\n  }\n\n  /**\n   * @return {Object}\n   */\n  _captureTree() {\n    return createTree(document.body);\n\n    function createTree(element) {\n      const tree = {\n        element: element,\n        children: Array.prototype.concat.apply([], arrayOf(element.children).map(function(childElement) {\n\n          if (childElement.style.display === 'none') {\n            return [];\n          }\n\n          if (childElement.children.length === 0 && !HandlerRepository.has(childElement)) {\n            return [];\n          }\n\n          const result = createTree(childElement);\n\n          if (result.children.length === 0 && !HandlerRepository.has(result.element)) {\n            return [];\n          }\n\n          return [result];\n        }))\n      };\n\n      if (!HandlerRepository.has(tree.element)) {\n        for (let i = 0; i < tree.children.length; i++){\n          const subTree = tree.children[i];\n          if (HandlerRepository.has(subTree.element)) {\n            return subTree;\n          }\n        }\n      }\n\n      return tree;\n    }\n\n    function arrayOf(target) {\n      const result = [];\n      for (let i = 0; i < target.length; i++) {\n        result.push(target[i]);\n      }\n      return result;\n    }\n  }\n\n  /**\n   * @param {Object} tree\n   * @return {HTMLElement}\n   */\n  _findHandlerLeafElement(tree) {\n    return find(tree);\n\n    function find(node) {\n      if (node.children.length === 0) {\n        return node.element;\n      }\n\n      if (node.children.length === 1) {\n        return find(node.children[0]);\n      }\n\n      return node.children.map(function(childNode) {\n        return childNode.element;\n      }).reduce(function(left, right) {\n        if (!left) {\n          return right;\n        }\n\n        const leftZ = parseInt(window.getComputedStyle(left, '').zIndex, 10);\n        const rightZ = parseInt(window.getComputedStyle(right, '').zIndex, 10);\n\n        if (!isNaN(leftZ) && !isNaN(rightZ)) {\n          return leftZ > rightZ ? left : right;\n        }\n\n        throw new Error('Capturing backbutton-handler is failure.');\n      }, null);\n    }\n  }\n}\n\nexport default new DeviceBackButtonDispatcher();\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nconst generateId = (function() {\n  let i = 0;\n  return function() {\n    return i++;\n  };\n})();\n\n/**\n * Door locking system.\n *\n * @param {Object} [options]\n * @param {Function} [options.log]\n */\nexport default class DoorLock {\n\n  constructor(options = {}) {\n    this._lockList = [];\n    this._waitList = [];\n    this._log = options.log || function() {};\n  }\n\n  /**\n   * Register a lock.\n   *\n   * @return {Function} Callback for unlocking.\n   */\n  lock() {\n    const unlock = () => {\n      this._unlock(unlock);\n    };\n    unlock.id = generateId();\n    this._lockList.push(unlock);\n    this._log('lock: ' + (unlock.id));\n\n    return unlock;\n  }\n\n  _unlock(fn) {\n    const index = this._lockList.indexOf(fn);\n    if (index === -1) {\n      throw new Error('This function is not registered in the lock list.');\n    }\n\n    this._lockList.splice(index, 1);\n    this._log('unlock: ' + fn.id);\n\n    this._tryToFreeWaitList();\n  }\n\n  _tryToFreeWaitList() {\n    while (!this.isLocked() && this._waitList.length > 0) {\n      this._waitList.shift()();\n    }\n  }\n\n  /**\n   * Register a callback for waiting unlocked door.\n   *\n   * @params {Function} callback Callback on unlocking the door completely.\n   */\n  waitUnlock(callback) {\n    if (!(callback instanceof Function)) {\n      throw new Error('The callback param must be a function.');\n    }\n\n    if (this.isLocked()) {\n      this._waitList.push(callback);\n    } else {\n      callback();\n    }\n  }\n\n  /**\n   * @return {Boolean}\n   */\n  isLocked() {\n    return this._lockList.length > 0;\n  }\n}\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\nconst readyMap = new WeakMap();\nconst queueMap = new WeakMap();\n\nfunction isContentReady(element) {\n  if (element.childNodes.length > 0) {\n    setContentReady(element);\n  }\n  return readyMap.has(element);\n}\n\nfunction setContentReady(element) {\n  readyMap.set(element, true);\n}\n\nfunction addCallback(element, fn) {\n  if (!queueMap.has(element)) {\n    queueMap.set(element, []);\n  }\n  queueMap.get(element).push(fn);\n}\n\nfunction consumeQueue(element) {\n  const callbacks = queueMap.get(element, []) || [];\n  queueMap.delete(element);\n  callbacks.forEach(callback => callback());\n}\n\nexport default function contentReady(element, fn = () => {}) {\n  addCallback(element, fn);\n\n  if (isContentReady(element)) {\n    consumeQueue(element);\n    return;\n  }\n\n  const observer = new MutationObserver(changes => {\n    setContentReady(element);\n    consumeQueue(element);\n  });\n  observer.observe(element, {childList: true, characterData: true});\n\n  // failback for elements has empty content.\n  setImmediate(() => {\n    setContentReady(element);\n    consumeQueue(element);\n  });\n}\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\nimport util from './util';\nimport internal from './internal';\n\n// Default implementation for global PageLoader.\nfunction loadPage({page, parent, params = {}}, done) {\n  internal.getPageHTMLAsync(page).then(html => {\n    const pageElement = util.createElement(html);\n    parent.appendChild(pageElement);\n\n    done(pageElement);\n  });\n}\n\nfunction unloadPage(element) {\n  if (element._destroy instanceof Function) {\n    element._destroy();\n  } else {\n    element.remove();\n  }\n}\n\nexport class PageLoader {\n  /**\n   * @param {Function} [fn] Returns an object that has \"element\" property and \"unload\" function.\n   */\n  constructor(loader, unloader) {\n    this._loader = loader instanceof Function ? loader : loadPage;\n    this._unloader = unloader instanceof Function ? unloader : unloadPage;\n  }\n\n  /**\n   * Set internal loader implementation.\n   */\n  set internalLoader(fn) {\n    if (!(fn instanceof Function)) {\n      throw Error('First parameter must be an instance of Function');\n    }\n    this._loader = fn;\n  }\n\n  get internalLoader() {\n    return this._loader;\n  }\n\n  /**\n   * @param {any} options.page\n   * @param {Element} options.parent A location to load page.\n   * @param {Object} [options.params] Extra parameters for ons-page.\n   * @param {Function} done Take an object that has \"element\" property and \"unload\" function.\n   */\n  load({page, parent, params = {}}, done) {\n    this._loader({page, parent, params}, pageElement => {\n      if (!(pageElement instanceof Element)) {\n        throw Error('pageElement must be an instance of Element.');\n      }\n\n      done(pageElement);\n    });\n  }\n\n  unload(pageElement) {\n    if (!(pageElement instanceof Element)) {\n      throw Error('pageElement must be an instance of Element.');\n    }\n\n    this._unloader(pageElement);\n  }\n}\n\nexport const defaultPageLoader = new PageLoader();\n\nexport const instantPageLoader = new PageLoader(\n  function({page, parent, params = {}}, done) {\n    const element = util.createElement(page.trim());\n    parent.appendChild(element);\n\n    done(element);\n  },\n  unloadPage\n);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from './util';\n\nexport default class BaseAnimator {\n\n  /**\n   * @param {Object} options\n   * @param {String} options.timing\n   * @param {Number} options.duration\n   * @param {Number} options.delay\n   */\n  constructor(options = {}) {\n    this.timing = options.timing || 'linear';\n    this.duration = options.duration || 0;\n    this.delay = options.delay || 0;\n  }\n\n  static extend(properties = {}) {\n    const extendedAnimator = this;\n    const newAnimator = function() {\n      extendedAnimator.apply(this, arguments);\n      util.extend(this, properties);\n    };\n\n    newAnimator.prototype = this.prototype;\n    return newAnimator;\n  }\n}\n\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from './util';\nimport animit from './animit'\nimport GestureDetector from './gesture-detector';\nimport platform from './platform';\n//import notification from './notification';\nimport actionSheet from './action-sheet';\nimport internal from './internal';\nimport orientation from './orientation';\nimport modifier from './modifier';\nimport softwareKeyboard from './software-keyboard';\nimport PageAttributeExpression from './page-attribute-expression';\nimport deviceBackButtonDispatcher from './device-back-button-dispatcher';\nimport animationOptionsParser from './animation-options-parser';\nimport autoStyle from './autostyle';\nimport DoorLock from './doorlock';\nimport contentReady from './content-ready';\nimport {defaultPageLoader, PageLoader} from './page-loader';\nimport BaseAnimator from './base-animator';\n\n/**\n * @object ons\n * @category util\n * @description\n *   [ja]Onsen UI[/ja]\n *   [en]A global object that's used in Onsen UI. [/en]\n */\nconst ons = {};\n\nons._util = util;\nons.animit = animit;\nons._deviceBackButtonDispatcher = deviceBackButtonDispatcher;\nons._internal = internal;\nons.GestureDetector = GestureDetector;\nons.platform = platform;\nons.softwareKeyboard = softwareKeyboard;\nons.pageAttributeExpression = PageAttributeExpression;\nons.orientation = orientation;\n//ons.notification = notification;\nons.modifier = modifier;\nons._animationOptionsParser = animationOptionsParser;\nons._autoStyle = autoStyle;\nons._DoorLock = DoorLock;\nons._contentReady = contentReady;\nons.defaultPageLoader = defaultPageLoader;\nons.PageLoader = PageLoader;\nons._BaseAnimator = BaseAnimator;\n\nons._readyLock = new DoorLock();\n\nons.platform.select((window.location.search.match(/platform=([\\w-]+)/) || [])[1]);\n\nwaitDeviceReady();\n\n/**\n * @method isReady\n * @signature isReady()\n * @return {Boolean}\n *   [en]Will be true if Onsen UI is initialized.[/en]\n *   [ja][/ja]\n * @description\n *   [en]Returns true if Onsen UI is initialized.[/en]\n *   [ja]Onsen UI[/ja]\n */\nons.isReady = () => {\n  return !ons._readyLock.isLocked();\n};\n\n/**\n * @method isWebView\n * @signature isWebView()\n * @return {Boolean}\n *   [en]Will be true if the app is running in Cordova.[/en]\n *   [ja]Cordovatrue[/ja]\n * @description\n *   [en]Returns true if running inside Cordova.[/en]\n *   [ja]Cordova[/ja]\n */\nons.isWebView = ons.platform.isWebView;\n\n/**\n * @method ready\n * @signature ready(callback)\n * @description\n *   [ja]Onsen UI[/ja]\n *   [en]Method used to wait for app initialization. Waits for `DOMContentLoaded` and `deviceready`, when necessary, before executing the callback.[/en]\n * @param {Function} callback\n *   [en]Function that executes after Onsen UI has been initialized.[/en]\n *   [ja]Onsen UI[/ja]\n */\nons.ready = callback => {\n  if (ons.isReady()) {\n    callback();\n  } else {\n    ons._readyLock.waitUnlock(callback);\n  }\n};\n\n/**\n * @method setDefaultDeviceBackButtonListener\n * @signature setDefaultDeviceBackButtonListener(listener)\n * @param {Function} listener\n *   [en]Function that executes when device back button is pressed. Must be called on `ons.ready`.[/en]\n *   [ja][/ja]\n * @description\n *   [en]Set default handler for device back button.[/en]\n *   [ja][/ja]\n */\nons.setDefaultDeviceBackButtonListener = function(listener) {\n  if (!ons.isReady()) {\n    throw new Error('This method must be called after ons.isReady() is true.');\n  }\n  ons._defaultDeviceBackButtonHandler.setListener(listener);\n};\n\n/**\n * @method disableDeviceBackButtonHandler\n * @signature disableDeviceBackButtonHandler()\n * @description\n * [en]Disable device back button event handler. Must be called on `ons.ready`.[/en]\n * [ja][/ja]\n */\nons.disableDeviceBackButtonHandler = function() {\n  if (!ons.isReady()) {\n    throw new Error('This method must be called after ons.isReady() is true.');\n  }\n  ons._deviceBackButtonDispatcher.disable();\n};\n\n/**\n * @method enableDeviceBackButtonHandler\n * @signature enableDeviceBackButtonHandler()\n * @description\n * [en]Enable device back button event handler. Must be called on `ons.ready`.[/en]\n * [ja][/ja]\n */\nons.enableDeviceBackButtonHandler = function() {\n  if (!ons.isReady()) {\n    throw new Error('This method must be called after ons.isReady() is true.');\n  }\n  ons._deviceBackButtonDispatcher.enable();\n};\n\n\n/**\n * @method enableAutoStatusBarFill\n * @signature enableAutoStatusBarFill()\n * @description\n *   [en]Enable status bar fill feature on iOS7 and above. Must be called before `ons.ready`.[/en]\n *   [ja]iOS7[/ja]\n */\nons.enableAutoStatusBarFill = () => {\n  if (ons.isReady()) {\n    throw new Error('This method must be called before ons.isReady() is true.');\n  }\n  internal.config.autoStatusBarFill = true;\n};\n\n/**\n * @method disableAutoStatusBarFill\n * @signature disableAutoStatusBarFill()\n * @description\n *   [en]Disable status bar fill feature on iOS7 and above. Must be called before `ons.ready`.[/en]\n *   [ja]iOS7[/ja]\n */\nons.disableAutoStatusBarFill = () => {\n  if (ons.isReady()) {\n    throw new Error('This method must be called before ons.isReady() is true.');\n  }\n  internal.config.autoStatusBarFill = false;\n};\n\n/**\n * @method mockStatusBar\n * @signature mockStatusBar()\n * @description\n *   [en]Creates a static element similar to iOS status bar. Only useful for browser testing. Must be called before `ons.ready`.[/en]\n *   [ja][/ja]\n */\nons.mockStatusBar = () => {\n  if (ons.isReady()) {\n    throw new Error('This method must be called before ons.isReady() is true.');\n  }\n\n  if (!document.body.children[0] || !document.body.children[0].classList.contains('ons-status-bar-mock')) {\n    document.body.insertBefore(util.createElement(`\n      <div class=\"ons-status-bar-mock\">\n        <div style=\"padding-left: 5px\">No SIM</div>\n        <div>12:28 PM</div>\n        <div style=\"padding-right: 15px\">80%</div>\n      </div>\n    `), document.body.firstChild);\n  }\n};\n\n/**\n * @method disableAnimations\n * @signature disableAnimations()\n * @description\n *   [en]Disable all animations. Could be handy for testing and older devices.[/en]\n *   [ja][/ja]\n */\nons.disableAnimations = () => {\n  internal.config.animationsDisabled = true;\n};\n\n/**\n * @method enableAnimations\n * @signature enableAnimations()\n * @description\n *   [en]Enable animations (default).[/en]\n *   [ja][/ja]\n */\nons.enableAnimations = () => {\n  internal.config.animationsDisabled = false;\n};\n\nons._disableWarnings = () => {\n  internal.config.warningsDisabled = true;\n};\n\nons._enableWarnings = () => {\n  internal.config.warningsDisabled = false;\n};\n\n/**\n * @method disableAutoStyling\n * @signature disableAutoStyling()\n * @description\n *   [en]Disable automatic styling.[/en]\n *   [ja][/ja]\n */\nons.disableAutoStyling = ons._autoStyle.disable;\n\n/**\n * @method enableAutoStyling\n * @signature enableAutoStyling()\n * @description\n *   [en]Enable automatic styling based on OS (default).[/en]\n *   [ja][/ja]\n */\nons.enableAutoStyling = ons._autoStyle.enable;\n\n/**\n * @method forcePlatformStyling\n * @signature forcePlatformStyling(platform)\n * @description\n *   [en]Refresh styling for the given platform. Only useful for demos. Use `ons.platform.select(...)` instead for development and production.[/en]\n *   [ja][/ja]\n * @param {string} platform New platform to style the elements.\n */\nons.forcePlatformStyling = newPlatform => {\n  ons.enableAutoStyling();\n  ons.platform.select(newPlatform || 'ios');\n\n  ons._util.arrayFrom(document.querySelectorAll('*'))\n    .forEach(function(element) {\n      if (element.tagName.toLowerCase() === 'ons-if') {\n        element._platformUpdate();\n      } else if (element.tagName.match(/^ons-/i)) {\n        ons._autoStyle.prepare(element, true);\n        if (element.tagName.toLowerCase() === 'ons-tabbar') {\n          element._updatePosition();\n        }\n      }\n    });\n};\n\n/**\n * @method preload\n * @signature preload(templatePaths)\n * @param {String|Array} templatePaths\n *   [en]Set of HTML file paths containing 'ons-page' elements.[/en]\n *   [ja][/ja]\n * @return {Promise}\n *   [en]Promise that resolves when all the templates are cached.[/en]\n *   [ja][/ja]\n * @description\n *   [en]Separated files need to be requested on demand and this can slightly delay pushing new pages. This method requests and caches templates for later use.[/en]\n *   [ja][/ja]\n */\nons.preload = function(templates = []) {\n  return Promise.all((templates instanceof Array ? templates : [templates]).map(template => {\n    if (typeof template !== 'string') {\n      throw new Error ('Expected string arguments but got ' + typeof template);\n    }\n    return ons._internal.getTemplateHTMLAsync(template);\n  }));\n};\n\n/**\n * @method createElement\n * @signature createElement(template, options)\n * @param {String} template\n *   [en]Either an HTML file path, an `<ons-template>` id or an HTML string such as `'<div id=\"foo\">hoge</div>'`.[/en]\n *   [ja][/ja]\n * @param {Object} [options]\n *   [en]Parameter object.[/en]\n *   [ja][/ja]\n * @param {Boolean|HTMLElement} [options.append]\n *   [en]Whether or not the element should be automatically appended to the DOM.  Defaults to `false`. If `true` value is given, `document.body` will be used as the target.[/en]\n *   [ja][/ja]\n * @param {HTMLElement} [options.insertBefore]\n *   [en]Reference node that becomes the next sibling of the new node (`options.append` element).[/en]\n *   [ja][/ja]\n * @return {HTMLElement|Promise}\n *   [en]If the provided template was an inline HTML string, it returns the new element. Otherwise, it returns a promise that resolves to the new element.[/en]\n *   [ja][/ja]\n * @description\n *   [en]Create a new element from a template. Both inline HTML and external files are supported although the return value differs.[/en]\n *   [ja][/ja]\n */\nons.createElement = (template, options = {}) => {\n  template = template.trim();\n\n  const create = html => {\n    const element = ons._util.createElement(html);\n    element.remove();\n\n    if (options.append) {\n      const target = options.append instanceof HTMLElement ? options.append : document.body;\n      target.insertBefore(element, options.insertBefore || null);\n\n      if (options.link instanceof Function) {\n        options.link(element);\n      }\n    }\n\n    return element;\n  };\n\n  return template.charAt(0) === '<' ? create(template) : ons._internal.getPageHTMLAsync(template).then(create);\n};\n\n/**\n * @method createPopover\n * @signature createPopover(page, [options])\n * @param {String} page\n *   [en]Page name. Can be either an HTML file or an <ons-template> containing a <ons-dialog> component.[/en]\n *   [ja]pageURLons-templateid[/ja]\n * @param {Object} [options]\n *   [en]Parameter object.[/en]\n *   [ja][/ja]\n * @param {Object} [options.parentScope]\n *   [en]Parent scope of the dialog. Used to bind models and access scope methods from the dialog.[/en]\n *   [ja]AngularJS[/ja]\n * @return {Promise}\n *   [en]Promise object that resolves to the popover component object.[/en]\n *   [ja]Promise[/ja]\n * @description\n *   [en]Create a popover instance from a template.[/en]\n *   [ja][/ja]\n */\n/**\n * @method createDialog\n * @signature createDialog(page, [options])\n * @param {String} page\n *   [en]Page name. Can be either an HTML file or an <ons-template> containing a <ons-dialog> component.[/en]\n *   [ja]pageURLons-templateid[/ja]\n * @param {Object} [options]\n *   [en]Parameter object.[/en]\n *   [ja][/ja]\n * @return {Promise}\n *   [en]Promise object that resolves to the dialog component object.[/en]\n *   [ja]Promise[/ja]\n * @description\n *   [en]Create a dialog instance from a template.[/en]\n *   [ja][/ja]\n */\n/**\n * @method createAlertDialog\n * @signature createAlertDialog(page, [options])\n * @param {String} page\n *   [en]Page name. Can be either an HTML file or an <ons-template> containing a <ons-alert-dialog> component.[/en]\n *   [ja]pageURLons-templateid[/ja]\n * @param {Object} [options]\n *   [en]Parameter object.[/en]\n *   [ja][/ja]\n * @return {Promise}\n *   [en]Promise object that resolves to the alert dialog component object.[/en]\n *   [ja]Promise[/ja]\n * @description\n *   [en]Create a alert dialog instance from a template.[/en]\n *   [ja][/ja]\n */\nons.createPopover = ons.createDialog = ons.createAlertDialog = (template, options = {}) => ons.createElement(template, Object.assign({ append: true }, options));\n\n/**\n * @method openActionSheet\n * @signature openActionSheet(options)\n * @description\n *   [en]Shows an instant Action Sheet and lets the user choose an action.[/en]\n *   [ja][/ja]\n * @param {Object} [options]\n *   [en]Parameter object.[/en]\n *   [ja][/ja]\n * @param {Array} [options.buttons]\n *   [en]Represent each button of the action sheet following the specified order. Every item can be either a string label or an object containing `label`, `icon` and `modifier` properties.[/en]\n *   [ja][/ja]\n * @param {String} [options.title]\n *   [en]Optional title for the action sheet.[/en]\n *   [ja][/ja]\n * @param {Number} [options.destructive]\n *   [en]Optional index of the \"destructive\" button (only for iOS). It can be specified in the button array as well.[/en]\n *   [ja][/ja]\n * @param {Boolean} [options.cancelable]\n *   [en]Whether the action sheet can be canceled by tapping on the background mask or not.[/en]\n *   [ja][/ja]\n * @param {String} [options.modifier]\n *   [en]Modifier attribute of the action sheet. E.g. `'destructive'`.[/en]\n *   [ja][/ja]\n * @param {String} [options.maskColor]\n *   [en]Optionally change the background mask color.[/en]\n *   [ja][/ja]\n * @param {String} [options.id]\n *   [en]The element's id attribute.[/en]\n *   [ja][/ja]\n * @param {String} [options.class]\n *   [en]The element's class attribute.[/en]\n *   [ja][/ja]\n * @return {Promise}\n *   [en]Will resolve when the action sheet is closed. The resolve value is either the index of the tapped button or -1 when canceled.[/en]\n *   [ja][/ja]\n */\nons.openActionSheet = actionSheet;\n\n/**\n * @method resolveLoadingPlaceholder\n * @signature resolveLoadingPlaceholder(page)\n * @param {String} page\n *   [en]Page name. Can be either an HTML file or an <ons-template> element.[/en]\n *   [ja]pageURLons-templateid[/ja]\n * @description\n *   [en]If no page is defined for the `ons-loading-placeholder` attribute it will wait for this method being called before loading the page.[/en]\n *   [ja]ons-loading-placeholderons.resolveLoadingPlaceholder[/ja]\n */\nons.resolveLoadingPlaceholder = (page, link) => {\n  const elements = ons._util.arrayFrom(window.document.querySelectorAll('[ons-loading-placeholder]'));\n  if (elements.length === 0) {\n    throw new Error('No ons-loading-placeholder exists.');\n  }\n\n  elements\n    .filter(element => !element.getAttribute('page'))\n    .forEach(element => {\n      element.setAttribute('ons-loading-placeholder', page);\n      ons._resolveLoadingPlaceholder(element, page, link);\n    });\n};\n\n\nons._setupLoadingPlaceHolders = function() {\n  ons.ready(() => {\n    const elements = ons._util.arrayFrom(window.document.querySelectorAll('[ons-loading-placeholder]'));\n\n    elements.forEach(element => {\n      const page = element.getAttribute('ons-loading-placeholder');\n      if (typeof page === 'string') {\n        ons._resolveLoadingPlaceholder(element, page);\n      }\n    });\n  });\n};\n\nons._resolveLoadingPlaceholder = function(element, page, link) {\n  link = link || function(element, done) { done(); };\n  ons._internal.getPageHTMLAsync(page).then(html => {\n\n    while (element.firstChild) {\n      element.removeChild(element.firstChild);\n    }\n\n    const contentElement = ons._util.createElement('<div>' + html + '</div>');\n    contentElement.style.display = 'none';\n\n    element.appendChild(contentElement);\n\n    link(contentElement, function() {\n      contentElement.style.display = '';\n    });\n\n  }).catch(error => {\n    throw new Error('Unabled to resolve placeholder: ' + error);\n  });\n};\n\nfunction waitDeviceReady() {\n  const unlockDeviceReady = ons._readyLock.lock();\n  window.addEventListener('DOMContentLoaded', () => {\n    if (ons.isWebView()) {\n      window.document.addEventListener('deviceready', unlockDeviceReady, false);\n    } else {\n      unlockDeviceReady();\n    }\n  }, false);\n}\n\n/**\n * @method getScriptPage\n * @signature getScriptPage()\n * @description\n *   [en]Access the last created page from the current `script` scope. Only works inside `<script></script>` tags that are direct children of `ons-page` element. Use this to add lifecycle hooks to a page.[/en]\n *   [ja][/ja]\n * @return {HTMLElement}\n *   [en]Returns the corresponding page element.[/en]\n *   [ja][/ja]\n */\nconst getCS = 'currentScript' in document ? () => document.currentScript : () => document.scripts[document.scripts.length - 1];\nons.getScriptPage = () => getCS() && /ons-page/i.test(getCS().parentElement.tagName) && getCS().parentElement || null;\n\nwindow._superSecretOns = ons;\nexport default ons;\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nfunction getElementClass() {\n  if (typeof HTMLElement !== 'function') { // case of Safari\n    const BaseElement = () => {};\n    BaseElement.prototype = document.createElement('div');\n    return BaseElement;\n  } else {\n    return HTMLElement;\n  }\n}\n\nexport default class BaseElement extends getElementClass() {\n  constructor() {\n    super();\n  }\n}\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../ons/util';\nimport autoStyle from '../ons/autostyle';\nimport ModifierUtil from '../ons/internal/modifier-util';\nimport BaseElement from './base/base-element';\n\nconst scheme = {'': 'button--*'};\n\nconst defaultClassName = 'button';\n\n/**\n * @element ons-button\n * @category form\n * @modifier outline\n *   [en]Button with outline and transparent background[/en]\n *   [ja][/ja]\n * @modifier light\n *   [en]Button that doesn't stand out.[/en]\n *   [ja][/ja]\n * @modifier quiet\n *   [en]Button with no outline and or background..[/en]\n *   [ja][/ja]\n * @modifier cta\n *   [en]Button that really stands out.[/en]\n *   [ja][/ja]\n * @modifier large\n *   [en]Large button that covers the width of the screen.[/en]\n *   [ja][/ja]\n * @modifier large--quiet\n *   [en]Large quiet button.[/en]\n *   [ja]quiet[/ja]\n * @modifier large--cta\n *   [en]Large call to action button.[/en]\n *   [ja]cta[/ja]\n * @modifier material\n *   [en]Material Design button[/en]\n *   [ja][/ja]\n * @modifier material--flat\n *   [en]Material Design flat button[/en]\n *   [ja][/ja]\n * @description\n *   [en]\n *     Button component. If you want to place a button in a toolbar, use `<ons-toolbar-button>` or `<ons-back-button>` instead.\n *\n *     Will automatically display as a Material Design button with a ripple effect on Android.\n *   [/en]\n *   [ja]ons-toolbar-buttonons-back-button[/ja]\n * @codepen hLayx\n * @tutorial vanilla/Reference/button\n * @guide using-modifier [en]More details about the `modifier` attribute[/en][ja]modifier[/ja]\n * @guide cross-platform-styling [en]Information about cross platform styling[/en][ja]Information about cross platform styling[/ja]\n * @example\n * <ons-button modifier=\"large--cta\">\n *   Tap Me\n * </ons-button>\n */\n\nexport default class ButtonElement extends BaseElement {\n\n  /**\n   * @attribute modifier\n   * @type {String}\n   * @description\n   *  [en]The appearance of the button.[/en]\n   *  [ja][/ja]\n   */\n\n  /**\n   * @attribute ripple\n   * @description\n   *  [en]If this attribute is defined, the button will have a ripple effect.[/en]\n   *  [ja][/ja]\n   */\n\n  /**\n   * @attribute disabled\n   * @description\n   *   [en]Specify if button should be disabled.[/en]\n   *   [ja][/ja]\n   */\n\n  constructor() {\n    super();\n\n    this._compile();\n  }\n\n  static get observedAttributes() {\n    return ['modifier', 'ripple', 'class'];\n  }\n\n  attributeChangedCallback(name, last, current) {\n    switch (name) {\n      case 'class':\n        util.restoreClass(this, defaultClassName, scheme);\n        break;\n      case 'modifier':\n        ModifierUtil.onModifierChanged(last, current, this, scheme);\n        break;\n      case 'ripple':\n        this._updateRipple();\n    }\n  }\n\n  /**\n   * @property disabled\n   * @type {Boolean}\n   * @description\n   *   [en]Whether the button is disabled or not.[/en]\n   *   [ja]`true`[/ja]\n   */\n  set disabled(value) {\n    return util.toggleAttribute(this, 'disabled', value);\n  }\n\n  get disabled() {\n    return this.hasAttribute('disabled');\n  }\n\n  _compile() {\n    autoStyle.prepare(this);\n\n    this.classList.add(defaultClassName);\n\n    this._updateRipple();\n\n    ModifierUtil.initModifier(this, scheme);\n  }\n\n  _updateRipple() {\n    util.updateRipple(this);\n  }\n}\n\ncustomElements.define('ons-button', ButtonElement);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../ons/util';\nimport autoStyle from '../ons/autostyle';\nimport ModifierUtil from '../ons/internal/modifier-util';\nimport BaseElement from './base/base-element';\nimport contentReady from '../ons/content-ready';\n\nconst defaultClassName = 'list-item';\nconst scheme = {\n  '.list-item': 'list-item--*',\n  '.list-item__left': 'list-item--*__left',\n  '.list-item__center': 'list-item--*__center',\n  '.list-item__right': 'list-item--*__right',\n  '.list-item__label': 'list-item--*__label',\n  '.list-item__title': 'list-item--*__title',\n  '.list-item__subtitle': 'list-item--*__subtitle',\n  '.list-item__thumbnail': 'list-item--*__thumbnail',\n  '.list-item__icon': 'list-item--*__icon'\n};\n\n/**\n * @element ons-list-item\n * @category list\n * @modifier tappable\n *   [en]Make the list item change appearance when it's tapped. On iOS it is better to use the \"tappable\" and \"tap-background-color\" attribute for better behavior when scrolling.[/en]\n *   [ja][/ja]\n * @modifier chevron\n *   [en]Display a chevron at the right end of the list item and make it change appearance when tapped.[/en]\n *   [ja][/ja]\n * @modifier longdivider\n *   [en]Displays a long horizontal divider between items.[/en]\n *   [ja][/ja]\n * @modifier nodivider\n *   [en]Removes the divider between list items.[/en]\n *   [ja][/ja]\n * @modifier material\n *   [en]Display a Material Design list item.[/en]\n *   [ja][/ja]\n * @description\n *   [en]\n *     Component that represents each item in a list. The list item is composed of three parts that are represented with the `left`, `center` and `right` classes. These classes can be used to ensure that the content of the list items is properly aligned.\n *\n *     ```\n *     <ons-list-item>\n *       <div class=\"left\">Left</div>\n *       <div class=\"center\">Center</div>\n *       <div class=\"right\">Right</div>\n *     </ons-list-item>\n *     ```\n *\n *     There is also a number of classes (prefixed with `list-item__*`) that help when putting things like icons and thumbnails into the list items.\n *   [/en]\n *   [ja][/ja]\n * @seealso ons-list\n *   [en]ons-list component[/en]\n *   [ja]ons-list[/ja]\n * @seealso ons-list-header\n *   [en]ons-list-header component[/en]\n *   [ja]ons-list-header[/ja]\n * @guide lists\n *   [en]Using lists[/en]\n *   [ja][/ja]\n * @codepen yxcCt\n * @tutorial vanilla/Reference/list\n * @example\n * <ons-list-item>\n *   <div class=\"left\">\n *     <ons-icon icon=\"md-face\" class=\"list-item__icon\"></ons-icon>\n *   </div>\n *   <div class=\"center\">\n *     <div class=\"list-item__title\">Title</div>\n *     <div class=\"list-item__subtitle\">Subtitle</div>\n *   </div>\n *   <div class=\"right\">\n *     <ons-switch></ons-switch>\n *   </div>\n * </ons-list-item>\n */\nexport default class ListItemElement extends BaseElement {\n\n  /**\n   * @attribute modifier\n   * @type {String}\n   * @description\n   *   [en]The appearance of the list item.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @attribute lock-on-drag\n   * @type {String}\n   * @description\n   *   [en]Prevent vertical scrolling when the user drags horizontally.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @attribute tappable\n   * @type {Boolean}\n   * @description\n   *   [en]Makes the element react to taps.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @attribute tap-background-color\n   * @type {Color}\n   * @description\n   *   [en] Changes the background color when tapped. For this to work, the attribute \"tappable\" needs to be set. The default color is \"#d9d9d9\". It will display as a ripple effect on Android.[/en]\n   *   [ja][/ja]\n   */\n\n  constructor() {\n    super();\n\n    contentReady(this, () => {\n      this._compile();\n    });\n  }\n\n  _compile() {\n    autoStyle.prepare(this);\n\n    this.classList.add(defaultClassName);\n\n    let left, center, right;\n\n    for (let i = 0; i < this.children.length; i++) {\n      const el = this.children[i];\n\n      if (el.classList.contains('left')) {\n        el.classList.add('list-item__left');\n        left = el;\n      }\n      else if (el.classList.contains('center')) {\n        center = el;\n      }\n      else if (el.classList.contains('right')) {\n        el.classList.add('list-item__right');\n        right = el;\n      }\n    }\n\n    if (!center) {\n      center = document.createElement('div');\n\n      if (!left && !right) {\n        while (this.childNodes[0]) {\n          center.appendChild(this.childNodes[0]);\n        }\n      } else {\n        for (let i = this.childNodes.length - 1; i >= 0; i--) {\n          const el = this.childNodes[i];\n          if (el !== left && el !== right) {\n            center.insertBefore(el, center.firstChild);\n          }\n        }\n      }\n\n      this.insertBefore(center, right || null);\n    }\n\n    center.classList.add('center');\n    center.classList.add('list-item__center');\n\n    this._updateRipple();\n\n    ModifierUtil.initModifier(this, scheme);\n  }\n\n  static get observedAttributes() {\n    return ['modifier', 'class', 'ripple'];\n  }\n\n  attributeChangedCallback(name, last, current) {\n    switch (name) {\n      case 'class':\n        util.restoreClass(this, defaultClassName, scheme);\n        break;\n      case 'modifier':\n        ModifierUtil.onModifierChanged(last, current, this, scheme);\n        break;\n      case 'ripple':\n        this._updateRipple();\n        break;\n    }\n  }\n\n  connectedCallback() {\n    this.addEventListener('drag', this._onDrag);\n    this.addEventListener('touchstart', this._onTouch);\n    this.addEventListener('mousedown', this._onTouch);\n    this.addEventListener('touchend', this._onRelease);\n    this.addEventListener('touchmove', this._onRelease);\n    this.addEventListener('touchcancel', this._onRelease);\n    this.addEventListener('mouseup', this._onRelease);\n    this.addEventListener('mouseout', this._onRelease);\n    this.addEventListener('touchleave', this._onRelease);\n\n    this._originalBackgroundColor = this.style.backgroundColor;\n\n    this.tapped = false;\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('drag', this._onDrag);\n    this.removeEventListener('touchstart', this._onTouch);\n    this.removeEventListener('mousedown', this._onTouch);\n    this.removeEventListener('touchend', this._onRelease);\n    this.removeEventListener('touchmove', this._onRelease);\n    this.removeEventListener('touchcancel', this._onRelease);\n    this.removeEventListener('mouseup', this._onRelease);\n    this.removeEventListener('mouseout', this._onRelease);\n    this.removeEventListener('touchleave', this._onRelease);\n  }\n\n  get _transition() {\n    return 'background-color 0.0s linear 0.02s, box-shadow 0.0s linear 0.02s';\n  }\n\n  get _tappable() {\n    return this.hasAttribute('tappable');\n  }\n\n  get _tapBackgroundColor() {\n    return this.getAttribute('tap-background-color') || '#d9d9d9';\n  }\n\n  _updateRipple() {\n    util.updateRipple(this);\n  }\n\n  _onDrag(event) {\n    const gesture = event.gesture;\n    // Prevent vertical scrolling if the users pans left or right.\n    if (this._shouldLockOnDrag() && ['left', 'right'].indexOf(gesture.direction) > -1) {\n      gesture.preventDefault();\n    }\n  }\n\n  _onTouch() {\n    if (this.tapped) {\n      return;\n    }\n\n    this.tapped = true;\n\n    this.style.transition = this._transition;\n    this.style.webkitTransition = this._transition;\n    this.style.MozTransition = this._transition;\n\n    if (this._tappable) {\n      if (this.style.backgroundColor) {\n        this._originalBackgroundColor = this.style.backgroundColor;\n      }\n\n      this.style.backgroundColor = this._tapBackgroundColor;\n      this.style.boxShadow = `0px -1px 0px 0px ${this._tapBackgroundColor}`;\n    }\n  }\n\n  _onRelease() {\n    this.tapped = false;\n\n    this.style.transition = '';\n    this.style.webkitTransition = '';\n    this.style.MozTransition = '';\n\n    this.style.backgroundColor = this._originalBackgroundColor || '';\n    this.style.boxShadow = '';\n  }\n\n  _shouldLockOnDrag() {\n    return this.hasAttribute('lock-on-drag');\n  }\n}\n\ncustomElements.define('ons-list-item', ListItemElement);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../ons/util';\nimport autoStyle from '../ons/autostyle';\nimport ModifierUtil from '../ons/internal/modifier-util';\nimport BaseElement from './base/base-element';\n\nconst defaultClassName = 'list';\nconst scheme = {'': 'list--*'};\n\n/**\n * @element ons-list\n * @category list\n * @modifier inset\n *   [en]Inset list that doesn't cover the whole width of the parent.[/en]\n *   [ja][/ja]\n * @modifier noborder\n *   [en]A list with no borders at the top and bottom.[/en]\n *   [ja][/ja]\n * @description\n *   [en]Component to define a list, and the container for ons-list-item(s).[/en]\n *   [ja]ons-list-item[/ja]\n * @seealso ons-list-item\n *   [en]ons-list-item component[/en]\n *   [ja]ons-list-item[/ja]\n * @seealso ons-list-header\n *   [en]ons-list-header component[/en]\n *   [ja]ons-list-header[/ja]\n * @seealso ons-lazy-repeat\n *   [en]ons-lazy-repeat component[/en]\n *   [ja]ons-lazy-repeat[/ja]\n * @guide lists\n *   [en]Using lists[/en]\n *   [ja][/ja]\n * @guide infinite-scroll\n *   [en]Loading more items on infinite scroll[/en]\n *   [ja]Loading more items on infinite scroll[/ja]\n * @codepen yxcCt\n * @tutorial vanilla/Reference/list\n * @example\n * <ons-list>\n *   <ons-list-header>Header Text</ons-list-header>\n *   <ons-list-item>Item</ons-list-item>\n *   <ons-list-item>Item</ons-list-item>\n * </ons-list>\n */\nexport default class ListElement extends BaseElement {\n\n  /**\n   * @attribute modifier\n   * @type {String}\n   * @description\n   *   [en]The appearance of the list.[/en]\n   *   [ja][/ja]\n   */\n\n  constructor() {\n    super();\n\n    this._compile();\n  }\n\n  _compile() {\n    autoStyle.prepare(this);\n    this.classList.add(defaultClassName);\n    ModifierUtil.initModifier(this, scheme);\n  }\n\n  static get observedAttributes() {\n    return ['modifier', 'class'];\n  }\n\n  attributeChangedCallback(name, last, current) {\n    switch (name) {\n      case 'class':\n        util.restoreClass(this, defaultClassName, scheme);\n        break;\n      case 'modifier':\n        ModifierUtil.onModifierChanged(last, current, this, scheme);\n        break;\n    }\n  }\n}\n\ncustomElements.define('ons-list', ListElement);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../ons/util';\nimport internal from '../ons/internal';\nimport autoStyle from '../ons/autostyle';\nimport ModifierUtil from '../ons/internal/modifier-util';\nimport BaseElement from './base/base-element';\nimport contentReady from '../ons/content-ready';\n\nconst defaultClassName = 'toolbar';\n\nconst scheme = {\n  '': 'toolbar--*',\n  '.toolbar__left': 'toolbar--*__left',\n  '.toolbar__center': 'toolbar--*__center',\n  '.toolbar__right': 'toolbar--*__right'\n};\n\n/**\n * @element ons-toolbar\n * @category page\n * @modifier material\n *   [en]Material Design toolbar.[/en]\n *   [ja][/ja]\n * @modifier transparent\n *   [en]Transparent toolbar.[/en]\n *   [ja][/ja]\n * @modifier cover-content\n *   [en]Displays the toolbar on top of the page's content. Should be combined with `transparent` modifier.[/en]\n *   [ja][/ja]\n * @modifier noshadow\n *   [en]Toolbar without shadow.[/en]\n *   [ja][/ja]\n * @description\n *   [en]\n *     Toolbar component that can be used with navigation.\n *\n *     Left, center and right container can be specified by class names.\n *\n *     This component will automatically displays as a Material Design toolbar when running on Android devices.\n *   [/en]\n *   [ja][/ja]\n * @codepen aHmGL\n * @tutorial vanilla/Reference/page\n * @guide adding-a-toolbar [en]Adding a toolbar[/en][ja][/ja]\n * @seealso ons-bottom-toolbar\n *   [en]The `<ons-bottom-toolbar>` displays a toolbar on the bottom of the page.[/en]\n *   [ja]ons-bottom-toolbar[/ja]\n * @seealso ons-back-button\n *   [en]The `<ons-back-button>` component displays a back button inside the toolbar.[/en]\n *   [ja]ons-back-button[/ja]\n * @seealso ons-toolbar-button\n *   [en]The `<ons-toolbar-button>` component displays a toolbar button inside the toolbar.[/en]\n *   [ja]ons-toolbar-button[/ja]\n * @example\n * <ons-page>\n *   <ons-toolbar>\n *     <div class=\"left\">\n *       <ons-back-button>\n *         Back\n *       </ons-back-button>\n *     </div>\n *     <div class=\"center\">\n *       Title\n *     </div>\n *     <div class=\"right\">\n *       <ons-toolbar-button>\n *         <ons-icon icon=\"md-menu\"></ons-icon>\n *       </ons-toolbar-button>\n *     </div>\n *   </ons-toolbar>\n * </ons-page>\n */\n\nexport default class ToolbarElement extends BaseElement {\n\n  /**\n   * @attribute inline\n   * @initonly\n   * @description\n   *   [en]Display the toolbar as an inline element.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @attribute modifier\n   * @description\n   *   [en]The appearance of the toolbar.[/en]\n   *   [ja][/ja]\n   */\n\n  constructor() {\n    super();\n\n    contentReady(this, () => {\n      this._compile();\n    });\n  }\n\n  static get observedAttributes() {\n    return ['modifier', 'class'];\n  }\n\n  attributeChangedCallback(name, last, current) {\n    switch (name) {\n      case 'class':\n        util.restoreClass(this, defaultClassName, scheme);\n        break;\n      case 'modifier':\n        ModifierUtil.onModifierChanged(last, current, this, scheme);\n        break;\n    }\n  }\n\n  /**\n   * @return {HTMLElement}\n   */\n  _getToolbarLeftItemsElement() {\n    return this.querySelector('.left') || internal.nullElement;\n  }\n\n  /**\n   * @return {HTMLElement}\n   */\n  _getToolbarCenterItemsElement() {\n    return this.querySelector('.center') || internal.nullElement;\n  }\n\n  /**\n   * @return {HTMLElement}\n   */\n  _getToolbarRightItemsElement() {\n    return this.querySelector('.right') || internal.nullElement;\n  }\n\n  /**\n   * @return {HTMLElement}\n   */\n  _getToolbarBackButtonLabelElement() {\n    return this.querySelector('ons-back-button .back-button__label') || internal.nullElement;\n  }\n\n  /**\n   * @return {HTMLElement}\n   */\n  _getToolbarBackButtonIconElement() {\n    return this.querySelector('ons-back-button .back-button__icon') || internal.nullElement;\n  }\n\n  _compile() {\n    autoStyle.prepare(this);\n    this.classList.add(defaultClassName);\n    this._ensureToolbarItemElements();\n    ModifierUtil.initModifier(this, scheme);\n  }\n\n  _ensureToolbarItemElements() {\n    for (let i = this.childNodes.length - 1; i >= 0 ; i--) {\n      // case of not element\n      if (this.childNodes[i].nodeType != 1) {\n        this.removeChild(this.childNodes[i]);\n      }\n    }\n\n    const center = this._ensureToolbarElement('center');\n    center.classList.add('toolbar__title');\n\n    if (this.children.length !== 1 || !this.children[0].classList.contains('center')) {\n      const left = this._ensureToolbarElement('left');\n      const right = this._ensureToolbarElement('right');\n\n      if (this.children[0] !== left || this.children[1] !== center || this.children[2] !== right) {\n        this.appendChild(left);\n        this.appendChild(center);\n        this.appendChild(right);\n      }\n    }\n  }\n\n  _ensureToolbarElement(name) {\n    if (util.findChild(this, '.toolbar__' + name)) {\n      const element = util.findChild(this, '.toolbar__' + name);\n      element.classList.add(name);\n      return element;\n    }\n\n    const element = util.findChild(this, '.' + name) || util.create('.' + name);\n    element.classList.add('toolbar__' + name);\n\n    return element;\n  }\n}\n\ncustomElements.define('ons-toolbar', ToolbarElement);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../ons/util';\nimport internal from '../ons/internal';\nimport autoStyle from '../ons/autostyle';\nimport ModifierUtil from '../ons/internal/modifier-util';\nimport BaseElement from './base/base-element';\nimport deviceBackButtonDispatcher from '../ons/device-back-button-dispatcher';\nimport contentReady from '../ons/content-ready';\n\nimport './ons-toolbar'; // ensures that 'ons-toolbar' element is registered\n\nconst defaultClassName = 'page';\nconst scheme = {\n  '': 'page--*',\n  '.page__content': 'page--*__content',\n  '.page__background': 'page--*__background'\n};\n\nconst nullToolbarElement = document.createElement('ons-toolbar'); // requires that 'ons-toolbar' element is registered\n\n/**\n * @element ons-page\n * @category page\n * @modifier material\n *   [en]Material Design style[/en]\n *   [ja][/ja]\n * @description\n *   [en]\n *     This component defines the root of each page. If the content is large it will become scrollable.\n *\n *     A navigation bar can be added to the top of the page using the `<ons-toolbar>` element.\n *   [/en]\n *   [ja][/ja]\n * @tutorial vanilla/Reference/page\n * @guide creating-a-page\n *   [en]Setting up a page in its `init` event[/en]\n *   [ja]Setting up a page in its `init` event[/ja]\n * @guide templates\n *   [en]Defining multiple pages in single html[/en]\n *   [ja]1HTML[/ja]\n * @guide multiple-page-navigation\n *   [en]Managing multiple pages[/en]\n *   [ja][/ja]\n * @guide using-modifier [en]More details about the `modifier` attribute[/en][ja]modifier[/ja]\n * @seealso ons-toolbar\n *   [en]Use the `<ons-toolbar>` element to add a navigation bar to the top of the page.[/en]\n *   [ja][/ja]\n * @example\n * <ons-page>\n *   <ons-toolbar>\n *     <div class=\"left\">\n *       <ons-back-button>Back</ons-back-button>\n *     </div>\n *     <div class=\"center\">Title</div>\n *     <div class=\"right\">\n *       <ons-toolbar-button>\n *         <ons-icon icon=\"md-menu\"></ons-icon>\n *       </ons-toolbar-button>\n *     </div>\n *   </ons-toolbar>\n *\n *   <p>Page content</p>\n * </ons-page>\n *\n * @example\n * <script>\n *   myApp.handler = function(done) {\n *     loadMore().then(done);\n *   }\n * </script>\n *\n * <ons-page on-infinite-scroll=\"myApp.handler\">\n *   <ons-toolbar>\n *     <div class=\"center\">List</div>\n *   </ons-toolbar>\n *\n *   <ons-list>\n *     <ons-list-item>#1</ons-list-item>\n *     <ons-list-item>#2</ons-list-item>\n *     <ons-list-item>#3</ons-list-item>\n *     ...\n *   </ons-list>\n * </ons-page>\n */\nexport default class PageElement extends BaseElement {\n\n  /**\n   * @event init\n   * @description\n   *   [en]Fired right after the page is attached.[/en]\n   *   [ja][/ja]\n   * @param {Object} event [en]Event object.[/en]\n   */\n\n  /**\n   * @event show\n   * @description\n   *   [en]Fired right after the page is shown.[/en]\n   *   [ja][/ja]\n   * @param {Object} event [en]Event object.[/en]\n   */\n\n  /**\n   * @event hide\n   * @description\n   *   [en]Fired right after the page is hidden.[/en]\n   *   [ja][/ja]\n   * @param {Object} event [en]Event object.[/en]\n   */\n\n  /**\n   * @event destroy\n   * @description\n   *   [en]Fired right before the page is destroyed.[/en]\n   *   [ja][/ja]\n   * @param {Object} event [en]Event object.[/en]\n   */\n\n  /**\n   * @attribute modifier\n   * @type {String}\n   * @description\n   *   [en]Specify modifier name to specify custom styles.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @attribute on-infinite-scroll\n   * @type {String}\n   * @description\n   *   [en]Path of the function to be executed on infinite scrolling. Example: `app.loadData`. The function receives a done callback that must be called when it's finished.[/en]\n   *   [ja][/ja]\n   */\n\n  constructor() {\n    super();\n\n    this._deriveHooks();\n\n    this.classList.add(defaultClassName);\n    this._initialized = false;\n\n    contentReady(this, () => {\n      this._compile();\n\n      this._isShown = false;\n      this._contentElement = this._getContentElement();\n      this._backgroundElement = this._getBackgroundElement();\n    });\n  }\n\n  connectedCallback() {\n    if (this._initialized) {\n      return;\n    }\n\n    this._initialized = true;\n\n    contentReady(this, () => {\n      setImmediate(() => {\n        this.onInit && this.onInit();\n        util.triggerElementEvent(this, 'init');\n      });\n\n      if (!util.hasAnyComponentAsParent(this)) {\n        setImmediate(() => this._show());\n      }\n\n      this._tryToFillStatusBar();\n\n      if (this.hasAttribute('on-infinite-scroll')) {\n        this.attributeChangedCallback('on-infinite-scroll', null, this.getAttribute('on-infinite-scroll'));\n      }\n    });\n  }\n\n  updateBackButton(show) {\n    if (this.backButton) {\n      show ? this.backButton.show() : this.backButton.hide();\n    }\n  }\n\n  set name(str) {\n    this.setAttribute('name', str);\n  }\n\n  get name() {\n    return this.getAttribute('name');\n  }\n\n  get backButton() {\n    return this.querySelector('ons-back-button');\n  }\n\n  _tryToFillStatusBar(){\n    internal.autoStatusBarFill(() => {\n      const filled = util.findParent(this, e => e.hasAttribute('status-bar-fill'), e => !e.nodeName.match(/ons-modal/i));\n      util.toggleAttribute(this, 'status-bar-fill', !filled && (this._canAnimateToolbar() || !this._hasAPageControlChild()));\n    });\n  }\n\n  _hasAPageControlChild() {\n    return util.findChild(this._contentElement, util.isPageControl);\n  }\n\n  /**\n   * @property onInfiniteScroll\n   * @description\n   *  [en]Function to be executed when scrolling to the bottom of the page. The function receives a done callback as an argument that must be called when it's finished.[/en]\n   *  [ja][/ja]\n   */\n  set onInfiniteScroll(value) {\n    if (value && !(value instanceof Function)) {\n      throw new Error('onInfiniteScroll must be a function or null');\n    }\n\n    contentReady(this, () => {\n      if (!value) {\n        this._contentElement.removeEventListener('scroll', this._boundOnScroll);\n      } else if (!this._onInfiniteScroll) {\n        this._infiniteScrollLimit = 0.9;\n        this._boundOnScroll = this._onScroll.bind(this);\n        setImmediate(() => this._contentElement.addEventListener('scroll', this._boundOnScroll));\n      }\n      this._onInfiniteScroll = value;\n    });\n  }\n\n  get onInfiniteScroll() {\n    return this._onInfiniteScroll;\n  }\n\n  _onScroll() {\n    const c = this._contentElement,\n      overLimit = (c.scrollTop + c.clientHeight) / c.scrollHeight >= this._infiniteScrollLimit;\n\n    if (this._onInfiniteScroll && !this._loadingContent && overLimit) {\n      this._loadingContent = true;\n      this._onInfiniteScroll(() => this._loadingContent = false);\n    }\n  }\n\n  /**\n   * @property onDeviceBackButton\n   * @type {Object}\n   * @description\n   *   [en]Back-button handler.[/en]\n   *   [ja][/ja]\n   */\n  get onDeviceBackButton() {\n    return this._backButtonHandler;\n  }\n\n  set onDeviceBackButton(callback) {\n    if (this._backButtonHandler) {\n      this._backButtonHandler.destroy();\n    }\n\n    this._backButtonHandler = deviceBackButtonDispatcher.createHandler(this, callback);\n  }\n\n  get scrollTop() {\n    return this._contentElement.scrollTop;\n  }\n\n  set scrollTop(newValue) {\n    this._contentElement.scrollTop = newValue;\n  }\n\n  /**\n   * @return {HTMLElement}\n   */\n  _getContentElement() {\n    const result = util.findChild(this, '.page__content');\n    if (result) {\n      return result;\n    }\n    throw Error('fail to get \".page__content\" element.');\n  }\n\n  /**\n   * @return {Boolean}\n   */\n  _canAnimateToolbar() {\n    if (util.findChild(this, 'ons-toolbar')) {\n      return true;\n    }\n    return !!util.findChild(this._contentElement, el => {\n      return util.match(el, 'ons-toolbar') && !el.hasAttribute('inline');\n    });\n  }\n\n  /**\n   * @return {HTMLElement}\n   */\n  _getBackgroundElement() {\n    const result = util.findChild(this, '.page__background');\n    if (result) {\n      return result;\n    }\n    throw Error('fail to get \".page__background\" element.');\n  }\n\n  /**\n   * @return {HTMLElement}\n   */\n  _getBottomToolbarElement() {\n    return util.findChild(this, 'ons-bottom-toolbar') || internal.nullElement;\n  }\n\n  /**\n   * @return {HTMLElement}\n   */\n  _getToolbarElement() {\n    return util.findChild(this, 'ons-toolbar') || nullToolbarElement;\n  }\n\n  static get observedAttributes() {\n    return ['modifier', 'on-infinite-scroll', 'class'];\n  }\n\n  attributeChangedCallback(name, last, current) {\n    switch (name) {\n      case 'class':\n        util.restoreClass(this, defaultClassName, scheme);\n        break;\n      case 'modifier':\n        ModifierUtil.onModifierChanged(last, current, this, scheme);\n        break;\n      case 'on-infinite-scroll':\n        if (current === null) {\n          this.onInfiniteScroll = null;\n        } else {\n          this.onInfiniteScroll = (done) => {\n            const f = util.findFromPath(current);\n            this.onInfiniteScroll = f;\n            f(done);\n          };\n        }\n        break;\n    }\n  }\n\n  _compile() {\n    autoStyle.prepare(this);\n\n    const toolbar = util.findChild(this, 'ons-toolbar');\n\n    const background = util.findChild(this, '.page__background') || util.findChild(this, '.background') || document.createElement('div');\n    background.classList.add('page__background');\n    this.insertBefore(background, !toolbar && this.firstChild || toolbar && toolbar.nextSibling);\n\n    const content = util.findChild(this, '.page__content') || util.findChild(this, '.content') || document.createElement('div');\n    content.classList.add('page__content');\n    if (!content.parentElement) {\n      util.arrayFrom(this.childNodes).forEach(node => {\n        if (node.nodeType !== 1 || this._elementShouldBeMoved(node)) {\n          content.appendChild(node);\n        }\n      });\n    }\n    this.insertBefore(content, background.nextSibling);\n\n    // Make wrapper pages transparent for animations\n    if (!background.style.backgroundColor\n      && content.children.length === 1\n      && util.isPageControl(content.children[0])\n    ) {\n        background.style.backgroundColor = 'transparent';\n    }\n\n    ModifierUtil.initModifier(this, scheme);\n  }\n\n  _elementShouldBeMoved(el) {\n    if (el.classList.contains('page__background')) {\n      return false;\n    }\n    const tagName = el.tagName.toLowerCase();\n    if (tagName === 'ons-fab') {\n      return !el.hasAttribute('position');\n    }\n    const fixedElements = ['script', 'ons-toolbar', 'ons-bottom-toolbar', 'ons-modal', 'ons-speed-dial', 'ons-dialog', 'ons-alert-dialog', 'ons-popover', 'ons-action-sheet'];\n    return el.hasAttribute('inline') || fixedElements.indexOf(tagName) === -1;\n  }\n\n  _show() {\n    if (!this._isShown && util.isAttached(this)) {\n      this._isShown = true;\n      this.onShow && this.onShow();\n      util.triggerElementEvent(this, 'show');\n      util.propagateAction(this, '_show');\n    }\n  }\n\n  _hide() {\n    if (this._isShown) {\n      this._isShown = false;\n      this.onHide && this.onHide();\n      util.triggerElementEvent(this, 'hide');\n      util.propagateAction(this, '_hide');\n    }\n  }\n\n  _destroy() {\n    this._hide();\n\n    this.onDestroy && this.onDestroy();\n    util.triggerElementEvent(this, 'destroy');\n\n    if (this.onDeviceBackButton) {\n      this.onDeviceBackButton.destroy();\n    }\n\n    util.propagateAction(this, '_destroy');\n\n    this.remove();\n  }\n\n  _deriveHooks() {\n    this.constructor.events.forEach(event => {\n      const key = 'on' + event.charAt(0).toUpperCase() + event.slice(1);\n      Object.defineProperty(this, key, {\n        enumerable: true,\n        get: () => this[`_${key}`],\n        set: value => {\n          if (!(value instanceof Function)) {\n            throw new Error(`${key} hook must be a function`);\n          }\n          this[`_${key}`] = value.bind(this);\n        }\n      });\n    });\n  }\n\n  static get events() {\n    return ['init', 'show', 'hide', 'destroy'];\n  }\n\n  /**\n   * @property data\n   * @type {*}\n   * @description\n   *   [en]User's custom data passed to `pushPage()`-like methods.[/en]\n   *   [ja][/ja]\n   */\n}\n\ncustomElements.define('ons-page', PageElement);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../ons/util';\nimport autoStyle from '../ons/autostyle';\nimport ModifierUtil from '../ons/internal/modifier-util';\nimport BaseElement from './base/base-element';\nimport contentReady from '../ons/content-ready';\n\nconst scheme = {\n  '.progress-bar': 'progress-bar--*',\n  '.progress-bar__primary': 'progress-bar--*__primary',\n  '.progress-bar__secondary': 'progress-bar--*__secondary'\n};\n\nconst template = util.createElement(`\n  <div class=\"progress-bar\">\n    <div class=\"progress-bar__secondary\"></div>\n    <div class=\"progress-bar__primary\"></div>\n  </div>\n`);\n\nconst INDET = 'indeterminate';\n\n/**\n * @element ons-progress-bar\n * @category visual\n * @description\n *   [en]\n *     The component is used to display a linear progress bar. It can either display a progress bar that shows the user how much of a task has been completed. In the case where the percentage is not known it can be used to display an animated progress bar so the user can see that an operation is in progress.\n *   [/en]\n *   [ja][/ja]\n * @codepen zvQbGj\n * @tutorial vanilla/Reference/progress\n * @seealso ons-progress-circular\n *   [en]The `<ons-progress-circular>` component displays a circular progress indicator.[/en]\n *   [ja][/ja]\n * @example\n * <ons-progress-bar\n *  value=\"55\"\n *  secondary-value=\"87\">\n * </ons-progress-bar>\n *\n * <ons-progress-bar\n *  indeterminate>\n * </ons-progress-bar>\n */\nexport default class ProgressBarElement extends BaseElement {\n\n  /**\n   * @attribute modifier\n   * @type {String}\n   * @description\n   *   [en]Change the appearance of the progress indicator.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @attribute value\n   * @type {Number}\n   * @description\n   *   [en]Current progress. Should be a value between 0 and 100.[/en]\n   *   [ja]0100[/ja]\n   */\n\n  /**\n   * @attribute secondary-value\n   * @type {Number}\n   * @description\n   *   [en]Current secondary progress. Should be a value between 0 and 100.[/en]\n   *   [ja]0100[/ja]\n   */\n\n  /**\n   * @attribute indeterminate\n   * @description\n   *   [en]If this attribute is set, an infinite looping animation will be shown.[/en]\n   *   [ja][/ja]\n   */\n\n  constructor() {\n    super();\n\n    contentReady(this, () => this._compile());\n  }\n\n  _compile() {\n    if (!this._isCompiled()) {\n      this._template = template.cloneNode(true);\n    } else {\n      this._template = util.findChild(this, '.progress-bar');\n    }\n\n    this._primary = util.findChild(this._template, '.progress-bar__primary');\n    this._secondary = util.findChild(this._template, '.progress-bar__secondary');\n\n    this._updateDeterminate();\n    this._updateValue();\n\n    this.appendChild(this._template);\n\n    autoStyle.prepare(this);\n    ModifierUtil.initModifier(this, scheme);\n  }\n\n  _isCompiled() {\n    if (!util.findChild(this, '.progress-bar')) {\n      return false;\n    }\n\n    const barElement = util.findChild(this, '.progress-bar');\n\n    if (!util.findChild(barElement, '.progress-bar__secondary')) {\n      return false;\n    }\n\n    if (!util.findChild(barElement, '.progress-bar__primary')) {\n      return false;\n    }\n\n    return true;\n  }\n\n  static get observedAttributes() {\n    return ['modifier', 'value', 'secondary-value', INDET];\n  }\n\n  attributeChangedCallback(name, last, current) {\n    if (name === 'modifier') {\n      ModifierUtil.onModifierChanged(last, current, this, scheme);\n      this.hasAttribute(INDET) && this._updateDeterminate();\n    } else if (name === 'value' || name === 'secondary-value') {\n      this._updateValue();\n    } else if (name === INDET) {\n      this._updateDeterminate();\n    }\n  }\n\n  _updateDeterminate() {\n    contentReady(this, () => util.toggleModifier(this, INDET, { force: this.hasAttribute(INDET) }));\n  }\n\n  _updateValue() {\n    contentReady(this, () => {\n      this._primary.style.width = (this.hasAttribute('value')) ? this.getAttribute('value') + '%' : '0%';\n      this._secondary.style.width = this.hasAttribute('secondary-value') ? this.getAttribute('secondary-value') + '%' : '0%';\n    });\n  }\n\n  /**\n   * @property value\n   * @type {Number}\n   * @description\n   *   [en]Current progress. Should be a value between 0 and 100.[/en]\n   *   [ja]0100[/ja]\n   */\n  set value(value) {\n    if (typeof value !== 'number' || value < 0 || value > 100) {\n      throw new Error('Invalid value');\n    }\n\n    this.setAttribute('value', Math.floor(value));\n  }\n\n  get value() {\n    return parseInt(this.getAttribute('value') || '0');\n  }\n\n  /**\n   * @property secondaryValue\n   * @type {Number}\n   * @description\n   *   [en]Current secondary progress. Should be a value between 0 and 100.[/en]\n   *   [ja]0100[/ja]\n   */\n  set secondaryValue(value) {\n    if (typeof value !== 'number' || value < 0 || value > 100) {\n      throw new Error('Invalid value');\n    }\n\n    this.setAttribute('secondary-value', Math.floor(value));\n  }\n\n  get secondaryValue() {\n    return parseInt(this.getAttribute('secondary-value') || '0');\n  }\n\n  /**\n   * @property indeterminate\n   * @type {Boolean}\n   * @description\n   *   [en]If this property is `true`, an infinite looping animation will be shown.[/en]\n   *   [ja][/ja]\n   */\n  set indeterminate(value) {\n    if (value) {\n      this.setAttribute(INDET, '');\n    }\n    else {\n      this.removeAttribute(INDET);\n    }\n  }\n\n  get indeterminate() {\n    return this.hasAttribute(INDET);\n  }\n}\n\ncustomElements.define('ons-progress-bar', ProgressBarElement);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../ons/util';\nimport internal from '../ons/internal';\nimport ModifierUtil from '../ons/internal/modifier-util';\nimport BaseElement from './base/base-element';\nimport {PageLoader, defaultPageLoader} from '../ons/page-loader';\nimport contentReady from '../ons/content-ready';\n\nconst rewritables = {\n  /**\n   * @param {Element} element\n   * @param {Function} callback\n   */\n  ready(element, callback) {\n    setImmediate(callback);\n  }\n};\n\n/**\n * @element ons-splitter-content\n * @category menu\n * @description\n *  [en]\n *    The `<ons-splitter-content>` element is used as a child element of `<ons-splitter>`.\n *\n *    It contains the main content of the page while `<ons-splitter-side>` contains the list.\n *  [/en]\n *  [ja]ons-splitter-contentons-splitter[/ja]\n * @codepen rOQOML\n * @tutorial vanilla/Reference/splitter\n * @guide multiple-page-navigation\n *  [en]Managing multiple pages.[/en]\n *  [ja]Managing multiple pages[/ja]\n * @seealso ons-splitter\n *  [en]The `<ons-splitter>` component is the parent element.[/en]\n *  [ja]ons-splitter[/ja]\n * @seealso ons-splitter-side\n *  [en]The `<ons-splitter-side>` component contains the menu.[/en]\n *  [ja]ons-splitter-side[/ja]\n * @example\n * <ons-splitter>\n *   <ons-splitter-content>\n *     ...\n *   </ons-splitter-content>\n *\n *   <ons-splitter-side side=\"left\" width=\"80%\" collapse>\n *     ...\n *   </ons-splitter-side>\n * </ons-splitter>\n */\nexport default class SplitterContentElement extends BaseElement {\n\n  /**\n   * @attribute page\n   * @type {String}\n   * @description\n   *   [en]\n   *     The url of the content page. If this attribute is used the content will be loaded from a `<ons-template>` tag or a remote file.\n   *\n   *     It is also possible to put `<ons-page>` element as a child of the element.\n   *   [/en]\n   *   [ja]ons-splitter-contentURL[/ja]\n   */\n\n  constructor() {\n    super();\n\n    this._page = null;\n    this._pageLoader = defaultPageLoader;\n\n    contentReady(this, () => {\n      rewritables.ready(this, () => {\n        const page = this._getPageTarget();\n\n        if (page) {\n          this.load(page);\n        }\n      });\n    });\n  }\n\n  connectedCallback() {\n    if (!util.match(this.parentNode, 'ons-splitter')) {\n      throw new Error(`\"ons-splitter-content\" must have \"ons-splitter\" as parentNode.`);\n    }\n  }\n\n  _getPageTarget() {\n    return this._page || this.getAttribute('page');\n  }\n\n  disconnectedCallback() {}\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  attributeChangedCallback(name, last, current) {\n  }\n\n  /**\n   * @property page\n   * @type {HTMLElement}\n   * @description\n   *   [en]The page to load in the splitter content.[/en]\n   *   [ja][/ja]\n   */\n  get page() {\n    return this._page;\n  }\n\n  /**\n   * @param {*} page\n   */\n  set page(page) {\n    this._page = page;\n  }\n\n  get _content() {\n    return this.children[0];\n  }\n\n  /**\n   * @property pageLoader\n   * @type {Function}\n   * @description\n   *   [en]Page element loaded in the splitter content.[/en]\n   *   [ja][/ja]\n   */\n  get pageLoader() {\n    return this._pageLoader;\n  }\n\n  set pageLoader(loader) {\n    if (!(loader instanceof PageLoader)) {\n      throw Error('First parameter must be an instance of PageLoader');\n    }\n    this._pageLoader = loader;\n  }\n\n  /**\n   * @method load\n   * @signature load(page, [options])\n   * @param {String} page, [options]\n   *   [en]Page URL. Can be either an HTML document or an `<ons-template>` id.[/en]\n   *   [ja]pageURLons-templateid[/ja]\n   * @param {Object} [options]\n   * @param {Function} [options.callback]\n   * @description\n   *   [en]Show the page specified in `page` in the content.[/en]\n   *   [ja]URL[/ja]\n   * @return {Promise}\n   *   [en]Resolves to the new `<ons-page>` element[/en]\n   *   [ja]`<ons-page>`Promise[/ja]\n   */\n  load(page, options = {}) {\n    this._page = page;\n    const callback = options.callback || function() {};\n\n    return new Promise(resolve => {\n      let oldContent = this._content || null;\n\n      this._pageLoader.load({page, parent: this}, pageElement => {\n        if (oldContent) {\n          this._pageLoader.unload(oldContent);\n          oldContent = null;\n        }\n\n        setImmediate(() => this._show());\n\n        callback(pageElement);\n        resolve(pageElement);\n      });\n    });\n  }\n\n  _show() {\n    if (this._content) {\n      this._content._show();\n    }\n  }\n\n  _hide() {\n    if (this._content) {\n      this._content._hide();\n    }\n  }\n\n  _destroy() {\n    if (this._content) {\n      this._pageLoader.unload(this._content);\n    }\n    this.remove();\n  }\n\n  static get rewritables() {\n    return rewritables;\n  }\n}\n\ncustomElements.define('ons-splitter-content', SplitterContentElement);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport BaseElement from './base/base-element';\nimport util from '../ons/util';\nimport contentReady from '../ons/content-ready';\n\nexport default class SplitterMaskElement extends BaseElement {\n\n  constructor() {\n    super();\n\n    this._boundOnClick = this._onClick.bind(this);\n    contentReady(this, () => {\n      if (this.parentNode._sides.every(side => side.mode === 'split')) {\n        this.setAttribute('style', 'display: none !important');\n      }\n    });\n  }\n\n  _onClick(event) {\n    if (this.onClick instanceof Function) {\n      this.onClick();\n    } else if (util.match(this.parentNode, 'ons-splitter')) {\n      this.parentNode._sides.forEach(side => side.close('left').catch(() => {}));\n    }\n    event.stopPropagation();\n  }\n\n  _preventScroll(e) {\n    e.cancelable && e.preventDefault(); // Fix for iOS. Prevents scrolling content behind mask.\n  }\n\n  static get observedAttributes() {\n    return [];\n  }\n\n  attributeChangedCallback(name, last, current) {\n  }\n\n  connectedCallback() {\n    this.addEventListener('click', this._boundOnClick);\n    this.addEventListener('touchmove', this._preventScroll);\n  }\n\n  disconnectedCallback() {\n    this.removeEventListener('click', this._boundOnClick);\n    this.removeEventListener('touchmove', this._preventScroll);\n  }\n}\n\ncustomElements.define('ons-splitter-mask', SplitterMaskElement);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../../ons/util';\nimport contentReady from '../../ons/content-ready';\nimport animit from '../../ons/animit';\nimport BaseAnimator from '../../ons/base-animator';\n\nexport default class SplitterAnimator extends BaseAnimator {\n\n  constructor({timing = 'cubic-bezier(.1, .7, .1, 1)', duration = 0.3, delay = 0} = {}) {\n    super({ timing, duration, delay });\n  }\n\n  updateOptions(options = {}) {\n    util.extend(this, {\n      timing: this.timing, duration: this.duration, delay: this.delay\n    }, options);\n  }\n\n  /**\n   * @param {Element} sideElement\n   */\n  activate(sideElement) {\n    const splitter = sideElement.parentNode;\n\n    contentReady(splitter, () => {\n      this._side = sideElement;\n      this._oppositeSide = splitter.right !== sideElement && splitter.right || splitter.left !== sideElement && splitter.left;\n      this._content = splitter.content;\n      this._mask = splitter.mask;\n    });\n  }\n\n  deactivate() {\n    this.clearTransition();\n    this._mask && this.clearMask();\n    this._content = this._side = this._oppositeSide = this._mask = null;\n  }\n\n  get minus() {\n    return this._side._side === 'right' ? '-' : '';\n  }\n\n  clearTransition() {\n    this._side && (this._side.style.transform = this._side.style.transition = this._side.style.webkitTransition = '');\n    this._mask && (this._mask.style.transform = this._mask.style.transition = this._mask.style.webkitTransition = '');\n    this._content && (this._content.style.transform = this._content.style.transition = this._content.style.webkitTransition = '');\n  }\n\n  clearMask() {\n    // Check if the other side needs the mask before clearing\n    if (!this._oppositeSide || this._oppositeSide.mode === 'split' || !this._oppositeSide.isOpen) {\n      this._mask.style.opacity = '';\n      this._mask.style.display = 'none';\n    }\n  }\n\n  /**\n   * @param {Number} distance\n   */\n  translate(distance) {\n\n  }\n\n  /**\n   * @param {Function} done\n   */\n  open(done) {\n    done();\n  }\n\n  /**\n   * @param {Function} done\n   */\n  close(done) {\n    done();\n  }\n}\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport animit from '../../ons/animit';\nimport SplitterAnimator from './animator.js';\n\nexport default class OverlaySplitterAnimator extends SplitterAnimator {\n\n  translate(distance) {\n    this._mask.style.display = 'block'; // Avoid content clicks\n\n    animit(this._side)\n      .queue({\n        transform: `translate3d(${this.minus + distance}px, 0px, 0px)`\n      })\n      .play();\n  }\n\n  /**\n   * @param {Function} done\n   */\n  open(done) {\n    animit.runAll(\n      animit(this._side)\n        .wait(this.delay)\n        .queue({\n          transform: `translate3d(${this.minus}100%, 0px, 0px)`\n        }, {\n          duration: this.duration,\n          timing: this.timing\n        })\n        .queue(callback => {\n          callback();\n          done && done();\n        }),\n\n      animit(this._mask)\n        .wait(this.delay)\n        .queue({\n          display: 'block'\n        })\n        .queue({\n          opacity: '1'\n        }, {\n          duration: this.duration,\n          timing: 'linear',\n        })\n    );\n  }\n\n  /**\n   * @param {Function} done\n   */\n  close(done) {\n\n    animit.runAll(\n      animit(this._side)\n        .wait(this.delay)\n        .queue({\n          transform: 'translate3d(0px, 0px, 0px)'\n        }, {\n          duration: this.duration,\n          timing: this.timing\n        })\n        .queue(callback => {\n          done && done();\n          callback();\n        }),\n\n      animit(this._mask)\n        .wait(this.delay)\n        .queue({\n          opacity: '0'\n        }, {\n          duration: this.duration,\n          timing: 'linear',\n        })\n        .queue({\n          display: 'none'\n        })\n    );\n  }\n}\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport animit from '../../ons/animit';\nimport SplitterAnimator from './animator.js';\n\nexport default class PushSplitterAnimator extends SplitterAnimator {\n\n  _getSlidingElements() {\n    const slidingElements = [this._side, this._content];\n    if (this._oppositeSide && this._oppositeSide.mode === 'split') {\n      slidingElements.push(this._oppositeSide);\n    }\n\n    return slidingElements;\n  }\n\n  translate(distance) {\n    if (!this._slidingElements) {\n      this._slidingElements = this._getSlidingElements();\n    }\n\n    this._mask.style.display = 'block'; // Avoid content clicks\n\n    animit(this._slidingElements)\n      .queue({\n        transform: `translate3d(${this.minus + distance}px, 0px, 0px)`\n      })\n      .play();\n  }\n\n  /**\n   * @param {Function} done\n   */\n  open(done) {\n    const max = this._side.offsetWidth;\n    this._slidingElements = this._getSlidingElements();\n\n    animit.runAll(\n      animit(this._slidingElements)\n        .wait(this.delay)\n        .queue({\n          transform: `translate3d(${this.minus + max}px, 0px, 0px)`\n        }, {\n          duration: this.duration,\n          timing: this.timing\n        })\n        .queue(callback => {\n          this._slidingElements = null;\n          callback();\n          done && done();\n        }),\n\n      animit(this._mask)\n        .wait(this.delay)\n        .queue({\n          display: 'block'\n        })\n    );\n  }\n\n  /**\n   * @param {Function} done\n   */\n  close(done) {\n    this._slidingElements = this._getSlidingElements();\n\n    animit.runAll(\n      animit(this._slidingElements)\n        .wait(this.delay)\n        .queue({\n          transform: 'translate3d(0px, 0px, 0px)'\n        }, {\n          duration: this.duration,\n          timing: this.timing\n        })\n        .queue(callback => {\n          this._slidingElements = null;\n          super.clearTransition();\n          done && done();\n          callback();\n        }),\n\n      animit(this._mask)\n        .wait(this.delay)\n        .queue({\n          display: 'none'\n        })\n    );\n  }\n}\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport contentReady from '../../ons/content-ready';\nimport animit from '../../ons/animit';\nimport SplitterAnimator from './animator.js';\n\nexport default class RevealSplitterAnimator extends SplitterAnimator {\n\n  _getSlidingElements() {\n    const slidingElements = [this._content, this._mask];\n    if (this._oppositeSide && this._oppositeSide.mode === 'split') {\n      slidingElements.push(this._oppositeSide);\n    }\n\n    return slidingElements;\n  }\n\n  activate(sideElement) {\n    super.activate(sideElement);\n    this.maxWidth = this._getMaxWidth();\n    if (sideElement.mode === 'collapse') {\n      this._setStyles(sideElement);\n    }\n  }\n\n  deactivate() {\n    this._side && this._unsetStyles(this._side);\n    super.deactivate();\n  }\n\n  _setStyles(sideElement) {\n    sideElement.style.left = sideElement.side === 'right' ? 'auto' : 0;\n    sideElement.style.right = sideElement.side === 'right'  ? 0 : 'auto';\n    sideElement.style.zIndex = 0;\n    sideElement.style.backgroundColor = 'black';\n    sideElement.style.transform = this._generateBehindPageStyle(0).container.transform;\n    sideElement.style.display = 'none';\n\n    const splitter = sideElement.parentElement;\n    contentReady(splitter, () => {\n      if (splitter.content) {\n        splitter.content.style.boxShadow = '0 0 12px 0 rgba(0, 0, 0, 0.2)';\n      }\n    });\n  }\n\n  _unsetStyles(sideElement) {\n    sideElement.style.left = sideElement.style.right = sideElement.style.zIndex = sideElement.style.backgroundColor = sideElement.style.display = '';\n    if (sideElement._content) {\n      sideElement._content.style.opacity = '';\n    }\n\n    // Check if the other side needs the common styles\n    if (!this._oppositeSide || this._oppositeSide.mode === 'split') {\n      if (sideElement.parentElement.content) {\n        sideElement.parentElement.content.style.boxShadow = '';\n      }\n    }\n  }\n\n  _generateBehindPageStyle(distance) {\n    const max = this.maxWidth;\n\n    let behindDistance = (distance - max) / max * 10;\n    behindDistance = isNaN(behindDistance) ? 0 : Math.max(Math.min(behindDistance, 0), -10);\n\n    const behindTransform = `translate3d(${(this.minus ? -1 : 1) * behindDistance}%, 0, 0)`;\n    const opacity = 1 + behindDistance / 100;\n\n    return {\n      content: {\n        opacity\n      },\n      container: {\n        transform: behindTransform\n      }\n    };\n  }\n\n  translate(distance) {\n    this._side.style.display = '';\n    this._side.style.zIndex = 1;\n    this.maxWidth = this.maxWidth || this._getMaxWidth();\n    const menuStyle = this._generateBehindPageStyle(Math.min(distance, this.maxWidth));\n\n    if (!this._slidingElements) {\n      this._slidingElements = this._getSlidingElements();\n    }\n\n    this._mask.style.display = 'block'; // Avoid content clicks\n\n    animit.runAll(\n      animit(this._slidingElements)\n        .queue({\n          transform: `translate3d(${this.minus + distance}px, 0px, 0px)`\n        }),\n      animit(this._side._content)\n        .queue(menuStyle.content),\n      animit(this._side)\n        .queue(menuStyle.container)\n    );\n  }\n\n  /**\n   * @param {Function} done\n   */\n  open(done) {\n    this._side.style.display = '';\n    this._side.style.zIndex = 1;\n    this.maxWidth = this.maxWidth || this._getMaxWidth();\n    const menuStyle = this._generateBehindPageStyle(this.maxWidth);\n    this._slidingElements = this._getSlidingElements();\n\n    setTimeout(() => { // Fix: Time to update previous translate3d after changing style.display\n      animit.runAll(\n        animit(this._slidingElements)\n          .wait(this.delay)\n          .queue({\n            transform: `translate3d(${this.minus + this.maxWidth}px, 0px, 0px)`\n          }, {\n            duration: this.duration,\n            timing: this.timing\n          }),\n\n        animit(this._mask)\n          .wait(this.delay)\n          .queue({\n            display: 'block'\n          }),\n\n        animit(this._side._content)\n          .wait(this.delay)\n          .queue(menuStyle.content, {\n            duration: this.duration,\n            timing: this.timing\n          }),\n\n        animit(this._side)\n          .wait(this.delay)\n          .queue(menuStyle.container, {\n            duration: this.duration,\n            timing: this.timing\n          })\n          .queue(callback => {\n            this._slidingElements = null;\n            callback();\n            done && done();\n          }),\n      );\n    }, 0);\n  }\n\n  /**\n   * @param {Function} done\n   */\n  close(done) {\n    const menuStyle = this._generateBehindPageStyle(0);\n    this._slidingElements = this._getSlidingElements();\n\n    animit.runAll(\n      animit(this._slidingElements)\n        .wait(this.delay)\n        .queue({\n          transform: 'translate3d(0px, 0px, 0px)'\n        }, {\n          duration: this.duration,\n          timing: this.timing\n        }),\n\n      animit(this._mask)\n        .wait(this.delay)\n        .queue({\n          display: 'none'\n        }),\n\n      animit(this._side._content)\n        .wait(this.delay)\n        .queue(menuStyle.content, {\n          duration: this.duration,\n          timing: this.timing\n        }),\n\n      animit(this._side)\n        .wait(this.delay)\n        .queue(menuStyle.container, {\n          duration: this.duration,\n          timing: this.timing\n        })\n        .queue(callback => {\n          this._slidingElements = null;\n          this._side.style.zIndex = 0;\n          this._side.style.display = 'none';\n          this._side._content.style.opacity = '';\n          done && done();\n          callback();\n        }),\n    );\n  }\n\n  _getMaxWidth() {\n    return this._side.offsetWidth;\n  }\n}\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../../ons/util';\nimport ModifierUtil from '../../ons/internal/modifier-util';\nimport AnimatorFactory from '../../ons/internal/animator-factory';\nimport OverlaySplitterAnimator from './overlay-animator';\nimport PushSplitterAnimator from './push-animator';\nimport RevealSplitterAnimator from './reveal-animator';\nimport BaseElement from '../base/base-element';\nimport deviceBackButtonDispatcher from '../../ons/device-back-button-dispatcher';\nimport contentReady from '../../ons/content-ready';\n\nconst _animatorDict = {\n  default: OverlaySplitterAnimator,\n  overlay: OverlaySplitterAnimator,\n  push: PushSplitterAnimator,\n  reveal: RevealSplitterAnimator\n};\n\n/**\n * @element ons-splitter\n * @category menu\n * @description\n *  [en]\n *    A component that enables responsive layout by implementing both a two-column layout and a sliding menu layout.\n *\n *    It can be configured to automatically expand into a column layout on large screens and collapse the menu on smaller screens. When the menu is collapsed the user can open it by swiping.\n *  [/en]\n *  [ja][/ja]\n * @codepen rOQOML\n * @tutorial vanilla/Reference/splitter\n * @guide multiple-page-navigation\n *  [en]Managing multiple pages.[/en]\n *  [ja]Managing multiple pages[/ja]\n * @seealso ons-splitter-content\n *  [en]The `<ons-splitter-content>` component contains the main content of the page.[/en]\n *  [ja]ons-splitter-content[/ja]\n * @seealso ons-splitter-side\n *  [en]The `<ons-splitter-side>` component contains the menu.[/en]\n *  [ja]ons-splitter-side[/ja]\n * @example\n * <ons-splitter id=\"splitter\">\n *   <ons-splitter-content>\n *     ...\n *   </ons-splitter-content>\n *\n *   <ons-splitter-side side=\"left\" width=\"80%\" collapse swipeable>\n *     ...\n *   </ons-splitter-side>\n * </ons-splitter>\n *\n * <script>\n *   var splitter = document.getElementById('splitter');\n *   splitter.left.open();\n * </script>\n */\nexport default class SplitterElement extends BaseElement {\n\n  _getSide(side) {\n    const element = util.findChild(this, e => {\n      return util.match(e, 'ons-splitter-side') && e.getAttribute('side') === side;\n    });\n    return element;\n  }\n\n  /**\n   * @property left\n   * @readonly\n   * @type {HTMLElement}\n   * @description\n   *   [en]Left `<ons-splitter-side>` element.[/en]\n   *   [ja][/ja]\n   */\n  get left() {\n    return this._getSide('left');\n  }\n  /**\n   * @property right\n   * @readonly\n   * @type {HTMLElement}\n   * @description\n   *   [en]Right `<ons-splitter-side>` element.[/en]\n   *   [ja][/ja]\n   */\n  get right() {\n    return this._getSide('right');\n  }\n\n  /**\n   * @property side\n   * @readonly\n   * @type {HTMLElement}\n   * @description\n   *   [en]First `<ons-splitter-side>` element regardless the actual side.[/en]\n   *   [ja][/ja]\n   */\n  get side() {\n    return util.findChild(this, 'ons-splitter-side');\n  }\n\n  get _sides() {\n    return [this.left, this.right].filter(e => e);\n  }\n  /**\n   * @property content\n   * @readonly\n   * @type {HTMLElement}\n   * @description\n   *   [en]The `<ons-splitter-content>` element.[/en]\n   *   [ja][/ja]\n   */\n  get content() {\n    return util.findChild(this, 'ons-splitter-content');\n  }\n\n  get topPage() {\n    return this.content._content;\n  }\n\n  get mask() {\n    return util.findChild(this, 'ons-splitter-mask');\n  }\n\n  /**\n   * @property onDeviceBackButton\n   * @type {Object}\n   * @description\n   *   [en]Back-button handler.[/en]\n   *   [ja][/ja]\n   */\n  get onDeviceBackButton() {\n    return this._backButtonHandler;\n  }\n\n  set onDeviceBackButton(callback) {\n    if (this._backButtonHandler) {\n      this._backButtonHandler.destroy();\n    }\n\n    this._backButtonHandler = deviceBackButtonDispatcher.createHandler(this, callback);\n  }\n\n  _onDeviceBackButton(event) {\n    this._sides.some(s => s.isOpen ? s.close() : false) || event.callParentHandler();\n  }\n\n  _onModeChange(e) {\n    if (e.target.parentNode) {\n      contentReady(this, () => {\n        this._layout();\n      });\n    }\n  }\n\n  _layout() {\n    this._sides.forEach(side => {\n      if (this.content) {\n        this.content.style[side.side] = side.mode === 'split' ? side._width : 0;\n      }\n    });\n  }\n\n  constructor() {\n    super();\n\n    this._boundOnModeChange = this._onModeChange.bind(this);\n\n    contentReady(this, () => {\n      this._compile();\n      this._layout();\n    });\n  }\n\n  _compile() {\n    if (!this.mask) {\n      this.appendChild(document.createElement('ons-splitter-mask'));\n    }\n  }\n\n  connectedCallback() {\n    this.onDeviceBackButton = this._onDeviceBackButton.bind(this);\n    this.addEventListener('modechange', this._boundOnModeChange, false);\n  }\n\n  disconnectedCallback() {\n    this._backButtonHandler.destroy();\n    this._backButtonHandler = null;\n    this.removeEventListener('modechange', this._boundOnModeChange, false);\n  }\n\n  attributeChangedCallback(name, last, current) {}\n\n  _show() {\n    util.propagateAction(this, '_show');\n  }\n\n  _hide() {\n    util.propagateAction(this, '_hide');\n  }\n\n  _destroy() {\n    util.propagateAction(this, '_destroy');\n    this.remove();\n  }\n\n  static registerAnimator(name, Animator) {\n    if (!(Animator instanceof SplitterAnimator)) {\n      throw new Error('Animator parameter must be an instance of SplitterAnimator.');\n    }\n    _animatorDict[name] = Animator;\n  }\n\n  static get SplitterAnimator() {\n    return SplitterAnimator;\n  }\n\n  static get animators() {\n    return _animatorDict;\n  }\n}\n\ncustomElements.define('ons-splitter', SplitterElement);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../ons/util';\nimport AnimatorFactory from '../ons/internal/animator-factory';\nimport orientation from '../ons/orientation';\nimport internal from '../ons/internal';\nimport ModifierUtil from '../ons/internal/modifier-util';\nimport BaseElement from './base/base-element';\nimport SplitterAnimator from './ons-splitter/animator';\nimport GestureDetector from '../ons/gesture-detector';\nimport DoorLock from '../ons/doorlock';\nimport contentReady from '../ons/content-ready';\nimport { PageLoader, defaultPageLoader} from '../ons/page-loader';\nimport SplitterElement from './ons-splitter';\n\nconst SPLIT_MODE = 'split';\nconst COLLAPSE_MODE = 'collapse';\nconst CLOSED_STATE = 'closed';\nconst OPEN_STATE = 'open';\nconst CHANGING_STATE = 'changing';\n\nconst WATCHED_ATTRIBUTES = ['animation', 'width', 'side', 'collapse', 'swipeable', 'swipe-target-width', 'animation-options', 'open-threshold'];\n\n\nconst rewritables = {\n  /**\n   * @param {Element} splitterSideElement\n   * @param {Function} callback\n   */\n  ready(splitterSideElement, callback) {\n    setImmediate(callback);\n  }\n};\n\nclass CollapseDetection {\n  constructor(element, target) {\n    this._element = element;\n    this._boundOnChange = this._onChange.bind(this);\n    target && this.changeTarget(target);\n  }\n\n  changeTarget(target) {\n    this.disable();\n    this._target = target;\n    if (target) {\n      this._orientation = ['portrait', 'landscape'].indexOf(target) !== -1;\n      this.activate();\n    }\n  }\n\n  _match(value) {\n    if (this._orientation) {\n      return this._target === (value.isPortrait ? 'portrait' : 'landscape');\n    }\n    return value.matches;\n  }\n\n  _onChange(value) {\n    this._element._updateMode(this._match(value) ? COLLAPSE_MODE : SPLIT_MODE);\n  }\n\n  activate() {\n    if (this._orientation) {\n      orientation.on('change', this._boundOnChange);\n      this._onChange({isPortrait: orientation.isPortrait()});\n    } else {\n      this._queryResult = window.matchMedia(this._target);\n      this._queryResult.addListener(this._boundOnChange);\n      this._onChange(this._queryResult);\n    }\n  }\n\n  disable() {\n    if (this._orientation) {\n      orientation.off('change', this._boundOnChange);\n    } else if (this._queryResult) {\n      this._queryResult.removeListener(this._boundOnChange);\n      this._queryResult = null;\n    }\n  }\n}\n\nconst widthToPx = (width, parent) => {\n  const [value, px] = [parseInt(width, 10), /px/.test(width)];\n  return px ? value : Math.round(parent.offsetWidth * value / 100);\n};\n\nclass CollapseMode {\n  get _animator() {\n    return this._element._animator;\n  }\n\n  constructor(element) {\n    this._active = false;\n    this._state = CLOSED_STATE;\n    this._element = element;\n    this._lock = new DoorLock();\n  }\n\n  isOpen() {\n    return this._active && this._state !== CLOSED_STATE;\n  }\n\n  handleGesture(e) {\n    if (!e.gesture || !this._active || this._lock.isLocked() || this._isOpenOtherSideMenu()) {\n      return;\n    }\n    if (e.type === 'dragstart') {\n      this._onDragStart(e);\n    } else if (!this._ignoreDrag) {\n      e.type === 'dragend' ? this._onDragEnd(e) : this._onDrag(e);\n    }\n  }\n\n  _canConsumeGesture(gesture) {\n    const isOpen = this.isOpen();\n    const validDrag = d => this._element._side === 'left'\n      ? ((d === 'left' && isOpen) || (d === 'right' && !isOpen))\n      : ((d === 'left' && !isOpen) || (d === 'right' && isOpen));\n\n    const distance = this._element._side === 'left' ? gesture.center.clientX : window.innerWidth - gesture.center.clientX;\n    const area = this._element._swipeTargetWidth;\n\n    return validDrag(gesture.direction) && !(area && distance > area && !isOpen);\n  }\n\n  _onDragStart(event) {\n    this._ignoreDrag = event.consumed || event.gesture && !this._canConsumeGesture(event.gesture)\n      || !(event.gesture.distance <= 15 || event.gesture.deltaTime <= 100);\n\n    if (!this._ignoreDrag) {\n      event.consume && event.consume();\n      event.consumed = true;\n\n      this._width = widthToPx(this._element._width, this._element.parentNode);\n      this._startDistance = this._distance = this.isOpen() ? this._width : 0;\n\n      util.preventScroll(this._element._gestureDetector);\n    }\n  }\n\n  _onDrag(event) {\n    event.stopPropagation();\n    event.gesture.preventDefault();\n\n    const delta = this._element._side === 'left' ? event.gesture.deltaX : -event.gesture.deltaX;\n    const distance = Math.max(0, Math.min(this._width, this._startDistance + delta));\n    if (distance !== this._distance) {\n      this._animator.translate(distance);\n      this._distance = distance;\n      this._state = CHANGING_STATE;\n    }\n  }\n\n  _onDragEnd(event) {\n    event.stopPropagation();\n\n    const {_distance: distance, _width: width, _element: el} = this;\n    const direction = event.gesture.interimDirection;\n    const shouldOpen = el._side !== direction && distance > width * el._threshold;\n    this.executeAction(shouldOpen ? 'open' : 'close');\n    this._ignoreDrag = true;\n  }\n\n  layout() {\n    if (this._active && this._state === OPEN_STATE) {\n      this._animator.open();\n    }\n  }\n\n  // enter collapse mode\n  enterMode() {\n    if (!this._active) {\n      this._active = true;\n      this._animator && this._animator.activate(this._element);\n      this.layout();\n    }\n  }\n\n  // exit collapse mode\n  exitMode() {\n    this._animator && this._animator.deactivate();\n    this._state = CLOSED_STATE;\n    this._active = false;\n  }\n\n  _isOpenOtherSideMenu() {\n    return util.arrayFrom(this._element.parentElement.children).some(e => {\n      return util.match(e, 'ons-splitter-side') && e !== this._element && e.isOpen;\n    });\n  }\n\n  /**\n   * @param {String} name - 'open' or 'close'\n   * @param {Object} [options]\n   * @param {Function} [options.callback]\n   * @param {Boolean} [options.withoutAnimation]\n   * @return {Promise} Resolves to the splitter side element or false if not in collapse mode\n   */\n  executeAction(name, options = {}) {\n    const FINAL_STATE = name === 'open' ? OPEN_STATE : CLOSED_STATE;\n\n    if (!this._active) {\n      return Promise.resolve(false);\n    }\n\n    if (this._state === FINAL_STATE) {\n      return Promise.resolve(this._element);\n    }\n    if (this._lock.isLocked()) {\n      return Promise.reject('Splitter side is locked.');\n    }\n    if (name === 'open' && this._isOpenOtherSideMenu()) {\n      return Promise.reject('Another menu is already open.');\n    }\n    if (this._element._emitEvent(`pre${name}`)) {\n      return Promise.reject(`Canceled in pre${name} event.`);\n    }\n\n    const callback = options.callback;\n    const unlock = this._lock.lock();\n    const done = () => {\n      this._state = FINAL_STATE;\n      this.layout();\n      unlock();\n      this._element._emitEvent(`post${name}`);\n      callback && callback();\n    };\n\n    if (options.withoutAnimation) {\n      done();\n      return Promise.resolve(this._element);\n    }\n    this._state = CHANGING_STATE;\n    return new Promise(resolve => {\n      this._animator[name](() => {\n        done();\n        resolve(this._element);\n      });\n    });\n  }\n}\n\n/**\n * @element ons-splitter-side\n * @category menu\n * @description\n *  [en]\n *    The `<ons-splitter-side>` element is used as a child element of `<ons-splitter>`.\n *\n *    It will be displayed on either the left or right side of the `<ons-splitter-content>` element.\n *\n *    It supports two modes: collapsed and split. When it's in collapsed mode it will be hidden from view and can be displayed when the user swipes the screen or taps a button. In split mode the element is always shown. It can be configured to automatically switch between the two modes depending on the screen size.\n *  [/en]\n *  [ja]ons-splitter-sideons-splitter[/ja]\n * @codepen rOQOML\n * @tutorial vanilla/Reference/splitter\n * @guide multiple-page-navigation\n *  [en]Managing multiple pages.[/en]\n *  [ja]Managing multiple pages[/ja]\n * @seealso ons-splitter\n *  [en]The `<ons-splitter>` is the parent component.[/en]\n *  [ja]ons-splitter[/ja]\n * @seealso ons-splitter-content\n *  [en]The `<ons-splitter-content>` component contains the main content of the page.[/en]\n *  [ja]ons-splitter-content[/ja]\n * @example\n * <ons-splitter>\n *   <ons-splitter-content>\n *     ...\n *   </ons-splitter-content>\n *\n *   <ons-splitter-side side=\"left\" width=\"80%\" collapse>\n *     ...\n *   </ons-splitter-side>\n * </ons-splitter>\n */\nexport default class SplitterSideElement extends BaseElement {\n\n  /**\n   * @event modechange\n   * @description\n   *   [en]Fired just after the component's mode changes.[/en]\n   *   [ja][/ja]\n   * @param {Object} event\n   *   [en]Event object.[/en]\n   *   [ja][/ja]\n   * @param {Object} event.side\n   *   [en]Component object.[/en]\n   *   [ja][/ja]\n   * @param {String} event.mode\n   *   [en]Returns the current mode. Can be either `\"collapse\"` or `\"split\"`.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @event preopen\n   * @description\n   *   [en]Fired just before the sliding menu is opened.[/en]\n   *   [ja][/ja]\n   * @param {Object} event\n   *   [en]Event object.[/en]\n   *   [ja][/ja]\n   * @param {Function} event.cancel\n   *   [en]Call to cancel opening sliding menu.[/en]\n   *   [ja][/ja]\n   * @param {Object} event.side\n   *   [en]Component object.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @event postopen\n   * @description\n   *   [en]Fired just after the sliding menu is opened.[/en]\n   *   [ja][/ja]\n   * @param {Object} event\n   *   [en]Event object.[/en]\n   *   [ja][/ja]\n   * @param {Object} event.side\n   *   [en]Component object.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @event preclose\n   * @description\n   *   [en]Fired just before the sliding menu is closed.[/en]\n   *   [ja][/ja]\n   * @param {Object} event\n   *   [en]Event object.[/en]\n   *   [ja][/ja]\n   * @param {Object} event.side\n   *   [en]Component object.[/en]\n   *   [ja][/ja]\n   * @param {Function} event.cancel\n   *   [en]Call to cancel opening sliding-menu.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @event postclose\n   * @description\n   *   [en]Fired just after the sliding menu is closed.[/en]\n   *   [ja][/ja]\n   * @param {Object} event\n   *   [en]Event object.[/en]\n   *   [ja][/ja]\n   * @param {Object} event.side\n   *   [en]Component object.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @attribute animation\n   * @type {String}\n   * @default  default\n   * @description\n   *  [en]Specify the animation. Use one of `overlay`, `push`, `reveal` or  `default`.[/en]\n   *  [ja]\"overlay\", \"push\", \"reveal\", \"default\"[/ja]\n   */\n\n  /**\n   * @attribute animation-options\n   * @type {Expression}\n   * @description\n   *  [en]Specify the animation's duration, timing and delay with an object literal. E.g. `{duration: 0.2, delay: 1, timing: 'ease-in'}`.[/en]\n   *  [ja]duration, timing, delaye.g. {duration: 0.2, delay: 1, timing: 'ease-in'}[/ja]\n   */\n\n  /**\n   * @attribute open-threshold\n   * @type {Number}\n   * @default  0.3\n   * @description\n   *  [en]Specify how much the menu needs to be swiped before opening. A value between `0` and `1`.[/en]\n   *  [ja]010.3[/ja]\n   */\n\n  /**\n   * @attribute collapse\n   * @type {String}\n   * @description\n   *   [en]\n   *     Specify the collapse behavior. Valid values are `\"portrait\"`, `\"landscape\"` or a media query.\n   *     The strings `\"portrait\"` and `\"landscape\"` means the view will collapse when device is in landscape or portrait orientation.\n   *     If the value is a media query, the view will collapse when the media query resolves to `true`.\n   *     If the value is not defined, the view always be in `\"collapse\"` mode.\n   *   [/en]\n   *   [ja]\n   *     portrait, landscapewidth #px\n   *     portraitlandscape\n   *     \n   *     collapse\n   *   [/ja]\n   */\n\n  /**\n   * @attribute swipe-target-width\n   * @type {String}\n   * @description\n   *   [en]The width of swipeable area calculated from the edge (in pixels). Use this to enable swipe only when the finger touch on the screen edge.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @attribute width\n   * @type {String}\n   * @description\n   *   [en]Can be specified in either pixels or as a percentage, e.g. `90%` or `200px`.[/en]\n   *   [ja]px%eg. 90%, 200px[/ja]\n   */\n\n  /**\n   * @attribute side\n   * @type {String}\n   * @default left\n   * @description\n   *   [en]Specify which side of the screen the `<ons-splitter-side>` element is located. Possible values are `\"left\"` and `\"right\"`.[/en]\n   *   [ja]\"left\"\"right\"[/ja]\n   */\n\n  /**\n   * @attribute mode\n   * @type {String}\n   * @description\n   *   [en]Current mode. Possible values are `\"collapse\"` or `\"split\"`. This attribute is read only.[/en]\n   *   [ja]\"collapse\"\"split\"[/ja]\n   */\n\n  /**\n   * @attribute page\n   * @initonly\n   * @type {String}\n   * @description\n   *   [en]The URL of the menu page.[/en]\n   *   [ja]ons-splitter-sideURL[/ja]\n   */\n\n  /**\n   * @attribute swipeable\n   * @type {Boolean}\n   * @description\n   *   [en]Whether to enable swipe interaction on collapse mode.[/en]\n   *   [ja]collapse[/ja]\n   */\n\n  constructor() {\n    super();\n\n    this._page = null;\n    this._pageLoader = defaultPageLoader;\n    this._collapseMode = new CollapseMode(this);\n    this._collapseDetection = new CollapseDetection(this);\n\n    this._animatorFactory = new AnimatorFactory({\n      animators: SplitterElement.animators,\n      baseClass: SplitterAnimator,\n      baseClassName: 'SplitterAnimator',\n      defaultAnimation: this.getAttribute('animation')\n    });\n    this._boundHandleGesture = (e) => this._collapseMode.handleGesture(e);\n    this._watchedAttributes = WATCHED_ATTRIBUTES;\n    contentReady(this, () => {\n      rewritables.ready(this, () => {\n        const page = this._getPageTarget();\n\n        if (page) {\n          this.load(page);\n        }\n      });\n    });\n  }\n\n  connectedCallback() {\n    if (!util.match(this.parentNode, 'ons-splitter')) {\n      throw new Error('Parent must be an ons-splitter element.');\n    }\n\n    this._gestureDetector = new GestureDetector(this.parentElement, {dragMinDistance: 1});\n\n    contentReady(this, () => {\n      this._watchedAttributes.forEach(e => this._update(e));\n    });\n\n    if (!this.hasAttribute('side')) {\n      this.setAttribute('side', 'left');\n    }\n  }\n\n  _getPageTarget() {\n    return this._page || this.getAttribute('page');\n  }\n\n  get side() {\n    return this.getAttribute('side') === 'right' ? 'right' : 'left';\n  }\n\n  disconnectedCallback() {\n    this._collapseDetection.disable();\n    this._gestureDetector.dispose();\n    this._gestureDetector = null;\n  }\n\n  static get observedAttributes() {\n    return WATCHED_ATTRIBUTES;\n  }\n\n  attributeChangedCallback(name, last, current) {\n    this.parentNode && this._update(name, current);\n  }\n\n  _update(name, value) {\n    name = '_update' + name.split('-').map(e => e[0].toUpperCase() + e.slice(1)).join('');\n    return this[name](value);\n  }\n\n  _emitEvent(name) {\n    if (name.slice(0, 3) !== 'pre') {\n      return util.triggerElementEvent(this, name, {side: this});\n    }\n    let isCanceled = false;\n\n    util.triggerElementEvent(this, name, {\n      side: this,\n      cancel: () => isCanceled = true\n    });\n\n    return isCanceled;\n  }\n\n  _updateCollapse(value = this.getAttribute('collapse')) {\n    if (value === null || value === 'split') {\n      this._collapseDetection.disable();\n      return this._updateMode(SPLIT_MODE);\n    }\n    if (value === '' || value === 'collapse') {\n      this._collapseDetection.disable();\n      return this._updateMode(COLLAPSE_MODE);\n    }\n\n    this._collapseDetection.changeTarget(value);\n  }\n\n  // readonly attribute for the users\n  _updateMode(mode) {\n    if (mode !== this._mode) {\n      this._mode = mode;\n      this._collapseMode[mode === COLLAPSE_MODE ? 'enterMode' : 'exitMode']();\n      this.setAttribute('mode', mode);\n\n      util.triggerElementEvent(this, 'modechange', {side: this, mode: mode});\n    }\n  }\n\n  _updateOpenThreshold(threshold = this.getAttribute('open-threshold')) {\n    this._threshold = Math.max(0, Math.min(1, parseFloat(threshold) || 0.3));\n  }\n\n  _updateSwipeable(swipeable = this.getAttribute('swipeable')) {\n    const action = swipeable === null ? 'off' : 'on';\n\n    if (this._gestureDetector) {\n      this._gestureDetector[action]('drag dragstart dragend', this._boundHandleGesture);\n    }\n  }\n\n  _updateSwipeTargetWidth(value = this.getAttribute('swipe-target-width')) {\n    this._swipeTargetWidth = Math.max(0, parseInt(value) || 0);\n  }\n\n  _updateWidth() {\n    this.style.width = this._width;\n  }\n\n  get _width() {\n    const width = this.getAttribute('width');\n    return /^\\d+(px|%)$/.test(width) ? width : '80%';\n  }\n\n  set _width(value) {\n    this.setAttribute('width', value);\n  }\n\n  _updateSide(side = this.getAttribute('side')) {\n    this._side = side === 'right' ? side : 'left';\n  }\n\n  _updateAnimation(animation = this.getAttribute('animation')) {\n    this._animator && this._animator.deactivate();\n    this._animator = this._animatorFactory.newAnimator({animation});\n    this._animator.activate(this);\n  }\n\n  _updateAnimationOptions(value = this.getAttribute('animation-options')) {\n    this._animator.updateOptions(AnimatorFactory.parseAnimationOptionsString(value));\n  }\n\n  /**\n   * @property page\n   * @type {*}\n   * @description\n   *   [en]Page location to load in the splitter side.[/en]\n   *   [ja][/ja]\n   */\n  get page() {\n    return this._page;\n  }\n\n  /**\n   * @param {*} page\n   */\n  set page(page) {\n    this._page = page;\n  }\n\n  get _content() {\n    return this.children[0];\n  }\n\n  /**\n   * @property pageLoader\n   * @description\n   *   [en][/en]\n   *   [ja][/ja]\n   */\n  get pageLoader() {\n    return this._pageLoader;\n  }\n\n  set pageLoader(loader) {\n    if (!(loader instanceof PageLoader)) {\n      throw Error('First parameter must be an instance of PageLoader.');\n    }\n    this._pageLoader = loader;\n  }\n\n  /**\n   * @property mode\n   * @readonly\n   * @type {String}\n   * @description\n   *   [en]Current mode. Possible values are \"split\", \"collapse\", \"closed\", \"open\" or \"changing\".[/en]\n   *   [ja][/ja]\n   */\n  get mode() {\n    return this._mode;\n  }\n\n  /**\n   * @property isOpen\n   * @type {Boolean}\n   * @readonly\n   * @description\n   *   [en]This value is `true` when the menu is open..[/en]\n   *   [ja][/ja]\n   */\n  get isOpen() {\n    return this._collapseMode.isOpen();\n  }\n\n  /**\n   * @method open\n   * @signature open([options])\n   * @param {Object} [options]\n   *   [en]Parameter object.[/en]\n   *   [ja][/ja]\n   * @param {Function} [options.callback]\n   *   [en]This function will be called after the menu has been opened.[/en]\n   *   [ja][/ja]\n   * @description\n   *   [en]Open menu in collapse mode.[/en]\n   *   [ja]collapseons-splitter-side[/ja]\n   * @return {Promise}\n   *   [en]Resolves to the splitter side element or false if not in collapse mode[/en]\n   *   [ja][/ja]\n   */\n  open(options = {}) {\n    return this._collapseMode.executeAction('open', options);\n  }\n\n  /**\n   * @method close\n   * @signature close([options])\n   * @param {Object} [options]\n   *   [en]Parameter object.[/en]\n   *   [ja][/ja]\n   * @param {Function} [options.callback]\n   *   [en]This function will be called after the menu has been closed.[/en]\n   *   [ja][/ja]\n   * @description\n   *   [en]Close menu in collapse mode.[/en]\n   *   [ja]collapseons-splitter-side[/ja]\n   * @return {Promise}\n   *   [en]Resolves to the splitter side element or false if not in collapse mode[/en]\n   *   [ja][/ja]\n   */\n  close(options = {}) {\n    return this._collapseMode.executeAction('close', options);\n  }\n\n  /**\n   * @method toggle\n   * @signature toggle([options])\n   * @param {Object} [options]\n   * @description\n   *   [en]Opens if it's closed. Closes if it's open.[/en]\n   *   [ja][/ja]\n   * @return {Promise}\n   *   [en]Resolves to the splitter side element or false if not in collapse mode[/en]\n   *   [ja][/ja]\n   */\n  toggle(options = {}) {\n    return this.isOpen ? this.close(options) : this.open(options);\n  }\n\n  /**\n   * @method load\n   * @signature load(page, [options])\n   * @param {String} page\n   *   [en]Page URL. Can be either an HTML document or an <ons-template>.[/en]\n   *   [ja]pageURLons-templateid[/ja]\n   * @param {Object} [options]\n   * @param {Function} [options.callback]\n   * @description\n   *   [en]Show the page specified in pageUrl in the right section[/en]\n   *   [ja]URL[/ja]\n   * @return {Promise}\n   *   [en]Resolves to the new page element[/en]\n   *   [ja][/ja]\n   */\n  load(page, options = {}) {\n    this._page = page;\n    const callback = options.callback || (() => {});\n\n    return new Promise(resolve => {\n      let oldContent = this._content || null;\n\n      this._pageLoader.load({page, parent: this}, pageElement => {\n        if (oldContent) {\n          this._pageLoader.unload(oldContent);\n          oldContent = null;\n        }\n\n        setImmediate(() => this._show());\n\n        callback(pageElement);\n        resolve(pageElement);\n      });\n    });\n  }\n\n  _show() {\n    if (this._content) {\n      this._content._show();\n    }\n  }\n\n  _hide() {\n    if (this._content) {\n      this._content._hide();\n    }\n  }\n\n  _destroy() {\n    if (this._content) {\n      this._pageLoader.unload(this._content);\n    }\n    this.remove();\n  }\n\n  static get events() {\n    return ['preopen', 'postopen', 'preclose', 'postclose', 'modechange'];\n  }\n\n  static get rewritables() {\n    return rewritables;\n  }\n}\n\ncustomElements.define('ons-splitter-side', SplitterSideElement);\n","/*\nCopyright 2013-2015 ASIAL CORPORATION\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n   http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n\n*/\n\nimport util from '../ons/util';\nimport autoStyle from '../ons/autostyle';\nimport ModifierUtil from '../ons/internal/modifier-util';\nimport BaseElement from './base/base-element';\n\nconst defaultClassName = 'toolbar-button';\n\nconst scheme = {'': 'toolbar-button--*'};\n\n/**\n * @element ons-toolbar-button\n * @category page\n * @modifier material\n *   [en]Material Design toolbar button.[/en]\n *   [ja][/ja]\n * @modifier outline\n *   [en]A button with an outline.[/en]\n *   [ja][/ja]\n * @description\n *   [en]Button component for ons-toolbar and ons-bottom-toolbar.[/en]\n *   [ja]ons-toolbarons-bottom-toolbar[/ja]\n * @codepen aHmGL\n * @tutorial vanilla/Reference/page\n * @guide adding-a-toolbar\n *   [en]Adding a toolbar[/en]\n *   [ja][/ja]\n * @seealso ons-toolbar\n *   [en]The `<ons-toolbar>` component displays a navigation bar at the top of a page.[/en]\n *   [ja]ons-toolbar[/ja]\n * @seealso ons-back-button\n *   [en]The `<ons-back-button>` displays a back button in the navigation bar.[/en]\n *   [ja]ons-back-button[/ja]\n * @example\n * <ons-toolbar>\n *   <div class=\"left\">\n *     <ons-toolbar-button>\n *       Button\n *     </ons-toolbar-button>\n *   </div>\n *   <div class=\"center\">\n *     Title\n *   </div>\n *   <div class=\"right\">\n *     <ons-toolbar-button>\n *       <ons-icon icon=\"ion-navicon\" size=\"28px\"></ons-icon>\n *     </ons-toolbar-button>\n *   </div>\n * </ons-toolbar>\n */\nexport default class ToolbarButtonElement extends BaseElement {\n\n  /**\n   * @attribute modifier\n   * @type {String}\n   * @description\n   *   [en]The appearance of the button.[/en]\n   *   [ja][/ja]\n   */\n\n  /**\n   * @attribute disabled\n   * @description\n   *   [en]Specify if button should be disabled.[/en]\n   *   [ja][/ja]\n   */\n\n  constructor() {\n    super();\n\n    this._compile();\n  }\n\n  /**\n   * @property disabled\n   * @type {Boolean}\n   * @description\n   *   [en]Whether the element is disabled or not.[/en]\n   *   [ja]`true`[/ja]\n   */\n  set disabled(value) {\n    return util.toggleAttribute(this, 'disabled', value);\n  }\n\n  get disabled() {\n    return this.hasAttribute('disabled');\n  }\n\n  _compile() {\n    autoStyle.prepare(this);\n\n    this.classList.add(defaultClassName);\n\n    util.updateRipple(this, undefined, {center: '', 'size': 'contain', 'background': 'transparent'});\n\n    ModifierUtil.initModifier(this, scheme);\n  }\n\n  static get observedAttributes() {\n    return ['modifier', 'class'];\n  }\n\n  attributeChangedCallback(name, last, current) {\n    switch (name) {\n      case 'class':\n        util.restoreClass(this, defaultClassName, scheme);\n        break;\n      case 'modifier':\n        ModifierUtil.onModifierChanged(last, current, this, scheme);\n        break;\n    }\n  }\n}\n\ncustomElements.define('ons-toolbar-button', ToolbarButtonElement);\n","import './polyfills';\nimport './vendor';\n\nimport ons from './ons/ons';\n\nimport ButtonElement from './elements/ons-button';\nimport ListItemElement from './elements/ons-list-item';\nimport ListElement from './elements/ons-list';\nimport PageElement from './elements/ons-page';\nimport ProgressBarElement from './elements/ons-progress-bar';\nimport SplitterContentElement from './elements/ons-splitter-content';\nimport SplitterMaskElement from './elements/ons-splitter-mask';\nimport SplitterSideElement from './elements/ons-splitter-side';\nimport SplitterElement from './elements/ons-splitter';\nimport ToolbarButtonElement from './elements/ons-toolbar-button';\n\nif (window.ons) {\n  ons._util.warn('Onsen UI is loaded more than once.');\n}\n\nons.ButtonElement = ButtonElement;\nons.ListItemElement = ListItemElement;\nons.ListElement = ListElement;\nons.PageElement = PageElement;\nons.ProgressBarElement = ProgressBarElement;\nons.SplitterContentElement = SplitterContentElement;\nons.SplitterMaskElement = SplitterMaskElement;\nons.SplitterSideElement = SplitterSideElement;\nons.SplitterElement = SplitterElement;\nons.ToolbarButtonElement = ToolbarButtonElement;\n\n// fastclick\nwindow.addEventListener('load', () => {\n    ons.fastClick = FastClick.attach(document.body);\n}, false);\n\nons.ready(function() {\n  // ons._defaultDeviceBackButtonHandler\n  ons._deviceBackButtonDispatcher.enable();\n  ons._defaultDeviceBackButtonHandler = ons._deviceBackButtonDispatcher.createHandler(window.document.body, () => {\n    if (Object.hasOwnProperty.call(navigator, 'app')) {\n      navigator.app.exitApp();\n    } else {\n      console.warn('Could not close the app. Is \\'cordova.js\\' included?\\nError: \\'window.navigator.app\\' is undefined.');\n    }\n  });\n  document.body._gestureDetector = new ons.GestureDetector(document.body);\n\n  // // Simulate Device Back Button on ESC press\n  // if (!ons.platform.isWebView()) {\n  //   document.body.addEventListener('keydown', function(event) {\n  //     if (event.keyCode === 27) {\n  //       ons._deviceBackButtonDispatcher.fireDeviceBackButtonEvent();\n  //     }\n  //   })\n  // }\n  //\n  // // setup loading placeholder\n  // ons._setupLoadingPlaceHolders();\n});\n\n// viewport.js\nnew Viewport().setup();\n\nexport default ons;\n"],"names":["window","customElements","forcePolyfill","Utilities.walkDeepDescendantElements","CEState","Utilities.isConnected","Utilities.isValidCustomElementName","AlreadyConstructedMarker","Utilities.setPropertyUnchecked","isConnected","global","undefined","setImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","document","addFromSetImmediateArguments","args","partiallyApplied","apply","handler","slice","call","arguments","Function","runIfPresent","handle","task","clearImmediate","installNextTickImplementation","canUsePostMessage","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","installPostMessageImplementation","messagePrefix","Math","random","onGlobalMessage","event","source","data","indexOf","length","addEventListener","attachEvent","installMessageChannelImplementation","channel","MessageChannel","port1","port2","installReadyStateChangeImplementation","html","documentElement","script","createElement","onreadystatechange","removeChild","appendChild","installSetTimeoutImplementation","attachTo","Object","getPrototypeOf","setTimeout","toString","process","self","FastClick","layer","options","oldOnClick","trackingClick","trackingClickStart","targetElement","touchStartX","touchStartY","lastTouchIdentifier","touchBoundary","tapDelay","tapTimeout","notNeeded","bind","method","context","methods","i","l","deviceIsAndroid","onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel","Event","prototype","stopImmediatePropagation","removeEventListener","type","callback","capture","rmv","Node","hijacked","adv","propagationStopped","onclick","deviceIsWindowsPhone","navigator","userAgent","deviceIsIOS","test","deviceIsIOS4","deviceIsIOSWithBadTarget","deviceIsBlackBerry10","needsClick","target","nodeName","toLowerCase","disabled","className","needsFocus","readOnly","sendClick","clickEvent","touch","activeElement","blur","changedTouches","createEvent","initMouseEvent","determineEventType","screenX","screenY","clientX","clientY","forwardedTouchEvent","dispatchEvent","tagName","focus","setSelectionRange","value","updateScrollParent","scrollParent","parentElement","fastClickScrollParent","contains","scrollHeight","offsetHeight","fastClickLastScrollTop","scrollTop","getTargetElementFromEventTarget","eventTarget","nodeType","TEXT_NODE","parentNode","selection","targetTouches","isContentEditable","getSelection","rangeCount","isCollapsed","identifier","preventDefault","timeStamp","pageX","pageY","lastClickTime","touchHasMoved","boundary","abs","findControl","labelElement","control","htmlFor","getElementById","querySelector","forElement","targetTagName","cancelNextClick","elementFromPoint","pageXOffset","pageYOffset","top","cancelable","stopPropagation","permitted","detail","destroy","metaViewport","chromeVersion","blackberryVersion","firefoxVersion","ontouchstart","exec","content","scrollWidth","outerWidth","match","style","msTouchAction","touchAction","attach","MicroEvent","fct","_events","push","wrapper","off","on","filter","_fct","Array","mixin","destObject","props","module","Viewport","PRE_IOS7_VIEWPORT","IOS7_VIEWPORT","DEFAULT_VIEWPORT","ensureViewportElement","platform","name","getPlatformName","version","getPlatformVersion","viewportElement","head","setup","getAttribute","isWebView","setAttribute","cordova","phonegap","PhoneGap","start","Number","substr","replace","Platform","_renderPlatform","trim","readyState","Error","device","opera","InstallTrigger","HTMLElement","p","safari","pushNotification","chrome","documentMode","parseInt","split","ver","isAndroid","isIOS","isWP","isIPhone","isIPad","isIPod","pageAttributeExpression","overwrite","_variables","hasOwnProperty","part","c","inInterpolation","currentIndex","tokens","charAt","token","substring","re","variable","getVariable","rv","map","_replaceToken","expression","_parsePart","_replaceTokens","join","_parseExpression","defineVariable","getMobileOS","getIOSDevice","TIMEOUT_RATIO","util","capitalize","str","toUpperCase","buildTransitionValue","params","property","duration","timing","prop","onceOnTransitionEnd","element","fn","removeListeners","_transitionEndEvents","forEach","eventName","vendorPrefix","_cssPropertyDict","styles","getComputedStyle","dict","a","charCodeAt","z","upper","s","key","hasCssProperty","pre","OLink","forceLayoutAtOnce","elements","batchImmediate","callbacks","concreateCallbacks","batchAnimationFrame","raf","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","transitionPropertyName","Animit","transitionQueue","lastStyleAttributeDict","done","startAnimation","transition","queue","css","Transition","build","seconds","index","transitionName","transitionValue","timeoutId","clearTransition","len","keys","reset","_dequeueTransition","shift","_currentTransition","called","runAll","play","createActualCssProps","timeout","result","prefixed","Utils","Detection","PointerEvent","GestureDetector","Instance","defaults","DOCUMENT","HAS_POINTEREVENTS","pointerEnabled","msPointerEnabled","HAS_TOUCHEVENTS","IS_MOBILE","NO_MOUSEEVENTS","CALCULATE_INTERVAL","EVENT_TYPES","DIRECTION_DOWN","DIRECTION_LEFT","DIRECTION_UP","DIRECTION_RIGHT","POINTER_MOUSE","POINTER_TOUCH","POINTER_PEN","EVENT_START","EVENT_MOVE","EVENT_END","EVENT_RELEASE","EVENT_TOUCH","READY","plugins","gestures","determineEventTypes","each","gesture","register","onTouch","detect","utils","extend","dest","src","merge","obj","iterator","inStr","find","inArray","deep","findIndex","item","every","toArray","hasParent","node","parent","getCenter","touches","min","max","getVelocity","deltaTime","deltaX","deltaY","getAngle","touch1","touch2","x","y","atan2","PI","getDirection","getDistance","sqrt","getScale","end","getRotation","isVertical","direction","setPrefixedCss","toggle","prefixes","toCamelCase","toggleBehavior","falseFn","userSelect","onselectstart","userDrag","ondragstart","hook","types","eventType","onTouchHandler","ev","srcType","isPointer","isMouse","triggerType","preventMouseEvents","button","shouldDetect","buttons","matchType","updatePointer","doDetect","touchList","getTouchList","touchListLength","triggerChange","trigger","changedLength","started","evData","collectEventData","identifiers","concat","pointerType","Date","now","srcEvent","preventManipulation","stopDetect","touchlist","pointers","pointer","pointerEvent","pointerId","pt","MSPOINTER_TYPE_MOUSE","MSPOINTER_TYPE_TOUCH","MSPOINTER_TYPE_PEN","resetList","detection","startDetect","inst","eventData","current","stopped","extendEventData","instOptions","triggerGesture","enabled","lastEvent","previous","getCalculatedData","center","cur","recalc","calcEv","lastCalcEvent","calcData","lastCalcData","futureCalcEvent","velocity","angle","velocityX","velocityY","interimAngle","interimDirection","startEv","startEvent","lastEv","sort","b","behavior","eventStartHandler","eventHandlers","onEvent","offEvent","splice","triggerEvent","initEvent","enable","state","dispose","eh","triggered","dragGesture","dragMaxTouches","distance","dragMinDistance","startCenter","dragDistanceCorrection","factor","dragLockToAxis","dragLockMinDistance","lastDirection","dragBlockVertical","dragBlockHorizontal","Drag","Gesture","releaseGesture","timer","holdGesture","holdTimeout","holdThreshold","Hold","Release","Infinity","Swipe","swipeGesture","swipeMinTouches","swipeMaxTouches","swipeVelocityX","swipeVelocityY","hasMoved","tapGesture","prev","sincePrev","didDoubleTap","tapMaxDistance","tapMaxTime","doubleTapInterval","doubleTapDistance","tapAlways","Tap","Touch","touchGesture","preventMouse","transformGesture","scaleThreshold","scale","rotationThreshold","rotation","transformMinScale","transformMinRotation","Transform","directionMap","Swiper","FALSE","getElement","scrollHook","itemSize","getAutoScrollRatio","ratio","onDragStart","onDrag","onDragEnd","onResize","swipeable","autoRefresh","initialized","children","blocker","classList","add","_gestureDetector","_mutationObserver","MutationObserver","refresh","updateSwipeable","updateAutoRefresh","resizeOn","_scroll","_offset","_lastActiveIndex","_updateLayout","_setupInitialIndex","resizeOff","targetSize","_reset","setActiveIndex","itemCount","itemNumSize","_itemNumSize","_calculateItemSize","maxScroll","ceil","matches","round","getInitialIndex","_scrollTo","scroll","_changeTo","count","size","shouldUpdate","action","shouldWatch","observe","childList","disconnect","newSize","block","pointerEvents","d","isFirst","isOverScrollable","isLast","_ignoreDrag","consumed","consume","_canConsumeGesture","startX","distFromEdge","getBubbleWidth","_started","toggleBlocker","preventScroll","_continued","_getDelta","throttle","normalizedScroll","_normalizeScroll","_startMomentumScroll","_killOverScroll","_getVelocity","matchesDirection","dM","dir","sign","nextScroll","_getAutoScroll","swipe","animationOptions","killOverScroll","overScrollHook","e","activeIndex","getActiveIndex","lastActiveIndex","change","canceled","preChangeHook","then","postChangeHook","reject","Promise","opt","animation","toFixed","resolve","animit","transform","_getTransform","offset","isAutoScrollable","arr","left","right","pos","lastScroll","scrollRatio","_targetSize","refreshHook","axis","t3d","nextElementSibling","isCentered","internal","config","nullElement","isEnabledAutoStatusBarFill","autoStatusBarFill","normalizePageHTML","waitDOMContentLoaded","wrappedCallback","onReady","shouldFillStatusBar","isIOS7above","body","templateStore","_storage","template","set","templateId","query","templates","querySelectorAll","textContent","getTemplateHTMLAsync","page","cache","get","DocumentFragment","local","xhr","XMLHttpRequest","open","onload","responseText","status","fragment","createFragment","onerror","send","getPageHTMLAsync","pages","evaluate","getPage","catch","error","AnimatorFactory","opts","_animators","animators","_baseClass","baseClass","_baseClassName","baseClassName","_animation","defaultAnimation","_animationOptions","defaultAnimationOptions","parseAnimationOptionsString","jsonString","animationOptionsParse","defaultAnimator","animator","Animator","animationOpts","animationsDisabled","delay","autoStyleEnabled","modifiersMap","platforms","android","elementName","hasModifier","oldModifier","newModifier","unshift","hasAttribute","removeAttribute","ios","removeModifier","addModifier","unlocked","getPlatform","force","mobileOS","onsPlatform","prepare","mapModifier","modifier","m","restoreModifier","ModifierUtil","diff","last","makeDict","removed","reduce","added","applyDiffToClassList","klass","k","remove","applyDiffToElement","scheme","selector","targetElements","onModifierChanged","initModifier","modifierToken","unwrap","string","isObjectString","startsWith","endsWith","isArrayString","isQuotedString","originalString","processToken","isNaN","parseObject","parseArray","nextToken","trimLeft","limit","nestedObject","isValidKey","object","readingKey","previousToken","array","parse","globals","prepareQuery","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","findChild","childNodes","ELEMENT_NODE","findParent","until","isAttached","hasAnyComponentAsParent","isPageControl","propagateAction","child","camelize","create","importNode","innerHTML","createDocumentFragment","firstChild","dst","j","arrayFrom","arrayLike","parseJSONObjectSafely","failSafe","JSON","findFromPath","path","el","getTopPage","container","topPage","findToolbarPage","_canAnimateToolbar","_contentElement","nextPage","triggerElementEvent","CustomEvent","modifierName","RegExp","autoStyle","forceAutoStyle","newModifiers","toggleModifier","restoreClass","defaultClass","updateParentPosition","_parentUpdated","getPropertyValue","position","toggleAttribute","bindListeners","listenerNames","boundName","f","updateRipple","hasRipple","attrs","rippleElement","insertBefore","isInteger","isFinite","floor","defer","deferred","promise","warn","warningsDisabled","gd","prevent","clean","checkOptions","compile","actionSheet","title","maskColor","id","class","resolver","buttonOptions","label","destructive","icon","hide","dialog","show","_isPortrait","isPortrait","_onDOMContentLoaded","_onOrientationChange","_onResize","innerHeight","innerWidth","_installIsPortraitImplementation","emit","orientation","nIter","interval","setInterval","w","h","_init","modifiers","softwareKeyboard","_visible","onShow","onHide","bindEvents","Keyboard","onshow","onhide","visible","isVisible","noPluginError","_domContentLoaded","_ready","HandlerRepository","dataset","deviceBackButtonHandlerId","_genId","_store","DeviceBackButtonDispatcher","_isEnabled","_boundCallback","_callback","addBackButtonListener","removeBackButtonListener","_dispatchDeviceBackButtonEvent","_element","tree","_captureTree","_findHandlerLeafElement","createTree","arrayOf","childElement","display","has","subTree","childNode","leftZ","zIndex","rightZ","generateId","DoorLock","_lockList","_waitList","_log","log","unlock","_unlock","_tryToFreeWaitList","isLocked","readyMap","WeakMap","queueMap","isContentReady","setContentReady","addCallback","consumeQueue","delete","contentReady","observer","changes","characterData","loadPage","pageElement","unloadPage","_destroy","PageLoader","loader","unloader","_loader","_unloader","internalLoader","Element","defaultPageLoader","BaseAnimator","properties","extendedAnimator","newAnimator","ons","_util","_deviceBackButtonDispatcher","deviceBackButtonDispatcher","_internal","PageAttributeExpression","_animationOptionsParser","animationOptionsParser","_autoStyle","_DoorLock","_contentReady","_BaseAnimator","_readyLock","select","location","search","waitDeviceReady","isReady","ready","waitUnlock","setDefaultDeviceBackButtonListener","listener","_defaultDeviceBackButtonHandler","setListener","disableDeviceBackButtonHandler","disable","enableDeviceBackButtonHandler","enableAutoStatusBarFill","disableAutoStatusBarFill","mockStatusBar","disableAnimations","enableAnimations","_disableWarnings","_enableWarnings","disableAutoStyling","enableAutoStyling","forcePlatformStyling","newPlatform","_platformUpdate","_updatePosition","preload","all","append","link","createPopover","createDialog","createAlertDialog","assign","openActionSheet","resolveLoadingPlaceholder","_resolveLoadingPlaceholder","_setupLoadingPlaceHolders","contentElement","unlockDeviceReady","lock","getCS","currentScript","scripts","getScriptPage","_superSecretOns","getElementClass","BaseElement","defaultClassName","ButtonElement","_compile","observedAttributes","_updateRipple","define","ListItemElement","_onDrag","_onTouch","_onRelease","_originalBackgroundColor","backgroundColor","tapped","_transition","_tappable","_tapBackgroundColor","_shouldLockOnDrag","webkitTransition","MozTransition","boxShadow","ListElement","ToolbarElement","_ensureToolbarItemElements","_ensureToolbarElement","nullToolbarElement","PageElement","_deriveHooks","_initialized","_isShown","_getContentElement","_backgroundElement","_getBackgroundElement","onInit","_show","_tryToFillStatusBar","attributeChangedCallback","backButton","filled","_hasAPageControlChild","onInfiniteScroll","_boundOnScroll","_onInfiniteScroll","_infiniteScrollLimit","_onScroll","overLimit","clientHeight","_loadingContent","onDeviceBackButton","_backButtonHandler","createHandler","newValue","toolbar","background","nextSibling","_elementShouldBeMoved","fixedElements","_hide","onDestroy","constructor","events","defineProperty","INDET","ProgressBarElement","_isCompiled","_template","cloneNode","_primary","_secondary","_updateDeterminate","_updateValue","barElement","width","secondaryValue","indeterminate","rewritables","SplitterContentElement","_page","_pageLoader","_getPageTarget","load","_content","pageLoader","oldContent","unload","SplitterMaskElement","_boundOnClick","_onClick","_sides","side","mode","close","_preventScroll","SplitterAnimator","sideElement","splitter","_side","_oppositeSide","_mask","mask","clearMask","minus","isOpen","opacity","OverlaySplitterAnimator","wait","PushSplitterAnimator","slidingElements","_slidingElements","_getSlidingElements","offsetWidth","RevealSplitterAnimator","activate","maxWidth","_getMaxWidth","_setStyles","_unsetStyles","deactivate","_generateBehindPageStyle","behindDistance","behindTransform","menuStyle","_animatorDict","SplitterElement","_getSide","some","callParentHandler","_layout","_width","_boundOnModeChange","_onModeChange","_onDeviceBackButton","registerAnimator","SPLIT_MODE","COLLAPSE_MODE","CLOSED_STATE","OPEN_STATE","CHANGING_STATE","WATCHED_ATTRIBUTES","splitterSideElement","CollapseDetection","_boundOnChange","_onChange","changeTarget","_target","_orientation","_updateMode","_match","_queryResult","matchMedia","addListener","removeListener","widthToPx","px","CollapseMode","_animator","_active","_state","_lock","_isOpenOtherSideMenu","_onDragStart","_onDragEnd","validDrag","area","_swipeTargetWidth","_startDistance","_distance","delta","translate","shouldOpen","_threshold","executeAction","layout","FINAL_STATE","_emitEvent","withoutAnimation","SplitterSideElement","_collapseMode","_collapseDetection","_animatorFactory","_boundHandleGesture","handleGesture","_watchedAttributes","_update","isCanceled","_mode","threshold","parseFloat","updateOptions","ToolbarButtonElement","fastClick","app","exitApp"],"mappings":"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"}